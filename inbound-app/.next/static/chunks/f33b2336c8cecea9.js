(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{613448:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({formatDistance:()=>a});let t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},a=(e,a,i)=>{let r,s=t[e];if(r="string"==typeof s?s:1===a?s.one:s.other.replace("{{count}}",a.toString()),i?.addSuffix)if(i.comparison&&i.comparison>0)return"in "+r;else return r+" ago";return r}}},950136:e=>{"use strict";var{g:t,__dirname:a}=e;function i(e){return (t={})=>{let a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}e.s({buildFormatLongFn:()=>i})},225255:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({formatLong:()=>t});var i=e.i(950136);let t={date:(0,i.buildFormatLongFn)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,i.buildFormatLongFn)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,i.buildFormatLongFn)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})}}},71510:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({formatRelative:()=>a});let t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},a=(e,a,i,r)=>t[e]}},345388:e=>{"use strict";var{g:t,__dirname:a}=e;function i(e){return(t,a)=>{let i;if("formatting"===(a?.context?String(a.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,r=a?.width?String(a.width):t;i=e.formattingValues[r]||e.formattingValues[t]}else{let t=e.defaultWidth,r=a?.width?String(a.width):e.defaultWidth;i=e.values[r]||e.values[t]}return i[e.argumentCallback?e.argumentCallback(t):t]}}e.s({buildLocalizeFn:()=>i})},627671:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({localize:()=>t});var i=e.i(345388);let t={ordinalNumber:(e,t)=>{let a=Number(e),i=a%100;if(i>20||i<10)switch(i%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},era:(0,i.buildLocalizeFn)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,i.buildLocalizeFn)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:(0,i.buildLocalizeFn)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,i.buildLocalizeFn)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,i.buildLocalizeFn)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})}}},339003:e=>{"use strict";var{g:t,__dirname:a}=e;function i(e){return(t,a={})=>{let i,r=a.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],n=t.match(s);if(!n)return null;let o=n[0],u=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(u)?function(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}(u,e=>e.test(o)):function(e,t){for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}(u,e=>e.test(o));return i=e.valueCallback?e.valueCallback(l):l,{value:i=a.valueCallback?a.valueCallback(i):i,rest:t.slice(o.length)}}}e.s({buildMatchFn:()=>i})},289969:e=>{"use strict";var{g:t,__dirname:a}=e;function i(e){return(t,a={})=>{let i=t.match(e.matchPattern);if(!i)return null;let r=i[0],s=t.match(e.parsePattern);if(!s)return null;let n=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:n=a.valueCallback?a.valueCallback(n):n,rest:t.slice(r.length)}}}e.s({buildMatchPatternFn:()=>i})},63685:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({match:()=>t});var i=e.i(339003);let t={ordinalNumber:(0,e.i(289969).buildMatchPatternFn)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:(0,i.buildMatchFn)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,i.buildMatchFn)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:(0,i.buildMatchFn)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,i.buildMatchFn)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,i.buildMatchFn)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})}}},597663:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a,enUS:()=>t});var i=e.i(613448),r=e.i(225255),s=e.i(71510),n=e.i(627671),o=e.i(63685);let t={code:"en-US",formatDistance:i.formatDistance,formatLong:r.formatLong,formatRelative:s.formatRelative,localize:n.localize,match:o.match,options:{weekStartsOn:0,firstWeekContainsDate:1}},a=t}},586393:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({defaultLocale:()=>i.enUS});var i=e.i(597663)},872880:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({getDefaultOptions:()=>i,setDefaultOptions:()=>r});let t={};function i(){return t}function r(e){t=e}}},291910:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({constructFromSymbol:()=>M,daysInWeek:()=>t,daysInYear:()=>a,maxTime:()=>i,millisecondsInDay:()=>n,millisecondsInHour:()=>u,millisecondsInMinute:()=>o,millisecondsInSecond:()=>l,millisecondsInWeek:()=>s,minTime:()=>r,minutesInDay:()=>m,minutesInHour:()=>y,minutesInMonth:()=>c,minutesInYear:()=>d,monthsInQuarter:()=>h,monthsInYear:()=>f,quartersInYear:()=>g,secondsInDay:()=>w,secondsInHour:()=>v,secondsInMinute:()=>p,secondsInMonth:()=>S,secondsInQuarter:()=>Q,secondsInWeek:()=>b,secondsInYear:()=>E});let t=7,a=365.2425,i=864e13,r=-864e13,s=6048e5,n=864e5,o=6e4,u=36e5,l=1e3,d=525600,c=43200,m=1440,y=60,h=3,f=12,g=4,v=3600,p=60,w=86400,b=604800,E=0x1e18558,S=2629746,Q=7889238,M=Symbol.for("constructDateFrom")}},737241:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({constructFrom:()=>r,default:()=>t});var i=e.i(291910);function r(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&i.constructFromSymbol in e?e[i.constructFromSymbol](t):e instanceof Date?new e.constructor(t):new Date(t)}let t=r}},623972:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>t,toDate:()=>r});var i=e.i(737241);function r(e,t){return(0,i.constructFrom)(t||e,e)}let t=r}},176975:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({getTimezoneOffsetInMilliseconds:()=>r});var i=e.i(623972);function r(e){let t=(0,i.toDate)(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),e-a}},286102:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({normalizeDates:()=>r});var i=e.i(737241);function r(e,...t){let a=i.constructFrom.bind(null,e||t.find(e=>"object"==typeof e));return t.map(a)}},231843:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({domainV2Keys:()=>t,useAddEmailAddressV2Mutation:()=>d,useDeleteDomainV2Mutation:()=>l,useDeleteEmailAddressV2Mutation:()=>c,useDomainDetailsV2Query:()=>o,useDomainVerificationCheckV2:()=>u,useDomainsListV2Query:()=>a,useUpdateDomainCatchAllV2Mutation:()=>y,useUpdateEmailEndpointV2Mutation:()=>m});var i=e.i(645643),r=e.i(659544),s=e.i(628662),n=e.i(520860);let t={all:["v2","domains"],list:e=>[...t.all,"list",e],detail:e=>[...t.all,e],verification:e=>[...t.all,e,"verification"],emailAddresses:e=>[...t.all,e,"email-addresses"]},a=e=>(0,i.useQuery)({queryKey:t.list(e),queryFn:async()=>{let t=new URLSearchParams;e?.limit&&t.set("limit",e.limit.toString()),e?.offset&&t.set("offset",e.offset.toString()),e?.status&&t.set("status",e.status),e?.canReceive&&t.set("canReceive",e.canReceive),e?.check&&t.set("check",e.check);let a=await fetch(`/api/v2/domains?${t}`);if(!a.ok)throw Error((await a.json()).error||`HTTP error! status: ${a.status}`);return a.json()},staleTime:12e4,gcTime:3e5}),o=e=>(0,i.useQuery)({queryKey:t.detail(e),queryFn:async()=>{let t=await fetch(`/api/v2/domains/${e}`);if(!t.ok)throw Error((await t.json()).error||`HTTP error! status: ${t.status}`);return t.json()},enabled:!!e,staleTime:12e4,gcTime:6e5}),u=e=>{let a=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async()=>{let e=await fetch("/api/v2/domains?status=pending&check=true");if(!e.ok)throw Error((await e.json()).error||"Failed to check verification");return e.json()},onSuccess:()=>{a.invalidateQueries({queryKey:t.detail(e)})}})},l=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>{let t=await fetch(`/api/v2/domains/${e}`,{method:"DELETE"});if(!t.ok)throw Error((await t.json()).error||"Failed to delete domain");return t.json()},onMutate:async a=>{console.log("🗑️ Starting optimistic domain deletion for:",a),await e.cancelQueries({queryKey:t.all});let i=[],r=e.getQueriesData({queryKey:t.all});for(let[t,s]of(console.log("📊 Found",r.length,"cached domain queries to update"),r))if(s&&Array.isArray(s.data)&&"object"==typeof s.meta&&null!==s.meta){console.log("✅ Updating query with",s.data.length,"domains, totalCount:",s.meta.totalCount),i.push({queryKey:t,data:s});let r={...s,data:s.data.filter(e=>e.id!==a),meta:{...s.meta,totalCount:Math.max((s.meta?.totalCount||0)-1,0)}};e.setQueryData(t,r),console.log("✅ Updated query - new count:",r.data.length,"totalCount:",r.meta.totalCount)}else console.warn("⚠️ Skipping invalid query data:",{hasData:!!s,isDataArray:!!s&&Array.isArray(s.data),hasMeta:!!s&&"object"==typeof s.meta&&null!==s.meta});return console.log("✅ Optimistic update complete - updated",i.length,"queries"),{previousQueriesData:i}},onError:(t,a,i)=>{if(console.error("❌ Domain deletion failed, rolling back optimistic updates:",t.message),i?.previousQueriesData){for(let{queryKey:t,data:a}of(console.log("🔄 Rolling back",i.previousQueriesData.length,"queries"),i.previousQueriesData))e.setQueryData(t,a);console.log("✅ Rollback complete")}},onSuccess:(a,i)=>{e.removeQueries({queryKey:t.detail(i)}),e.invalidateQueries({queryKey:t.all}),e.invalidateQueries({queryKey:["domains"]}),e.invalidateQueries({queryKey:["domainStats"]})}})},d=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>{let t=await fetch("/api/v2/email-addresses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Failed to add email address");return t.json()},onSuccess:a=>{(0,n.track)("Email Address Added",{address:a.address,domainId:a.domainId,emailAddressId:a.id}),e.invalidateQueries({queryKey:t.detail(a.domainId)}),e.invalidateQueries({queryKey:t.emailAddresses(a.domainId)})}})},c=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async({emailAddressId:e})=>{let t=await fetch(`/api/v2/email-addresses/${e}`,{method:"DELETE"});if(!t.ok)throw Error((await t.json()).error||"Failed to delete email address");return t.json()},onSuccess:(a,{domainId:i})=>{e.invalidateQueries({queryKey:t.detail(i)}),e.invalidateQueries({queryKey:t.emailAddresses(i)})}})},m=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async({emailAddressId:e,domainId:t,...a})=>{console.log("🚀 Sending update request:",{url:`/api/v2/email-addresses/${e}`,body:a});let i=await fetch(`/api/v2/email-addresses/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!i.ok)throw Error((await i.json()).error||"Failed to update endpoint");let r=await i.json();return console.log("📥 Update response:",r),r},onSuccess:(a,{domainId:i})=>{e.invalidateQueries({queryKey:t.detail(i)}),e.invalidateQueries({queryKey:t.emailAddresses(i)})}})},y=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async({domainId:e,...t})=>{let a=await fetch(`/api/v2/domains/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).error||"Failed to update catch-all settings");return a.json()},onSuccess:(a,{domainId:i,isCatchAllEnabled:r,catchAllEndpointId:s})=>{(0,n.track)(r?"Catch All Enabled":"Catch All Disabled",{domainId:i,endpointId:s||null}),e.invalidateQueries({queryKey:t.detail(i)})}})}}},992460:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>t});var i=e.i(731636);let t=function({fill:e="currentColor",secondaryfill:t,title:a="badge 13",...r}){return t=t||e,(0,i.jsxs)("svg",{height:"12",width:"12",...r,viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("title",{children:a}),(0,i.jsxs)("g",{fill:e,children:[(0,i.jsx)("path",{d:"m1.75,11c-.192,0-.384-.073-.53-.22-.293-.293-.293-.768,0-1.061L9.543,1.396c.293-.293.768-.293,1.061,0s.293.768,0,1.061L2.28,10.78c-.146.146-.338.22-.53.22Z",fill:t,strokeWidth:"0"}),(0,i.jsx)("path",{d:"m10.25,7.25c-.414,0-.75-.336-.75-.75V2.5h-4c-.414,0-.75-.336-.75-.75s.336-.75.75-.75h4.75c.414,0,.75.336.75.75v4.75c0,.414-.336.75-.75.75Z",fill:e,strokeWidth:"0"})]})]})}}},986392:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({getEmailDetails:()=>r});var i=e.i(286714),r=(0,i.createServerReference)("40ccd8d8e26d5a0a7819f93603cecd1770ab9afb12",i.callServer,void 0,i.findSourceMapURL,"getEmailDetails")},315894:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({useEmailQuery:()=>t});var i=e.i(645643),r=e.i(986392);let t=e=>(0,i.useQuery)({queryKey:["email",e],queryFn:async()=>{if(!e)throw Error("Email ID is required");let t=await (0,r.getEmailDetails)(e);if(t.error)throw Error(t.error);return t.data},enabled:!!e,staleTime:3e5,gcTime:6e5,retry:(e,t)=>"Email not found"!==t.message&&e<3})}},248262:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({markEmailAsRead:()=>r});var i=e.i(286714),r=(0,i.createServerReference)("400e0c4e16c3c0c54c42073a20508c7d05f4dd64fa",i.callServer,void 0,i.findSourceMapURL,"markEmailAsRead")},28163:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({useMarkEmailAsReadMutation:()=>t});var i=e.i(659544),r=e.i(628662),s=e.i(248262),n=e.i(55496);let t=()=>{let e=(0,r.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>{let t=await (0,s.markEmailAsRead)(e);if(t.error)throw Error(t.error);return t.data},onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["email",a]}),e.invalidateQueries({queryKey:["analytics"]}),e.invalidateQueries({queryKey:["emails"]})},onMutate:async t=>{await e.cancelQueries({queryKey:["email",t]});let a=e.getQueryData(["email",t]);return e.setQueryData(["email",t],e=>e?{...e,isRead:!0,readAt:new Date}:e),{previousEmail:a}},onError:(t,a,i)=>{i?.previousEmail&&e.setQueryData(["email",a],i.previousEmail),console.error("Failed to mark email as read:",t),n.toast.error("Failed to mark email as read")},onSettled:(t,a,i)=>{e.invalidateQueries({queryKey:["email",i]})}})}}},537644:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({emailAddressesV2Keys:()=>t,useCreateEmailAddressV2Mutation:()=>o,useDeleteEmailAddressV2Mutation:()=>l,useEmailAddressV2Query:()=>n,useEmailAddressesV2Query:()=>a,useUpdateEmailAddressV2Mutation:()=>u});var i=e.i(645643),r=e.i(659544),s=e.i(628662);let t={all:["v2","email-addresses"],lists:()=>[...t.all,"list"],list:e=>[...t.lists(),e],details:()=>[...t.all,"detail"],detail:e=>[...t.details(),e]},a=e=>(0,i.useQuery)({queryKey:t.list(e),queryFn:async()=>{let t=new URLSearchParams;e?.limit&&t.set("limit",e.limit.toString()),e?.offset&&t.set("offset",e.offset.toString()),e?.domainId&&t.set("domainId",e.domainId),e?.isActive&&t.set("isActive",e.isActive),e?.isReceiptRuleConfigured&&t.set("isReceiptRuleConfigured",e.isReceiptRuleConfigured);let a=await fetch(`/api/v2/email-addresses?${t}`);if(!a.ok)throw Error((await a.json()).error||`HTTP error! status: ${a.status}`);return a.json()},staleTime:12e4,gcTime:3e5}),n=e=>(0,i.useQuery)({queryKey:t.detail(e),queryFn:async()=>{let t=await fetch(`/api/v2/email-addresses/${e}`);if(!t.ok)throw Error((await t.json()).error||`HTTP error! status: ${t.status}`);return t.json()},enabled:!!e,staleTime:12e4,gcTime:6e5}),o=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>{let t=await fetch("/api/v2/email-addresses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Failed to create email address");return t.json()},onSuccess:a=>{e.invalidateQueries({queryKey:t.lists()}),e.invalidateQueries({queryKey:["v2","domains"]})}})},u=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async({emailAddressId:e,...t})=>{let a=await fetch(`/api/v2/email-addresses/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).error||"Failed to update email address");return a.json()},onSuccess:(a,{emailAddressId:i})=>{e.invalidateQueries({queryKey:t.detail(i)}),e.invalidateQueries({queryKey:t.lists()}),e.invalidateQueries({queryKey:["v2","domains"]})}})},l=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>{let t=await fetch(`/api/v2/email-addresses/${e}`,{method:"DELETE"});if(!t.ok)throw Error((await t.json()).error||"Failed to delete email address");return t.json()},onSuccess:(a,i)=>{e.removeQueries({queryKey:t.detail(i)}),e.invalidateQueries({queryKey:t.lists()}),e.invalidateQueries({queryKey:["v2","domains"]})}})}}},875960:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({mailV2Keys:()=>t,useBulkUpdateEmailsMutation:()=>l,useEmailThreadCountsV2Query:()=>h,useEmailThreadV2Query:()=>y,useMailDetailsV2Query:()=>n,useMailV2Query:()=>a,useMarkEmailAsReadV2Mutation:()=>d,useOutboundEmailDetailsV2Query:()=>o,useReplyToEmailV2Mutation:()=>m,useUpdateEmailMutation:()=>u,useUserEmailLogsV2Query:()=>c});var i=e.i(645643),r=e.i(659544),s=e.i(628662);let t={all:["v2","mail"],lists:()=>[...t.all,"list"],list:e=>[...t.lists(),e],details:()=>[...t.all,"detail"],detail:e=>[...t.details(),e],outboundEmails:()=>["v2","emails"],outboundEmail:e=>[...t.outboundEmails(),e]},a=e=>(0,i.useQuery)({queryKey:t.list(e),queryFn:async()=>{let t=new URLSearchParams;e?.limit&&t.set("limit",e.limit.toString()),e?.offset&&t.set("offset",e.offset.toString()),e?.search&&t.set("search",e.search),e?.status&&t.set("status",e.status),e?.domain&&t.set("domain",e.domain),e?.timeRange&&t.set("timeRange",e.timeRange);let a=await fetch(`/api/v2/mail?${t}`);if(!a.ok)throw Error((await a.json()).error||`HTTP error! status: ${a.status}`);return a.json()},staleTime:3e4,gcTime:3e5}),n=e=>(0,i.useQuery)({queryKey:t.detail(e),queryFn:async()=>{let t=await fetch(`/api/v2/mail/${e}`);if(!t.ok)throw Error((await t.json()).error||`HTTP error! status: ${t.status}`);return t.json()},enabled:!!e,staleTime:6e4,gcTime:6e5}),o=e=>(0,i.useQuery)({queryKey:t.outboundEmail(e),queryFn:async()=>{let t=await fetch(`/api/v2/emails/${e}`);if(!t.ok)throw Error((await t.json()).error||`HTTP error! status: ${t.status}`);return t.json()},enabled:!!e,staleTime:6e4,gcTime:6e5}),u=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async({emailId:e,updates:t})=>{let a=await fetch(`/api/v2/mail/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).error||`HTTP error! status: ${a.status}`);return a.json()},onMutate:async({emailId:a,updates:i})=>{await e.cancelQueries({queryKey:t.lists()});let r=e.getQueriesData({queryKey:t.lists()});return e.setQueriesData({queryKey:t.lists()},e=>e?.emails?{...e,emails:e.emails.map(e=>{if(e.id===a){let t={...e};return void 0!==i.isRead&&(t.isRead=i.isRead,t.readAt=i.isRead?new Date().toISOString():null),void 0!==i.isArchived&&(t.isArchived=i.isArchived,t.archivedAt=i.isArchived?new Date().toISOString():null),t}return e})}:e),{previousEmailLists:r}},onError:(t,a,i)=>{i?.previousEmailLists&&i.previousEmailLists.forEach(([t,a])=>{e.setQueryData(t,a)})},onSettled:()=>{e.invalidateQueries({queryKey:t.lists()})}})},l=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>{let t=await fetch("/api/v2/mail/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||`HTTP error! status: ${t.status}`);return t.json()},onMutate:async({emailIds:a,updates:i})=>{await e.cancelQueries({queryKey:t.lists()});let r=e.getQueriesData({queryKey:t.lists()});return e.setQueriesData({queryKey:t.lists()},e=>e?.emails?{...e,emails:e.emails.map(e=>{if(a.includes(e.id)){let t={...e};return void 0!==i.isRead&&(t.isRead=i.isRead,t.readAt=i.isRead?new Date().toISOString():null),void 0!==i.isArchived&&(t.isArchived=i.isArchived,t.archivedAt=i.isArchived?new Date().toISOString():null),t}return e}).filter(e=>!0!==i.isArchived||!a.includes(e.id))}:e),{previousEmailLists:r}},onError:(t,a,i)=>{i?.previousEmailLists&&i.previousEmailLists.forEach(([t,a])=>{e.setQueryData(t,a)})},onSettled:()=>{e.invalidateQueries({queryKey:t.lists()})}})},d=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async e=>{let t=await fetch(`/api/v2/mail/${e}/mark-read`,{method:"POST"});if(!t.ok)throw Error((await t.json()).error||"Failed to mark email as read");return t.json()},onSuccess:(a,i)=>{e.invalidateQueries({queryKey:t.detail(i)}),e.invalidateQueries({queryKey:t.lists()})}})},c=e=>a({...e,limit:e?.limit||50,offset:e?.offset||0}),m=()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:async({emailId:e,...t})=>{let a=await fetch(`/api/v2/emails/${e}/reply`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error((await a.json()).error||"Failed to send reply");return a.json()},onSuccess:(a,{emailId:i})=>{e.invalidateQueries({queryKey:t.lists()}),e.invalidateQueries({queryKey:t.detail(i)})}})},y=e=>(0,i.useQuery)({queryKey:[...t.detail(e),"thread"],queryFn:async()=>{let t=await fetch(`/api/v2/mail/${e}/thread`);if(!t.ok)throw Error((await t.json()).error||`HTTP error! status: ${t.status}`);return t.json()},enabled:!!e,staleTime:6e4,gcTime:6e5}),h=e=>(0,i.useQuery)({queryKey:["mail-v2","thread-counts",...e.sort()],queryFn:async()=>{let t=await fetch("/api/v2/mail/thread-counts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailIds:e})});if(!t.ok)throw Error((await t.json()).error||`HTTP error! status: ${t.status}`);return t.json()},enabled:e.length>0,staleTime:12e4,gcTime:6e5})}},562530:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({getUserEmailLogs:()=>r});var i=e.i(286714),r=(0,i.createServerReference)("4036a927bdcc185c7cd5221062f42afb70733d159f",i.callServer,void 0,i.findSourceMapURL,"getUserEmailLogs")},701479:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({useUserEmailLogsQuery:()=>s});var i=e.i(645643),r=e.i(562530);function s(e={}){return(0,i.useQuery)({queryKey:["user-email-logs",e],queryFn:async()=>{let t=await (0,r.getUserEmailLogs)(e);if(!t.success)throw Error(t.error);return t.data},staleTime:3e4,gcTime:3e5})}},121348:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({getEmailsList:()=>r});var i=e.i(286714),r=(0,i.createServerReference)("4062391b8b9fea3dab173568dc243176dcda35bc73",i.callServer,void 0,i.findSourceMapURL,"getEmailsList")},403381:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({getEmailDetailsFromParsed:()=>r});var i=e.i(286714),r=(0,i.createServerReference)("40134f515b8fe5278d31a536a3a223c156ec6b61af",i.callServer,void 0,i.findSourceMapURL,"getEmailDetailsFromParsed")},64366:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({getUnifiedEmailLogs:()=>r});var i=e.i(286714),r=(0,i.createServerReference)("40f4308e9524f900b328889cf8d5095aa19d019d23",i.callServer,void 0,i.findSourceMapURL,"getUnifiedEmailLogs")},226317:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({emailKeys:()=>t,useEmailDetailsQuery:()=>l,useEmailsListQuery:()=>u,useUnifiedEmailLogsQuery:()=>o});var i=e.i(645643),r=e.i(121348),s=e.i(403381),n=e.i(64366);function o(e={}){return(0,i.useQuery)({queryKey:["unified-email-logs",e],queryFn:async()=>{let t=await (0,n.getUnifiedEmailLogs)(e);if(!t.success)throw Error(t.error);return t.data},staleTime:3e4,gcTime:3e5})}e.i(231843),e.i(315894),e.i(28163),e.i(537644),e.i(875960),e.i(701479);let t={all:["emails"],lists:()=>[...t.all,"list"],list:e=>[...t.lists(),e],details:()=>[...t.all,"detail"],detail:e=>[...t.details(),e]};function u(e){return(0,i.useQuery)({queryKey:t.list(e||{}),queryFn:()=>(0,r.getEmailsList)(e),staleTime:3e4,gcTime:3e5})}function l(e,a=!0){return(0,i.useQuery)({queryKey:t.detail(e),queryFn:()=>(0,s.getEmailDetailsFromParsed)(e),enabled:a&&!!e,staleTime:6e4,gcTime:6e5})}}},866971:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({}),e.i(231843),e.i(315894),e.i(28163),e.i(537644),e.i(875960),e.i(701479),e.i(226317)}}]);

//# sourceMappingURL=95c8d6f07f980737.js.map