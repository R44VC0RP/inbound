(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{846146:e=>{"use strict";var{g:s,__dirname:t}=e;{e.s({default:()=>s});var a=e.i(731636);let s=function({fill:e="currentColor",secondaryfill:s,title:t="badge 13",...l}){return s=s||e,(0,a.jsxs)("svg",{height:"18",width:"18",...l,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("title",{children:t}),(0,a.jsxs)("g",{fill:e,children:[(0,a.jsx)("circle",{cx:"9",cy:"9",fill:s,r:"3.5"}),(0,a.jsx)("path",{d:"M1.75,9.75c-.076,0-.153-.012-.23-.036-.394-.127-.611-.549-.484-.944,.02-.06,2.007-6.02,7.964-6.02s7.945,5.962,7.965,6.022c.125,.394-.092,.814-.486,.941-.395,.128-.815-.091-.943-.484-.065-.203-1.666-4.979-6.536-4.979S2.48,9.18,2.464,9.23c-.103,.318-.397,.52-.714,.52Z",fill:e})]})]})}}},646480:e=>{"use strict";var{g:s,__dirname:t}=e;{e.s({default:()=>s});var a=e.i(731636);let s=function({fill:e="currentColor",secondaryfill:s,title:t="badge 13",...l}){return s=s||e,(0,a.jsxs)("svg",{height:"18",width:"18",...l,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("title",{children:t}),(0,a.jsx)("g",{fill:e,children:(0,a.jsx)("path",{d:"M15.25,2H2.75c-.414,0-.75,.336-.75,.75v1.785c0,.518,.227,1.005,.622,1.338l4.378,3.695v6.682c0,.414,.336,.75,.75,.75h2.5c.414,0,.75-.336,.75-.75v-6.682l4.377-3.695c.396-.333,.623-.821,.623-1.339v-1.785c0-.414-.336-.75-.75-.75Z",fill:e})})]})}}},700658:e=>{"use strict";var{g:s,__dirname:t}=e;{e.s({default:()=>s});var a=e.i(731636);let s=function({fill:e="currentColor",secondaryfill:s,title:t="badge 13",...l}){return s=s||e,(0,a.jsxs)("svg",{height:"12",width:"12",...l,viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("title",{children:t}),(0,a.jsxs)("g",{fill:e,children:[(0,a.jsx)("path",{d:"m11.25,4.441H1.59c-.414,0-.75-.336-.75-.75s.336-.75.75-.75h9.66c.414,0,.75.336.75.75s-.336.75-.75.75Z",fill:s,strokeWidth:"0"}),(0,a.jsx)("path",{d:"m10.41,9.061H.75c-.414,0-.75-.336-.75-.75s.336-.75.75-.75h9.66c.414,0,.75.336.75.75s-.336.75-.75.75Z",fill:s,strokeWidth:"0"}),(0,a.jsx)("path",{d:"m2.884,12.001c-.046,0-.092-.004-.139-.013-.407-.077-.675-.468-.599-.875L4.114.613c.076-.407.464-.677.875-.599.407.077.675.468.599.875l-1.969,10.5c-.068.36-.383.612-.736.612Z",fill:e,strokeWidth:"0"}),(0,a.jsx)("path",{d:"m7.149,12.001c-.046,0-.092-.004-.139-.013-.407-.077-.675-.468-.599-.875L8.38.613c.076-.407.464-.677.875-.599.407.077.675.468.599.875l-1.969,10.5c-.068.36-.383.612-.736.612Z",fill:e,strokeWidth:"0"})]})]})}}},937883:e=>{"use strict";var{g:s,__dirname:t}=e;{e.s({default:()=>s});var a=e.i(731636);let s=function({fill:e="currentColor",secondaryfill:s,title:t="badge 13",...l}){return s=s||e,(0,a.jsxs)("svg",{height:"18",width:"18",...l,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("title",{children:t}),(0,a.jsxs)("g",{fill:e,children:[(0,a.jsx)("path",{d:"M4.75,13h-1c-1.517,0-2.75-1.233-2.75-2.75V4.75c0-1.517,1.233-2.75,2.75-2.75h7.5c1.517,0,2.75,1.233,2.75,2.75v1h-1.5v-1c0-.689-.561-1.25-1.25-1.25H3.75c-.689,0-1.25,.561-1.25,1.25v5.5c0,.689,.561,1.25,1.25,1.25h1v1.5Z",fill:s}),(0,a.jsx)("rect",{height:"11",width:"13",fill:e,rx:"2.75",ry:"2.75",x:"4",y:"5"})]})]})}}},302954:e=>{"use strict";var{g:s,__dirname:t}=e;{e.s({default:()=>s});var a=e.i(731636);let s=function({fill:e="currentColor",secondaryfill:s,title:t="badge 13",...l}){return s=s||e,(0,a.jsxs)("svg",{height:"12",width:"12",...l,viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("title",{children:t}),(0,a.jsxs)("g",{fill:e,children:[(0,a.jsx)("path",{d:"m10.75,2c-.414,0-.75.336-.75.75v3.25h-1.25c-.414,0-.75.336-.75.75v1.25h-4v-1.25c0-.414-.336-.75-.75-.75h-1.25v-3.25c0-.414-.336-.75-.75-.75s-.75.336-.75.75v6c0,1.517,1.233,2.75,2.75,2.75h5.5c1.517,0,2.75-1.233,2.75-2.75V2.75c0-.414-.336-.75-.75-.75Z",fill:e,strokeWidth:"0"}),(0,a.jsx)("path",{d:"m7.72,1.72l-.97.97V.75c0-.414-.336-.75-.75-.75s-.75.336-.75.75v1.939l-.97-.97c-.293-.293-.768-.293-1.061,0s-.293.768,0,1.061l2.25,2.25c.146.146.338.22.53.22s.384-.073.53-.22l2.25-2.25c.293-.293.293-.768,0-1.061s-.768-.293-1.061,0Z",fill:s,strokeWidth:"0"})]})]})}}},587937:e=>{"use strict";var{g:s,__dirname:t}=e;e.s({default:()=>z});var a=e.i(731636),l=e.i(838653),i=e.i(210339),d=e.i(834953),r=e.i(330790),n=e.i(974294),c=e.i(560405),m=e.i(308491),x=e.i(344077),o=e.i(891083),h=e.i(13083),u=e.i(186240),j=e.i(799544),g=e.i(529406),f=e.i(70818),p=e.i(846146),v=e.i(646480),N=e.i(274260),b=e.i(404800),w=e.i(622808),y=e.i(561657),S=e.i(902273),C=e.i(103394),T=e.i(303890),R=e.i(700658),A=e.i(656811),B=e.i(816328),P=e.i(937883),k=e.i(992460),I=e.i(302954),D=e.i(165975);e.i(866971);var L=e.i(226317),F=e.i(875960),M=e.i(55496);function H(e){return"inbound"===e.type?(0,a.jsx)(I.default,{width:"16",height:"16",className:"text-purple-600"}):(0,a.jsx)(D.default,{width:"16",height:"16",className:"text-blue-600"})}function E(e){if("inbound"===e.type){let s=e.deliveries.length>0,t=e.deliveries.some(e=>"success"===e.status),l=e.deliveries.some(e=>"failed"===e.status),i=e.deliveries.some(e=>"pending"===e.status);if(!e.parseSuccess)return(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"});if(t)return(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"});if(l)return(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"});else if(i)return(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500"});else if(!s)return(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-400"});else return(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-400"})}switch(e.status){case"sent":return(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"});case"failed":return(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"});case"pending":return(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500"});default:return(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-400"})}}function O({log:e,isOpen:s,onClose:t}){let l=async(e,s)=>{try{await navigator.clipboard.writeText(e),M.toast.success(`${s} copied to clipboard`)}catch(e){M.toast.error("Failed to copy to clipboard")}};if(!e)return null;let r="inbound"===e.type,n=r?e:null,j=r?null:e,g=(0,F.useMailDetailsV2Query)(r?e.id:""),v=(0,F.useOutboundEmailDetailsV2Query)(r?"":e.emailId),N=r?g.data:null,b=r?null:v.data,w=r?g.isLoading:v.isLoading,C=r?g.error:v.error;return(0,a.jsx)(c.Sheet,{open:s,onOpenChange:t,children:(0,a.jsxs)(c.SheetContent,{side:"bottom",className:"h-[85vh] sm:max-w-none",children:[(0,a.jsxs)(c.SheetHeader,{className:"pb-4",children:[(0,a.jsxs)(c.SheetTitle,{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[H(e),(0,a.jsx)("div",{className:"absolute -top-1 -right-1",children:E(e)})]}),r?"Inbound":"Outbound"," Email Log Details",w&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"(Loading...)"})]}),(0,a.jsxs)(c.SheetDescription,{children:["Message ID: ",e.messageId]})]}),(0,a.jsx)(m.ScrollArea,{className:"h-[calc(85vh-120px)]",children:(0,a.jsxs)("div",{className:"space-y-6 pb-6",children:[w&&(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading email details..."})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Email Information"}),(0,a.jsx)("div",{className:"space-y-2 text-sm",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Type:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[H(e),(0,a.jsx)("div",{className:"absolute -top-1 -right-1",children:E(e)})]}),(0,a.jsx)("p",{className:"font-medium capitalize",children:e.type})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"From:"}),(0,a.jsx)("p",{className:"font-medium",children:e.from})]}),r&&n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"To:"}),(0,a.jsx)("p",{className:"font-medium",children:n.recipient})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Received:"}),(0,a.jsx)("p",{className:"font-medium",children:(0,h.format)(new Date(n.receivedAt),"PPpp")})]})]}),!r&&j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"To:"}),(0,a.jsx)("div",{className:"font-medium",children:j.to.map((e,s)=>(0,a.jsx)("div",{children:e},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Status:"}),(0,a.jsx)("p",{className:"font-medium capitalize",children:j.status})]}),j.sentAt&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Sent:"}),(0,a.jsx)("p",{className:"font-medium",children:(0,h.format)(new Date(j.sentAt),"PPpp")})]}),j.provider&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Provider:"}),(0,a.jsx)("p",{className:"font-medium uppercase",children:j.provider})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Subject:"}),(0,a.jsx)("p",{className:"font-medium",children:e.subject})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Domain:"}),(0,a.jsx)("p",{className:"font-medium",children:e.domain})]}),r&&n&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Processing Time:"}),(0,a.jsxs)("p",{className:"font-medium",children:[n.processingTimeMs,"ms"]})]})]})})]}),(0,a.jsx)(o.Separator,{}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Email Content"}),w?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading email content..."})}):C?(0,a.jsxs)("div",{className:"p-4 bg-destructive/10 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(f.default,{width:"16",height:"16",className:"text-destructive"}),(0,a.jsx)("span",{className:"font-medium text-destructive",children:"Failed to Load Content"})]}),(0,a.jsx)("p",{className:"text-sm text-destructive",children:C.message})]}):N||b?(0,a.jsxs)(x.Tabs,{defaultValue:"html",className:"w-full",children:[(0,a.jsxs)(x.TabsList,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(x.TabsTrigger,{value:"html",children:"HTML"}),(0,a.jsx)(x.TabsTrigger,{value:"text",children:"Text"}),(0,a.jsx)(x.TabsTrigger,{value:"raw",children:"Raw"})]}),(0,a.jsx)(x.TabsContent,{value:"html",className:"space-y-2",children:(r?N?.content?.htmlBody:b?.html)?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"HTML Content:"}),(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>l(r?N?.content?.htmlBody||"":b?.html||"","HTML content"),children:(0,a.jsx)(P.default,{width:"12",height:"12"})})]}),(0,a.jsx)("div",{className:"border rounded-lg p-4 bg-muted/20 max-h-96 overflow-auto",children:(0,a.jsx)("iframe",{srcDoc:`
                               <html>
                                 <head>
                                   <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
                                   <style>
                                     body {
                                       font-family: 'Outfit', Arial, Helvetica, sans-serif;
                                       color: white;
                                       background-color: transparent;
                                       margin: 0;
                                       padding: 16px;
                                     }
                                     * {
                                       font-family: 'Outfit', Arial, Helvetica, sans-serif;
                                       font-weight: 400;
                                       color: white;
                                     }
                                     a {
                                       color: #60a5fa !important;
                                     }
                                   </style>
                                 </head>
                                 <body>
                                   ${r?N?.content?.htmlBody||"":b?.html||""}
                                 </body>
                               </html>
                             `,className:"w-full min-h-[300px] border-0",sandbox:"allow-same-origin",title:"Email HTML Content"})})]}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No HTML content available"})}),(0,a.jsx)(x.TabsContent,{value:"text",className:"space-y-2",children:(r?N?.content?.textBody:b?.text)?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Text Content:"}),(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>l(r?N?.content?.textBody||"":b?.text||"","Text content"),children:(0,a.jsx)(P.default,{width:"12",height:"12"})})]}),(0,a.jsx)("pre",{className:"text-sm bg-muted p-4 rounded-lg overflow-x-auto whitespace-pre-wrap max-h-96 overflow-y-auto",children:r?N?.content?.textBody:b?.text})]}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No text content available"})}),(0,a.jsx)(x.TabsContent,{value:"raw",className:"space-y-2",children:r&&N?.content?.rawContent?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Raw Email Content:"}),(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>l(N?.content?.rawContent||"","Raw content"),children:(0,a.jsx)(P.default,{width:"12",height:"12"})})]}),(0,a.jsx)("pre",{className:"text-xs bg-muted p-4 rounded-lg overflow-x-auto font-mono max-h-96 overflow-y-auto",children:N?.content?.rawContent})]}):(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Raw content not available ",!r&&"(outbound emails only store HTML/text)"]})})]}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No email content available"})]}),(0,a.jsx)(o.Separator,{}),(N||b)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Email Statistics"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:r&&N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Parse Success:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[N.metadata?.parseSuccess?(0,a.jsx)(y.default,{width:"14",height:"14",className:"text-green-600"}):(0,a.jsx)(S.default,{width:"14",height:"14",className:"text-destructive"}),(0,a.jsx)("p",{className:"font-medium",children:N.metadata?.parseSuccess?"Yes":"No"})]})]}),N.metadata?.parseError&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Parse Error:"}),(0,a.jsx)("p",{className:"font-medium text-destructive",children:N.metadata.parseError})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Has Text Body:"}),(0,a.jsx)("p",{className:"font-medium",children:N.metadata?.hasTextBody?"Yes":"No"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Has HTML Body:"}),(0,a.jsx)("p",{className:"font-medium",children:N.metadata?.hasHtmlBody?"Yes":"No"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Attachments:"}),(0,a.jsx)("p",{className:"font-medium",children:N.metadata?.attachmentCount||0})]}),N.metadata?.priority&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Priority:"}),(0,a.jsx)("p",{className:"font-medium",children:N.metadata.priority})]})]}):b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Created:"}),(0,a.jsx)("p",{className:"font-medium",children:(0,h.format)(new Date(b.created_at),"PPpp")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Last Event:"}),(0,a.jsx)("p",{className:"font-medium capitalize",children:b.last_event})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Recipients:"}),(0,a.jsxs)("p",{className:"font-medium",children:[b.to?.length||0," to, ",b.cc?.filter(Boolean).length||0," cc, ",b.bcc?.filter(Boolean).length||0," bcc"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Content Type:"}),(0,a.jsx)("p",{className:"font-medium",children:b.html&&b.text?"HTML + Text":b.html?"HTML Only":b.text?"Text Only":"None"})]})]}):null})]}),(0,a.jsx)(o.Separator,{})]}),r&&N?.content?.attachments&&N.content.attachments.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold mb-3",children:["Attachments (",N.content.attachments.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:N.content.attachments.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(R.default,{width:"16",height:"16",className:"text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:e.filename}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.contentType," • ",e.size?`${Math.round(e.size/1024)}KB`:"Unknown size"]})]})]}),e.contentId&&(0,a.jsx)(i.Badge,{variant:"outline",className:"text-xs",children:"Inline"})]},s))})]}),(0,a.jsx)(o.Separator,{})]}),!r&&j&&(j.cc||j.bcc||j.replyTo)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Additional Recipients"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[j.cc&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"CC:"}),(0,a.jsx)("div",{className:"font-medium",children:j.cc.map((e,s)=>(0,a.jsx)("div",{children:e},s))})]}),j.bcc&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"BCC:"}),(0,a.jsx)("div",{className:"font-medium",children:j.bcc.map((e,s)=>(0,a.jsx)("div",{children:e},s))})]}),j.replyTo&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Reply-To:"}),(0,a.jsx)("div",{className:"font-medium",children:j.replyTo.map((e,s)=>(0,a.jsx)("div",{children:e},s))})]})]})]}),(0,a.jsx)(o.Separator,{})]}),r&&n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Authentication Results"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(i.Badge,{variant:"PASS"===n.authResults.spf?"default":"destructive",className:"PASS"===n.authResults.spf?"bg-green-500/10 text-green-600 border-green-500/20":"",children:["PASS"===n.authResults.spf?(0,a.jsx)(A.default,{width:"12",height:"12",className:"mr-1"}):(0,a.jsx)(B.default,{width:"12",height:"12",className:"mr-1"}),"SPF: ",n.authResults.spf]}),(0,a.jsxs)(i.Badge,{variant:"PASS"===n.authResults.dkim?"default":"destructive",className:"PASS"===n.authResults.dkim?"bg-green-500/10 text-green-600 border-green-500/20":"",children:["PASS"===n.authResults.dkim?(0,a.jsx)(A.default,{width:"12",height:"12",className:"mr-1"}):(0,a.jsx)(B.default,{width:"12",height:"12",className:"mr-1"}),"DKIM: ",n.authResults.dkim]}),(0,a.jsxs)(i.Badge,{variant:"PASS"===n.authResults.dmarc?"default":"destructive",className:"PASS"===n.authResults.dmarc?"bg-green-500/10 text-green-600 border-green-500/20":"",children:["PASS"===n.authResults.dmarc?(0,a.jsx)(A.default,{width:"12",height:"12",className:"mr-1"}):(0,a.jsx)(B.default,{width:"12",height:"12",className:"mr-1"}),"DMARC: ",n.authResults.dmarc]}),(0,a.jsxs)(i.Badge,{variant:"PASS"===n.authResults.spam?"default":"destructive",className:"PASS"===n.authResults.spam?"bg-green-500/10 text-green-600 border-green-500/20":"",children:["Spam: ",n.authResults.spam]}),(0,a.jsxs)(i.Badge,{variant:"PASS"===n.authResults.virus?"default":"destructive",className:"PASS"===n.authResults.virus?"bg-green-500/10 text-green-600 border-green-500/20":"",children:["Virus: ",n.authResults.virus]})]})]}),(0,a.jsx)(o.Separator,{})]}),r&&n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Delivery Information"}),0===n.deliveries.length?(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No delivery configured for this email"}):(0,a.jsx)("div",{className:"space-y-4",children:n.deliveries.map(e=>(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium",children:e.config?.name||"Unknown Endpoint"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"webhook"===e.type?"Webhook":"Email Forward"})]}),(0,a.jsx)(i.Badge,{variant:"success"===e.status?"default":"failed"===e.status?"destructive":"secondary",className:"success"===e.status?"bg-green-500/10 text-green-600 border-green-500/20":"failed"===e.status?"":"bg-yellow-500/10 text-yellow-600 border-yellow-500/20",children:e.status.toUpperCase()})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Attempts:"}),(0,a.jsx)("p",{className:"font-medium",children:e.attempts})]}),e.lastAttemptAt&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Last Attempt:"}),(0,a.jsx)("p",{className:"font-medium",children:(0,h.format)(new Date(e.lastAttemptAt),"PPp")})]}),e.deliveryTimeMs&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Delivery Time:"}),(0,a.jsxs)("p",{className:"font-medium",children:[e.deliveryTimeMs,"ms"]})]}),e.responseCode&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Response Code:"}),(0,a.jsx)("p",{className:"font-medium",children:e.responseCode})]})]}),e.config?.url&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"URL:"}),(0,a.jsx)("p",{className:"font-medium font-mono text-xs break-all",children:e.config.url})]}),e.error&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-destructive/10 rounded",children:[(0,a.jsx)("span",{className:"text-destructive text-sm font-medium",children:"Error:"}),(0,a.jsx)("p",{className:"text-destructive text-sm mt-1",children:e.error})]}),e.responseData&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Response Data:"}),(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>l(JSON.stringify(e.responseData,null,2),"Response data"),children:(0,a.jsx)(P.default,{width:"12",height:"12"})})]}),(0,a.jsx)("pre",{className:"text-xs bg-muted p-2 rounded overflow-x-auto",children:JSON.stringify(e.responseData,null,2)})]})]})]},e.id))})]}),(0,a.jsx)(o.Separator,{})]}),!r&&j&&"failed"===j.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-3",children:"Failure Information"}),(0,a.jsxs)("div",{className:"p-4 bg-destructive/10 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(S.default,{width:"16",height:"16",className:"text-destructive"}),(0,a.jsx)("span",{className:"font-medium text-destructive",children:"Email Failed to Send"})]}),j.failureReason&&(0,a.jsx)("p",{className:"text-sm text-destructive",children:j.failureReason}),j.providerResponse&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-muted-foreground text-xs",children:"Provider Response:"}),(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>l(JSON.stringify(j.providerResponse,null,2),"Provider response"),children:(0,a.jsx)(P.default,{width:"12",height:"12"})})]}),(0,a.jsx)("pre",{className:"text-xs bg-muted p-2 rounded overflow-x-auto",children:JSON.stringify(j.providerResponse,null,2)})]})]})]}),(0,a.jsx)(o.Separator,{})]}),(0,a.jsx)("div",{className:"flex items-center gap-2 pt-4",children:(0,a.jsx)(d.Button,{variant:"secondary",size:"sm",asChild:!0,children:(0,a.jsxs)(u.default,{href:`/mail/${e.id}`,children:[(0,a.jsx)(p.default,{width:"14",height:"14",className:"mr-2"}),"View Email"]})})})]})})]})})}function z(){let[e,s]=(0,l.useState)(""),[t,c]=(0,l.useState)("all"),[m,x]=(0,l.useState)("all"),[o,f]=(0,l.useState)("all"),[p,A]=(0,l.useState)("7d"),[B,P]=(0,l.useState)(null),{data:F,isLoading:M,error:z,refetch:V}=(0,L.useUnifiedEmailLogsQuery)({searchQuery:e,statusFilter:t,typeFilter:m,domainFilter:o,timeRange:p,limit:100,offset:0});return z?(0,a.jsx)("div",{className:"min-h-screen p-4",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,a.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-xl p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,a.jsx)(w.default,{width:"16",height:"16"}),(0,a.jsx)("span",{children:z.message}),(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",onClick:()=>V(),className:"ml-auto text-destructive hover:text-destructive/80",children:"Try Again"})]})})})}):(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-foreground mb-1 tracking-tight",children:"Logs"}),(0,a.jsxs)("p",{className:"text-muted-foreground text-sm font-medium",children:[F?.stats.totalEmails||0," total logs found (",F?.stats.inbound||0," inbound, ",F?.stats.outbound||0," outbound)"]})]}),(0,a.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>V(),disabled:M,children:[(0,a.jsx)(N.default,{width:"14",height:"14",className:"mr-2"}),"Refresh"]})]})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,a.jsx)(b.default,{width:"16",height:"16",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(r.Input,{placeholder:"Search logs...",value:e,onChange:e=>s(e.target.value),className:"pl-10 h-9 rounded-xl"})]}),(0,a.jsxs)(n.Select,{value:m,onValueChange:x,children:[(0,a.jsx)(n.SelectTrigger,{className:"w-[120px] h-9 rounded-xl",children:(0,a.jsx)(n.SelectValue,{placeholder:"Type"})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"all",children:"All Types"}),(0,a.jsx)(n.SelectItem,{value:"inbound",children:"Inbound"}),(0,a.jsx)(n.SelectItem,{value:"outbound",children:"Outbound"})]})]}),(0,a.jsxs)(n.Select,{value:t,onValueChange:c,children:[(0,a.jsx)(n.SelectTrigger,{className:"w-[140px] h-9 rounded-xl",children:(0,a.jsx)(n.SelectValue,{placeholder:"Status"})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"all",children:"All Status"}),(0,a.jsx)(n.SelectItem,{value:"delivered",children:"Delivered"}),(0,a.jsx)(n.SelectItem,{value:"failed",children:"Failed"}),(0,a.jsx)(n.SelectItem,{value:"pending",children:"Pending"}),(0,a.jsx)(n.SelectItem,{value:"no_delivery",children:"No Delivery"}),(0,a.jsx)(n.SelectItem,{value:"parse_failed",children:"Parse Failed"})]})]}),(0,a.jsxs)(n.Select,{value:o,onValueChange:f,children:[(0,a.jsx)(n.SelectTrigger,{className:"w-[140px] h-9 rounded-xl",children:(0,a.jsx)(n.SelectValue,{placeholder:"Domain"})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"all",children:"All Domains"}),F?.filters.uniqueDomains.map(e=>(0,a.jsx)(n.SelectItem,{value:e,children:e},e))]})]}),(0,a.jsxs)(n.Select,{value:p,onValueChange:A,children:[(0,a.jsx)(n.SelectTrigger,{className:"w-[140px] h-9 rounded-xl",children:(0,a.jsx)(n.SelectValue,{placeholder:"Time Range"})}),(0,a.jsxs)(n.SelectContent,{children:[(0,a.jsx)(n.SelectItem,{value:"24h",children:"Last 24 hours"}),(0,a.jsx)(n.SelectItem,{value:"7d",children:"Last 7 days"}),(0,a.jsx)(n.SelectItem,{value:"30d",children:"Last 30 days"}),(0,a.jsx)(n.SelectItem,{value:"90d",children:"Last 90 days"})]})]}),(e||"all"!==t||"all"!==m||"all"!==o||"7d"!==p)&&(0,a.jsxs)(d.Button,{variant:"ghost",size:"sm",onClick:()=>{s(""),c("all"),x("all"),f("all"),A("7d")},className:"h-9",children:[(0,a.jsx)(v.default,{width:"14",height:"14",className:"mr-2"}),"Clear"]})]})}),F&&(0,a.jsx)("div",{className:"mb-6 bg-muted/30 rounded-xl p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-6 text-sm flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.default,{width:"14",height:"14",className:"text-purple-600"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Inbound:"}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:F.stats.inbound})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(D.default,{width:"14",height:"14",className:"text-blue-600"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Outbound:"}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:F.stats.outbound})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.default,{width:"14",height:"14",className:"text-green-600"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Delivered:"}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:F.stats.delivered})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S.default,{width:"14",height:"14",className:"text-destructive"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Failed:"}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:F.stats.failed})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(C.default,{width:"14",height:"14",className:"text-yellow-600"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Pending:"}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:F.stats.pending})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.default,{width:"14",height:"14",className:"text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"No Delivery:"}),(0,a.jsx)("span",{className:"font-medium text-foreground",children:F.stats.noDelivery})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(j.default,{width:"14",height:"14",className:"text-muted-foreground"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Avg Processing:"}),(0,a.jsxs)("span",{className:"font-medium text-foreground",children:[Math.round(F.stats.avgProcessingTime),"ms"]})]})]})})]}),(0,a.jsx)("div",{className:"w-full max-w-6xl mx-auto",children:M?(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsx)("div",{className:"text-muted-foreground",children:"Loading logs..."})}):F?.emails.length?(0,a.jsx)("div",{className:"divide-y divide-border",children:F.emails.map(e=>{let s="inbound"===e.type,t=s?e:null,l=s?null:e;return(0,a.jsxs)("div",{className:"flex items-center gap-4 px-6 py-3 hover:bg-muted/50 cursor-pointer transition-colors",onClick:()=>P(e),children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsxs)("div",{className:"relative",children:[H(e),(0,a.jsx)("div",{className:"absolute -top-1 -right-1",children:E(e)})]})}),(0,a.jsx)("div",{className:"flex-shrink-0 w-20 text-xs font-mono text-muted-foreground",children:(0,h.format)(new Date(e.createdAt),"HH:mm:ss")}),(0,a.jsx)("div",{className:"flex-shrink-0 w-48 truncate",children:(0,a.jsx)("span",{className:"text-sm font-medium",children:e.from})}),(0,a.jsx)("div",{className:"flex-shrink-0 w-48 truncate",children:s&&t?(0,a.jsx)("span",{className:"text-sm",children:t.recipient}):l&&(0,a.jsx)("span",{className:"text-sm",children:l.to.length>1?`${l.to[0]} +${l.to.length-1}`:l.to[0]})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm truncate",children:e.subject}),e.hasAttachments&&(0,a.jsx)(R.default,{width:"14",height:"14",className:"text-muted-foreground flex-shrink-0"})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground truncate",children:[e.domain," • ",s?"Inbound":"Outbound"]})]}),(0,a.jsx)("div",{className:"flex-shrink-0 text-right",children:s&&t?t.deliveries.length>0?(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("div",{className:"font-medium",children:t.deliveries[0].config?.name||"Unknown"}),(0,a.jsx)("div",{className:"text-muted-foreground",children:t.deliveries[0].responseCode?`${t.deliveries[0].responseCode}`:t.deliveries[0].error?"Error":t.deliveries[0].status})]}):(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"No delivery"}):l&&(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("div",{className:"font-medium capitalize",children:l.status}),(0,a.jsx)("div",{className:"text-muted-foreground uppercase",children:l.provider})]})}),(0,a.jsx)("div",{className:"flex-shrink-0 flex gap-1",children:s&&t&&(0,a.jsxs)(a.Fragment,{children:["PASS"===t.authResults.spf&&(0,a.jsx)(i.Badge,{variant:"outline",className:"text-xs px-1 py-0 h-5",children:"SPF"}),"PASS"===t.authResults.dkim&&(0,a.jsx)(i.Badge,{variant:"outline",className:"text-xs px-1 py-0 h-5",children:"DKIM"}),"FAIL"===t.authResults.spf&&(0,a.jsx)(i.Badge,{variant:"destructive",className:"text-xs px-1 py-0 h-5",children:"SPF✗"}),"FAIL"===t.authResults.dkim&&(0,a.jsx)(i.Badge,{variant:"destructive",className:"text-xs px-1 py-0 h-5",children:"DKIM✗"})]})}),(0,a.jsx)("div",{className:"flex-shrink-0 text-xs text-muted-foreground",children:s&&t?`${t.processingTimeMs}ms`:l?.sentAt?(0,h.format)(new Date(l.sentAt),"HH:mm"):"Pending"}),(0,a.jsx)(d.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 flex-shrink-0",asChild:!0,onClick:e=>e.stopPropagation(),children:(0,a.jsx)(u.default,{href:`/mail/${e.id}`,children:(0,a.jsx)(k.default,{width:"12",height:"12"})})})]},e.id)})}):(0,a.jsx)("div",{className:"max-w-6xl mx-auto p-4",children:(0,a.jsx)("div",{className:"bg-card border-border rounded-xl p-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(g.default,{width:"48",height:"48",className:"text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"No logs found"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e||"all"!==t||"all"!==m||"all"!==o||"7d"!==p?"Try adjusting your filters or search query.":"Start receiving or sending emails to see logs here."})]})})})}),(0,a.jsx)(O,{log:B,isOpen:!!B,onClose:()=>P(null)})]})}}}]);

//# sourceMappingURL=5cf18932ff7a8cea.js.map