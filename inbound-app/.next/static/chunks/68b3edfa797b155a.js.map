{"version":3,"sources":["turbopack:///[project]/components/autumn/pricing-table.tsx","turbopack:///[project]/components/autumn/pricing-table-format.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { createContext, useContext, useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Button } from \"@/components/ui/button\";\nimport Check2 from \"@/components/icons/check-2\";\nimport Loader from \"@/components/icons/loader\";\nimport { useSession } from \"@/lib/auth/auth-client\";\nimport Link from \"next/link\";\n\nexport interface Product {\n  id: string;\n  name: string;\n  description?: string;\n  everythingFrom?: string;\n\n  buttonText?: string;\n  buttonUrl?: string;\n\n  recommendedText?: string;\n\n  price: {\n    primaryText: string;\n    secondaryText?: string;\n  };\n\n  priceAnnual?: {\n    primaryText: string;\n    secondaryText?: string;\n  };\n\n  items: {\n    primaryText: string;\n    secondaryText?: string;\n  }[];\n}\n\nconst PricingTableContext = createContext<{\n  isAnnual: boolean;\n  setIsAnnual: (isAnnual: boolean) => void;\n  products: Product[];\n  showFeatures: boolean;\n  uniform: boolean;\n}>({\n  isAnnual: false,\n  setIsAnnual: () => {},\n  products: [],\n  showFeatures: true,\n  uniform: false,\n});\n\nexport const usePricingTableContext = (componentName: string) => {\n  const context = useContext(PricingTableContext);\n\n  if (context === undefined) {\n    throw new Error(`${componentName} must be used within <PricingTable />`);\n  }\n\n  return context;\n};\n\nexport const PricingTable = ({\n  children,\n  products,\n  showFeatures = true,\n  className,\n  uniform = false,\n}: {\n  children?: React.ReactNode;\n  products?: Product[];\n  showFeatures?: boolean;\n  className?: string;\n  uniform?: boolean;\n}) => {\n  const [isAnnual, setIsAnnual] = useState(false);\n  const session = useSession();\n\n  if (!products) {\n    throw new Error(\"products is required in <PricingTable />\");\n  }\n\n  if (products.length === 0) {\n    return <></>;\n  }\n  const hasEvenProducts = products.length % 2 === 0;\n\n  return (\n    <PricingTableContext.Provider\n      value={{ isAnnual, setIsAnnual, products, showFeatures, uniform }}\n    >\n      <div className={cn(\"flex items-center flex-col space-y-8\")}>\n        {products.some((p) => p.priceAnnual) && (\n          <div>\n            <AnnualSwitch isAnnual={isAnnual} setIsAnnual={setIsAnnual} />\n          </div>\n        )}\n        <div\n          className={cn(\n            \"w-full grid grid-cols-1 gap-6 max-w-6xl mx-auto\",\n            hasEvenProducts && \"sm:grid-cols-2\",\n            products.length >= 3 && \"lg:grid-cols-3\",\n            className\n          )}\n        >\n          {children}\n        </div>\n      </div>\n    </PricingTableContext.Provider>\n  );\n};\n\ninterface PricingCardProps {\n  productId: string;\n  showFeatures?: boolean;\n  className?: string;\n  onButtonClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  buttonProps?: React.ComponentProps<\"button\">;\n}\n\nexport const PricingCard = ({\n  productId,\n  className,\n  onButtonClick,\n  buttonProps,\n}: PricingCardProps) => {\n  const { isAnnual, products, showFeatures, uniform } =\n    usePricingTableContext(\"PricingCard\");\n  const { data: session } = useSession();\n  const product = products.find((p) => p.id === productId);\n\n  if (!product) {\n    throw new Error(`Product with id ${productId} not found`);\n  }\n\n  const {\n    name,\n    price,\n    priceAnnual,\n    recommendedText,\n    buttonText,\n    items,\n    description,\n    buttonUrl,\n    everythingFrom,\n  } = product;\n\n  const isRecommended = recommendedText ? true : false;\n\n  return (\n    <div\n      className={cn(\n        \"rounded-xl border bg-card text-card-foreground shadow relative flex flex-col h-full\",\n        isRecommended && \"border-primary shadow-lg scale-105 bg-primary/5\",\n        className\n      )}\n    >\n      {recommendedText && (\n        <RecommendedBadge recommended={recommendedText} />\n      )}\n      \n      <div className=\"flex flex-col h-full p-6\">\n        {/* Header */}\n        <div className=\"flex flex-col space-y-1.5 pb-4\">\n          <h2 className=\"text-2xl font-semibold leading-none tracking-tight\">{name}</h2>\n          {description && (\n            <p className=\"text-sm text-muted-foreground line-clamp-2\">\n              {description}\n            </p>\n          )}\n        </div>\n\n        {/* Price */}\n        {price.primaryText.toLowerCase() !== \"free\" ? (\n          <div className=\"border-t border-b py-4 mb-6\">\n            <div className=\"text-3xl font-bold\">\n              {isAnnual && priceAnnual\n                ? priceAnnual?.primaryText\n                : price.primaryText}\n            </div>\n            {price.secondaryText && (\n              <div className=\"text-sm text-muted-foreground mt-1\">\n                {isAnnual && priceAnnual\n                  ? priceAnnual?.secondaryText\n                  : price.secondaryText}\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"border-t py-4\">\n          </div>\n        )\n        }\n\n        {/* Features */}\n        {showFeatures && items.length > 0 && (\n          <div className=\"flex-grow mb-6\">\n            <PricingFeatureList\n              items={items}\n              showIcon={true}\n              everythingFrom={everythingFrom}\n            />\n          </div>\n        )}\n\n        {/* Button */}\n        {session ? (\n        <div className=\"mt-auto pt-4\">\n          <PricingCardButton\n            recommended={isRecommended}\n            onClick={onButtonClick}\n            buttonUrl={buttonUrl}\n            {...buttonProps}\n          >\n            {buttonText}\n          </PricingCardButton>\n        </div>\n        ) : (\n          <div className=\"mt-auto pt-4\">\n            <Link href=\"/login\">\n              <Button variant=\"primary\" className=\"w-full\">\n                Login to get started\n              </Button>\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\n// Pricing Feature List\nexport const PricingFeatureList = ({\n  items,\n  showIcon = true,\n  everythingFrom,\n  className,\n}: {\n  items: {\n    primaryText: string;\n    secondaryText?: string;\n  }[];\n  showIcon?: boolean;\n  everythingFrom?: string;\n  className?: string;\n}) => {\n  return (\n    <div className={cn(\"space-y-3\", className)}>\n      {everythingFrom && (\n        <p className=\"text-sm text-muted-foreground mb-4\">Everything from {everythingFrom}, plus:</p>\n      )}\n      {items.map((item, index) => (\n        <div key={index} className=\"flex items-start gap-3 text-sm\">\n          {showIcon && (\n            <Check2 className=\"h-4 w-4 text-primary flex-shrink-0 mt-0.5\" />\n          )}\n          <div className=\"flex flex-col\">\n            <span className=\"text-card-foreground\">{item.primaryText}</span>\n            {item.secondaryText && (\n              <span className=\"text-xs text-muted-foreground mt-1\">\n                {item.secondaryText}\n              </span>\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\n// Pricing Card Button\nexport interface PricingCardButtonProps extends React.ComponentProps<\"button\"> {\n  recommended?: boolean;\n  buttonUrl?: string;\n}\n\nexport const PricingCardButton = React.forwardRef<\n  HTMLButtonElement,\n  PricingCardButtonProps\n>(({ recommended, children, buttonUrl, onClick, className, ...props }, ref) => {\n  const [loading, setLoading] = useState(false);\n  return (\n    <Button\n      className={cn(\n        \"w-full\",\n        className\n      )}\n      variant={recommended ? \"primary\" : \"secondary\"}\n      size=\"lg\"\n      ref={ref}\n      disabled={loading}\n      onClick={async (e) => {\n        setLoading(true);\n        try {\n          if (onClick) {\n            await onClick(e);\n            return;\n          }\n\n          if (buttonUrl) {\n            window.open(buttonUrl, \"_blank\");\n            return;\n          }\n        } catch (error) {\n          throw error;\n        } finally {\n          setLoading(false);\n        }\n      }}\n      {...props}\n    >\n      {loading ? (\n        <Loader className=\"h-4 w-4 animate-spin\" />\n      ) : (\n        children\n      )}\n    </Button>\n  );\n});\nPricingCardButton.displayName = \"PricingCardButton\";\n\n// Annual Switch\nexport const AnnualSwitch = ({\n  isAnnual,\n  setIsAnnual,\n}: {\n  isAnnual: boolean;\n  setIsAnnual: (isAnnual: boolean) => void;\n}) => {\n  return (\n    <div className=\"flex items-center justify-center space-x-3 p-4 rounded-xl border bg-card\">\n      <span className={cn(\"text-sm font-medium\", !isAnnual ? \"text-card-foreground\" : \"text-muted-foreground\")}>\n        Monthly\n      </span>\n      <Switch\n        id=\"annual-billing\"\n        checked={isAnnual}\n        onCheckedChange={setIsAnnual}\n      />\n      <span className={cn(\"text-sm font-medium\", isAnnual ? \"text-card-foreground\" : \"text-muted-foreground\")}>\n        Annual\n      </span>\n      {isAnnual && (\n        <span className=\"text-xs bg-primary text-primary-foreground px-2 py-1 rounded-full font-medium\">\n          Save 20%\n        </span>\n      )}\n    </div>\n  );\n};\n\nexport const RecommendedBadge = ({ recommended }: { recommended: string }) => {\n  return (\n    <div className=\"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-primary text-primary-foreground text-sm font-medium px-3 py-1 rounded-full border\">\n      {recommended}\n    </div>\n  );\n};\n","\"use client\"\n\nimport {\n  PricingCard,\n  PricingTable as PricecnPricingTable,\n} from \"@/components/autumn/pricing-table\";\nimport Loader from \"@/components/icons/loader\";\n\nimport { useAutumn, usePricingTable } from \"autumn-js/react\";\nimport ProductChangeDialog from \"./product-change-dialog\";\n\nexport const PricingTable = () => {\n  const { attach } = useAutumn();\n  const { products, isLoading, error } = usePricingTable();\n\n  if (isLoading) {\n    return (\n      <div className=\"w-full h-full flex justify-center items-center min-h-[300px]\">\n        <Loader className=\"w-6 h-6 text-zinc-400 animate-spin\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return <div> Something went wrong...</div>;\n  }\n\n  return (\n    <div>\n      {products && (\n        <PricecnPricingTable products={products}>\n          {products.map((product) => (\n            <PricingCard\n              productId={product.id}\n              key={product.id}\n              buttonProps={{\n                onClick: async () => {\n                  await attach({\n                    productId: product.id,\n                    successUrl: `${process.env.NEXT_PUBLIC_BETTER_AUTH_URL}/settings?upgrade=true`,\n                    dialog: ProductChangeDialog,\n                  });\n                },\n              }}\n            />\n          ))}\n        </PricecnPricingTable>\n      )}\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}