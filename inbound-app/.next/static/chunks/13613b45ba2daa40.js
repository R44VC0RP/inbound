(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{268571:e=>{"use strict";var{g:t,__dirname:s}=e;{e.s({domainsApi:()=>t});var a=e.i(792912);let t={getDomainStats:async()=>{let e=await (0,a.getDomainStats)();if("error"in e)throw Error(e.error||"Failed to fetch domain statistics");return e},getDomainDetails:async e=>{let t=await fetch(`/api/domain/${e}`);if(!t.ok){if(404===t.status)throw Error("Domain not found");throw Error("Failed to fetch domain details")}return t.json()},verifyDomain:async e=>{let t=await fetch(`/api/domain/${e}/verify`,{method:"POST"});if(!t.ok)throw Error("Failed to verify domain");return t.json()}}}},555193:e=>{"use strict";var{g:t,__dirname:s}=e;{e.s({domainKeys:()=>t,useDomainDetailsQuery:()=>n,useDomainVerifyMutation:()=>d,useDomainsStatsQuery:()=>s});var a=e.i(645643),r=e.i(659544),i=e.i(628662),l=e.i(268571);let t={all:["domains"],stats:()=>[...t.all,"stats"],details:()=>[...t.all,"details"],detail:e=>[...t.details(),e]},s=()=>(0,a.useQuery)({queryKey:t.stats(),queryFn:l.domainsApi.getDomainStats}),n=e=>(0,a.useQuery)({queryKey:t.detail(e),queryFn:()=>l.domainsApi.getDomainDetails(e),enabled:!!e}),d=()=>{let e=(0,i.useQueryClient)();return(0,r.useMutation)({mutationFn:l.domainsApi.verifyDomain,onSuccess:(s,a)=>{e.invalidateQueries({queryKey:t.stats()}),e.invalidateQueries({queryKey:t.detail(a)})}})}}},189944:e=>{"use strict";var{g:t,__dirname:s}=e;{e.s({WEBHOOK_FORMAT_CONFIGS:()=>t,generateRealPayload:()=>i,generateTestPayload:()=>r,getWebhookFormatConfig:()=>a});let t={inbound:{name:"Inbound Webhook",description:"Standard Inbound email webhook format with full email data",testPayload:e=>({event:"webhook_test",timestamp:e.timestamp,messageId:e.messageId,source:e.from,destination:e.to,subject:e.subject,body:{text:e.textBody||"This is a test email from the Inbound Email service to verify webhook functionality.",html:e.htmlBody||"<p>This is a test email from the <strong>Inbound Email service</strong> to verify webhook functionality.</p>"},attachments:e.attachments||[],headers:e.headers||{},test:!0}),realPayload:e=>({event:"email_received",timestamp:e.timestamp,messageId:e.messageId,source:e.from,destination:e.to,subject:e.subject,body:{text:e.textBody,html:e.htmlBody},attachments:e.attachments||[],headers:e.headers||{}})},discord:{name:"Discord Webhook",description:"Discord-compatible webhook format with rich embeds",testPayload:e=>({content:`ðŸ“§ **Test Email Received**`,embeds:[{title:e.subject||"Test Email - Inbound Email Service",description:e.textBody||"This is a test email from the Inbound Email service to verify webhook functionality.",color:65280,timestamp:e.timestamp,footer:{text:"Inbound Email Service - Test",icon_url:"https://inbound.new/favicon.ico"},fields:[{name:"From",value:e.from||"test@example.com",inline:!0},{name:"To",value:e.to.join(", ")||e.recipient,inline:!0},{name:"Message ID",value:`\`${e.messageId}\``,inline:!1}]}]}),realPayload:e=>({content:`ðŸ“§ **New Email Received**`,embeds:[{title:e.subject||"No Subject",description:e.textBody?e.textBody.length>2e3?e.textBody.substring(0,2e3)+"...":e.textBody:"No content",color:39423,timestamp:e.timestamp,footer:{text:"Inbound Email Service",icon_url:"https://inbound.new/favicon.ico"},fields:[{name:"From",value:e.from,inline:!0},{name:"To",value:e.to.join(", "),inline:!0},...e.attachments&&e.attachments.length>0?[{name:"Attachments",value:e.attachments.map(e=>e.filename||"Unknown").join(", "),inline:!1}]:[],{name:"Message ID",value:`\`${e.messageId}\``,inline:!1}]}]})},slack:{name:"Slack Webhook",description:"Slack-compatible webhook format with attachments",testPayload:e=>({text:`ðŸ“§ *Test Email Received*`,username:"Inbound Email",icon_url:"https://inbound.new/favicon.ico",attachments:[{fallback:`Test email: ${e.subject}`,color:"good",title:e.subject||"Test Email - Inbound Email Service",text:e.textBody||"This is a test email from the Inbound Email service to verify webhook functionality.",fields:[{title:"From",value:e.from||"test@example.com",short:!0},{title:"To",value:e.to.join(", ")||e.recipient,short:!0},{title:"Message ID",value:e.messageId,short:!1}],footer:"Inbound Email Service - Test",ts:Math.floor(new Date(e.timestamp).getTime()/1e3)}]}),realPayload:e=>({text:`ðŸ“§ *New Email Received*`,username:"Inbound Email",icon_url:"https://inbound.new/favicon.ico",attachments:[{fallback:`New email: ${e.subject}`,color:"#0099ff",title:e.subject||"No Subject",text:e.textBody?e.textBody.length>1e3?e.textBody.substring(0,1e3)+"...":e.textBody:"No content",fields:[{title:"From",value:e.from,short:!0},{title:"To",value:e.to.join(", "),short:!0},...e.attachments&&e.attachments.length>0?[{title:"Attachments",value:e.attachments.map(e=>e.filename||"Unknown").join(", "),short:!1}]:[],{title:"Message ID",value:e.messageId,short:!1}],footer:"Inbound Email Service",ts:Math.floor(new Date(e.timestamp).getTime()/1e3)}]})}};function a(e){return t[e]}function r(e,s){let a=t[e],r={...{messageId:`test-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:"test@example.com",to:["test@yourdomain.com"],subject:"Test Email - Inbound Email Service",textBody:"This is a test email from the Inbound Email service to verify webhook functionality.",htmlBody:"<p>This is a test email from the <strong>Inbound Email service</strong> to verify webhook functionality.</p>",attachments:[],headers:{From:"test@example.com",To:"test@yourdomain.com",Subject:"Test Email - Inbound Email Service",Date:new Date().toISOString()},timestamp:new Date().toISOString(),recipient:"test@yourdomain.com"},...s};return a.testPayload(r)}function i(e,s){return t[e].realPayload(s)}}},154659:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({EndpointTypeSelector:()=>d});var a=e.i(731636),r=e.i(280783),i=e.i(451081),l=e.i(135673),n=e.i(921361);function d({selectedType:e,onTypeSelect:t,disabled:s=!1}){let d=[{type:"webhook",icon:r.default,title:"Webhook",description:"Send HTTP requests to your application",color:"purple"},{type:"email",icon:i.default,title:"Email Forward",description:"Forward emails to a single recipient",color:"blue"},{type:"email_group",icon:l.default,title:"Email Group",description:"Forward emails to multiple recipients",color:"green"}],o=(e,t)=>({purple:{border:t?"border-purple-500":"border-border",bg:t?"bg-purple-50 dark:bg-purple-900/20":"bg-card",icon:t?"text-purple-600 dark:text-purple-400":"text-muted-foreground",title:t?"text-purple-900 dark:text-purple-100":"text-foreground",desc:t?"text-purple-700 dark:text-purple-300":"text-muted-foreground"},blue:{border:t?"border-blue-500":"border-border",bg:t?"bg-blue-50 dark:bg-blue-900/20":"bg-card",icon:t?"text-blue-600 dark:text-blue-400":"text-muted-foreground",title:t?"text-blue-900 dark:text-blue-100":"text-foreground",desc:t?"text-blue-700 dark:text-blue-300":"text-muted-foreground"},green:{border:t?"border-green-500":"border-border",bg:t?"bg-green-50 dark:bg-green-900/20":"bg-card",icon:t?"text-green-600 dark:text-green-400":"text-muted-foreground",title:t?"text-green-900 dark:text-green-100":"text-foreground",desc:t?"text-green-700 dark:text-green-300":"text-muted-foreground"}})[e];return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-foreground",children:"Endpoint Type"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Choose how you want to receive emails"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3",children:d.map(r=>{let i=e===r.type,l=o(r.color,i),d=r.icon;return(0,a.jsx)(n.Card,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${l.border} ${l.bg} ${s?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!s&&t(r.type),children:(0,a.jsx)(n.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:`flex items-center justify-center w-10 h-10 rounded-lg ${i?`bg-${r.color}-100 dark:bg-${r.color}-900/30`:"bg-muted"}`,children:(0,a.jsx)(d,{width:"20",height:"20",className:l.icon})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h5",{className:`text-sm font-semibold ${l.title}`,children:r.title}),(0,a.jsx)("p",{className:`text-xs mt-1 ${l.desc}`,children:r.description})]}),i&&(0,a.jsx)("div",{className:`w-4 h-4 rounded-full bg-${r.color}-500 flex items-center justify-center`,children:(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-white dark:bg-gray-900"})})]})})},r.type)})})]})}},943034:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({CreateEndpointDialog:()=>k});var a=e.i(731636),r=e.i(838653);e.i(486973);var i=e.i(706563),l=e.i(555193),n=e.i(189944),d=e.i(611206),o=e.i(834953),c=e.i(330790),m=e.i(268628),u=e.i(706650),h=e.i(210339),x=e.i(913948),p=e.i(242148),g=e.i(902273),f=e.i(280783),j=e.i(451081),b=e.i(135673),v=e.i(862421),y=e.i(870517),w=e.i(55496),N=e.i(154659);function k({open:e,onOpenChange:t}){let[s,k]=(0,r.useState)("type"),[C,S]=(0,r.useState)(null),[E,T]=(0,r.useState)({name:"",description:""}),[A,D]=(0,r.useState)("inbound"),[F,I]=(0,r.useState)({url:"",timeout:30,retryAttempts:3,headers:{}}),[P,$]=(0,r.useState)(""),[B,L]=(0,r.useState)(""),[O,_]=(0,r.useState)({forwardTo:"",includeAttachments:!0,subjectPrefix:""}),[M,R]=(0,r.useState)({emails:[],includeAttachments:!0,subjectPrefix:""}),[z,K]=(0,r.useState)(""),[W,q]=(0,r.useState)({}),H=(0,i.useCreateEndpointMutation)(),{data:U}=(0,l.useDomainsStatsQuery)();U?.domains?.filter(e=>e.isVerified),(0,r.useEffect)(()=>{let t=e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),"config"===s&&!H.isPending&&C&&G()?Y(e):V()&&Q())};return e&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[e,s,H.isPending,C,E,F,O,M]);let G=()=>{let e={};if("type"!==s||C||(e.type="Please select an endpoint type"),"basic"===s&&(E.name.trim()||(e.name="Name is required"),"email"===C&&(O.forwardTo.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.forwardTo)||(e.forwardTo="Please enter a valid email address"):e.forwardTo="Forward to email is required")),"config"===s&&C){if("webhook"===C){if(F.url.trim())try{new URL(F.url)}catch{e.url="Please enter a valid URL"}else e.url="URL is required";F.timeout&&(F.timeout<1||F.timeout>300)&&(e.timeout="Timeout must be between 1 and 300 seconds"),F.retryAttempts&&(F.retryAttempts<0||F.retryAttempts>10)&&(e.retryAttempts="Retry attempts must be between 0 and 10")}"email"===C&&(O.forwardTo.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.forwardTo)||(e.forwardTo="Please enter a valid email address"):e.forwardTo="Forward to email is required"),"email_group"===C&&0===M.emails.length&&(e.emails="At least one email address is required")}return q(e),0===Object.keys(e).length},V=()=>{if("type"===s)return null!==C;if("basic"===s){let e=""!==E.name.trim();if("email"===C){let t=""!==O.forwardTo.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.forwardTo);return e&&t}return e}return!1},Q=()=>{G()&&("type"===s?k("basic"):"basic"===s&&k("config"))},Y=async e=>{let t;if(e.preventDefault(),!C||!G())return;switch(C){case"webhook":t=F;break;case"email":t=O;break;case"email_group":t=M;break;default:return}let s={name:E.name,type:C,webhookFormat:"webhook"===C?A:void 0,description:E.description||void 0,config:t};try{await H.mutateAsync(s),w.toast.success("Endpoint created successfully!"),J()}catch(e){w.toast.error(e instanceof Error?e.message:"Failed to create endpoint")}},J=()=>{k("type"),S(null),T({name:"",description:""}),D("inbound"),I({url:"",timeout:30,retryAttempts:3,headers:{}}),_({forwardTo:"",includeAttachments:!0,subjectPrefix:""}),R({emails:[],includeAttachments:!0,subjectPrefix:""}),$(""),L(""),K(""),q({}),t(!1)},X=()=>{P.trim()&&B.trim()&&(I(e=>({...e,headers:{...e.headers,[P.trim()]:B.trim()}})),$(""),L(""))},Z=e=>{I(t=>{let s={...t.headers};return delete s[e],{...t,headers:s}})},ee=()=>{z.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z.trim())&&!M.emails.includes(z.trim())&&(R(e=>({...e,emails:[...e.emails,z.trim()]})),K(""))},et=e=>{R(t=>({...t,emails:t.emails.filter(t=>t!==e)}))},{icon:es,variant:ea}=(()=>{switch(C){case"webhook":return{icon:f.default,variant:"webhook"};case"email":return{icon:j.default,variant:"email"};case"email_group":return{icon:b.default,variant:"email_group"};default:return{icon:p.default,variant:"default"}}})();return(0,a.jsx)(d.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(d.DialogContent,{className:"sm:max-w-lg",children:[(0,a.jsx)(d.DialogHeader,{children:(0,a.jsxs)(d.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:`flex items-center justify-center w-8 h-8 rounded-full ${"webhook"===ea?"bg-purple-100 dark:bg-purple-900/20":"email"===ea?"bg-blue-100 dark:bg-blue-900/20":"email_group"===ea?"bg-green-100 dark:bg-green-900/20":"bg-muted"}`,children:(0,a.jsx)(es,{className:`h-4 w-4 ${"webhook"===ea?"text-purple-600 dark:text-purple-400":"email"===ea?"text-blue-600 dark:text-blue-400":"email_group"===ea?"text-green-600 dark:text-green-400":"text-muted-foreground"}`})}),(()=>{switch(s){case"type":return"Choose Endpoint Type";case"basic":return"email"===C?"Email Forward Setup":"Basic Information";case"config":return"email"===C?"Review & Create":`Configure ${"webhook"===C?"Webhook":"Email Group"}`;default:return"Create New Endpoint"}})()]})}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[(0,a.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ${"type"===s?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"1"}),(0,a.jsx)("div",{className:`w-8 h-1 ${"type"!==s?"bg-primary":"bg-muted"}`}),(0,a.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ${"basic"===s?"bg-primary text-primary-foreground":"config"===s?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:"2"}),(0,a.jsx)("div",{className:`w-8 h-1 ${"config"===s?"bg-primary":"bg-muted"}`}),(0,a.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ${"config"===s?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"3"})]}),(0,a.jsxs)("form",{id:"endpoint-form",onSubmit:Y,className:"min-h-[300px]",children:["type"===s&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(N.EndpointTypeSelector,{selectedType:C,onTypeSelect:S}),W.type&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:W.type})]}),"basic"===s&&(0,a.jsxs)("div",{className:"space-y-4",children:["email"===C&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"forwardToBasic",children:"Forward To Email *"}),(0,a.jsx)(c.Input,{id:"forwardToBasic",type:"email",value:O.forwardTo,onChange:e=>{let t=e.target.value;_(e=>({...e,forwardTo:t})),E.name.trim()&&E.name!==O.forwardTo||T(e=>({...e,name:t}))},placeholder:"support@yourcompany.com",className:W.forwardTo?"border-red-500":"",autoFocus:!0}),W.forwardTo&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:W.forwardTo})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"name",children:"Name *"}),(0,a.jsx)(c.Input,{id:"name",value:E.name,onChange:e=>T(t=>({...t,name:e.target.value})),placeholder:`${"webhook"===C?"Production Webhook":"email"===C?"Auto-filled from email above":"Team Email Group"}`,className:W.name?"border-red-500":"",autoFocus:"email"!==C}),W.name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:W.name})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"description",children:"Description"}),(0,a.jsx)(u.Textarea,{id:"description",value:E.description,onChange:e=>T(t=>({...t,description:e.target.value})),placeholder:"Optional description of this endpoint's purpose",rows:3})]}),"email"===C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"subjectPrefixBasic",children:"Subject Prefix"}),(0,a.jsx)(c.Input,{id:"subjectPrefixBasic",value:O.subjectPrefix,onChange:e=>_(t=>({...t,subjectPrefix:e.target.value})),placeholder:"[Forwarded] "}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Optional prefix to add to forwarded email subjects"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Label,{className:"text-sm font-medium",children:"Include Attachments"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Forward email attachments"})]}),(0,a.jsx)(x.Switch,{checked:O.includeAttachments,onCheckedChange:e=>_(t=>({...t,includeAttachments:e}))})]})]})]}),"config"===s&&C&&(0,a.jsxs)("div",{className:"space-y-4",children:["webhook"===C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"url",children:"URL *"}),(0,a.jsx)(c.Input,{id:"url",type:"url",value:F.url,onChange:e=>I(t=>({...t,url:e.target.value})),placeholder:"https://your-app.com/webhooks/inbound",className:W.url?"border-red-500":"",autoFocus:!0}),W.url&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:W.url})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(m.Label,{children:"Webhook Format"}),(0,a.jsx)("div",{className:"grid gap-3",children:Object.entries(n.WEBHOOK_FORMAT_CONFIGS).map(([e,t])=>{let s="slack"===e;return(0,a.jsx)("div",{className:`relative rounded-lg border p-4 transition-all ${s?"border-border bg-muted cursor-not-allowed opacity-60":A===e?"border-primary bg-primary/5 ring-1 ring-primary cursor-pointer":"border-border hover:border-border/80 cursor-pointer"}`,onClick:()=>!s&&D(e),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:`mt-0.5 h-4 w-4 rounded-full border-2 transition-colors ${s?"border-muted-foreground bg-muted":A===e?"border-primary bg-primary":"border-muted-foreground"}`,children:A===e&&!s&&(0,a.jsx)("div",{className:"h-full w-full rounded-full bg-background scale-50"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-foreground",children:t.name}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:t.description}),"discord"===e&&(0,a.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:"Perfect for Discord channels with rich embeds"}),"slack"===e&&(0,a.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:"Coming soon - Slack-compatible format"})]})]})},e)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"timeout",children:"Timeout (seconds)"}),(0,a.jsx)(c.Input,{id:"timeout",type:"number",min:"1",max:"300",value:F.timeout||"",onChange:e=>I(t=>({...t,timeout:parseInt(e.target.value)||30})),className:W.timeout?"border-red-500":""}),W.timeout&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:W.timeout})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"retryAttempts",children:"Retry Attempts"}),(0,a.jsx)(c.Input,{id:"retryAttempts",type:"number",min:"0",max:"10",value:F.retryAttempts||"",onChange:e=>I(t=>({...t,retryAttempts:parseInt(e.target.value)||3})),className:W.retryAttempts?"border-red-500":""}),W.retryAttempts&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:W.retryAttempts})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"Custom Headers (Optional)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.Input,{placeholder:"Header name",value:P,onChange:e=>$(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),X())}),(0,a.jsx)(c.Input,{placeholder:"Header value",value:B,onChange:e=>L(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),X())}),(0,a.jsx)(o.Button,{type:"button",variant:"secondary",size:"sm",onClick:X,disabled:!P.trim()||!B.trim(),children:(0,a.jsx)(p.default,{className:"h-4 w-4"})})]}),Object.entries(F.headers||{}).length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:Object.entries(F.headers||{}).map(([e,t])=>(0,a.jsxs)(h.Badge,{variant:"secondary",className:"text-xs",children:[e,": ",t,(0,a.jsx)("button",{type:"button",onClick:()=>Z(e),className:"ml-1 hover:text-red-500",children:(0,a.jsx)(g.default,{className:"h-3 w-3"})})]},e))})]})]}),"email"===C&&(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900/20 mx-auto mb-4",children:(0,a.jsx)(j.default,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Email Forward Ready"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Your email forward is configured and ready to create."}),(0,a.jsx)("div",{className:"bg-muted rounded-lg p-4 text-left",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Forward to:"}),(0,a.jsx)("span",{className:"text-sm font-mono",children:O.forwardTo})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Name:"}),(0,a.jsx)("span",{className:"text-sm",children:E.name})]}),E.description&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Description:"}),(0,a.jsx)("span",{className:"text-sm",children:E.description})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Include attachments:"}),(0,a.jsx)("span",{className:"text-sm",children:O.includeAttachments?"Yes":"No"})]}),O.subjectPrefix&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Subject prefix:"}),(0,a.jsx)("span",{className:"text-sm font-mono",children:O.subjectPrefix})]})]})})]}),"email_group"===C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"Email Recipients *"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.Input,{placeholder:"recipient@example.com",value:z,onChange:e=>K(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),ee()),autoFocus:!0}),(0,a.jsx)(o.Button,{type:"button",variant:"secondary",size:"sm",onClick:ee,disabled:!z.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z.trim()),children:(0,a.jsx)(p.default,{className:"h-4 w-4"})})]}),M.emails.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:M.emails.map(e=>(0,a.jsxs)(h.Badge,{variant:"secondary",className:"text-xs",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>et(e),className:"ml-1 hover:text-red-500",children:(0,a.jsx)(g.default,{className:"h-3 w-3"})})]},e))}),W.emails&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:W.emails})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"subjectPrefix",children:"Subject Prefix"}),(0,a.jsx)(c.Input,{id:"subjectPrefix",value:M.subjectPrefix,onChange:e=>R(t=>({...t,subjectPrefix:e.target.value})),placeholder:"[Forwarded] "}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Optional prefix to add to forwarded email subjects"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Label,{className:"text-sm font-medium",children:"Include Attachments"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Forward email attachments"})]}),(0,a.jsx)(x.Switch,{checked:M.includeAttachments,onCheckedChange:e=>R(t=>({...t,includeAttachments:e}))})]})]})]})]}),(0,a.jsxs)(d.DialogFooter,{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:"type"!==s&&(0,a.jsxs)(o.Button,{variant:"secondary",onClick:()=>{"config"===s?k("basic"):"basic"===s&&k("type")},tabIndex:0,children:[(0,a.jsx)(v.default,{className:"h-4 w-4 mr-1"}),"Previous"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Button,{variant:"secondary",onClick:J,tabIndex:0,children:"Cancel"}),"config"===s?(0,a.jsx)(o.Button,{type:"submit",form:"endpoint-form",onClick:Y,disabled:H.isPending||!C,variant:"primary",tabIndex:0,children:H.isPending?"Creating...":"Create Endpoint"}):(0,a.jsxs)(o.Button,{onClick:Q,disabled:!V(),tabIndex:0,children:["Next",(0,a.jsx)(y.default,{className:"h-4 w-4 ml-1"})]})]})]})]})})}},134581:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({EditEndpointDialog:()=>N});var a=e.i(731636),r=e.i(838653);e.i(486973);var i=e.i(577526),l=e.i(555193),n=e.i(189944),d=e.i(611206),o=e.i(834953),c=e.i(330790),m=e.i(268628),u=e.i(706650),h=e.i(210339),x=e.i(974294),p=e.i(913948),g=e.i(773930),f=e.i(902273),j=e.i(242148),b=e.i(280783),v=e.i(451081),y=e.i(135673),w=e.i(55496);function N({open:e,onOpenChange:t,endpoint:s}){let[N,k]=(0,r.useState)({name:"",description:"",isActive:!0}),[C,S]=(0,r.useState)("inbound"),[E,T]=(0,r.useState)({url:"",timeout:30,retryAttempts:3,headers:{}}),[A,D]=(0,r.useState)(""),[F,I]=(0,r.useState)(""),[P,$]=(0,r.useState)({forwardTo:"",includeAttachments:!0,subjectPrefix:"",fromAddress:""}),[B,L]=(0,r.useState)({emails:[],includeAttachments:!0,subjectPrefix:"",fromAddress:""}),[O,_]=(0,r.useState)(""),[M,R]=(0,r.useState)({}),z=(0,i.useUpdateEndpointMutation)(),{data:K}=(0,l.useDomainsStatsQuery)(),W=K?.domains?.filter(e=>e.isVerified)||[];(0,r.useEffect)(()=>{let t=e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),!z.isPending&&s&&q()&&H(e))};return e&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[e,z.isPending,s,N,E,P,B]),(0,r.useEffect)(()=>{if(s&&e){k({name:s.name,description:s.description||"",isActive:s.isActive??!0}),"webhook"===s.type&&S(s.webhookFormat||"inbound");let e={};if(s.config)try{e=JSON.parse(s.config)}catch(t){console.error("Failed to parse endpoint config:",t),e={}}"webhook"===s.type?T({url:e.url||"",timeout:e.timeout||30,retryAttempts:e.retryAttempts||3,headers:e.headers||{}}):"email"===s.type?$({forwardTo:e.forwardTo||"",includeAttachments:e.includeAttachments??!0,subjectPrefix:e.subjectPrefix||"",fromAddress:e.fromAddress||""}):"email_group"===s.type&&L({emails:e.emails||[],includeAttachments:e.includeAttachments??!0,subjectPrefix:e.subjectPrefix||"",fromAddress:e.fromAddress||""}),R({})}},[s,e]);let q=()=>{let e={};if(N.name?.trim()||(e.name="Name is required"),!s)return R(e),!1;if("webhook"===s.type){if(E.url.trim())try{new URL(E.url)}catch{e.url="Please enter a valid URL"}else e.url="URL is required";E.timeout&&(E.timeout<1||E.timeout>300)&&(e.timeout="Timeout must be between 1 and 300 seconds"),E.retryAttempts&&(E.retryAttempts<0||E.retryAttempts>10)&&(e.retryAttempts="Retry attempts must be between 0 and 10")}return"email"===s.type&&(P.forwardTo.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P.forwardTo)||(e.forwardTo="Please enter a valid email address"):e.forwardTo="Forward to email is required"),"email_group"===s.type&&0===B.emails.length&&(e.emails="At least one email address is required"),R(e),0===Object.keys(e).length},H=async e=>{let t;if(e.preventDefault(),!s||!q())return;switch(s.type){case"webhook":t=E;break;case"email":t=P;break;case"email_group":t=B;break;default:return}let a={...N,webhookFormat:"webhook"===s.type?C:void 0,config:t};try{await z.mutateAsync({id:s.id,data:a}),w.toast.success("Endpoint updated successfully!"),U()}catch(e){w.toast.error(e instanceof Error?e.message:"Failed to update endpoint")}},U=()=>{D(""),I(""),_(""),R({}),t(!1)},G=()=>{A.trim()&&F.trim()&&(T(e=>({...e,headers:{...e.headers,[A.trim()]:F.trim()}})),D(""),I(""))},V=e=>{T(t=>{let s={...t.headers};return delete s[e],{...t,headers:s}})},Q=()=>{O.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.trim())&&!B.emails.includes(O.trim())&&(L(e=>({...e,emails:[...e.emails,O.trim()]})),_(""))},Y=e=>{L(t=>({...t,emails:t.emails.filter(t=>t!==e)}))};if(!s)return null;let{icon:J,color:X}=(()=>{switch(s?.type){case"webhook":return{icon:b.default,color:"purple"};case"email":return{icon:v.default,color:"blue"};case"email_group":return{icon:y.default,color:"green"};default:return{icon:g.default,color:"gray"}}})();return(0,a.jsx)(d.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(d.DialogContent,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(d.DialogHeader,{children:(0,a.jsxs)(d.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-muted",children:(0,a.jsx)(J,{className:"h-4 w-4 text-muted-foreground"})}),"Edit Endpoint"]})}),(0,a.jsxs)("form",{onSubmit:H,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.Label,{className:"text-sm font-medium",children:"Status"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable or disable this endpoint"})]}),(0,a.jsx)(p.Switch,{checked:N.isActive,onCheckedChange:e=>k(t=>({...t,isActive:e}))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-foreground border-b border-border pb-2",children:"Basic Information"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"name",children:"Name *"}),(0,a.jsx)(c.Input,{id:"name",value:N.name||"",onChange:e=>k(t=>({...t,name:e.target.value})),placeholder:`${"webhook"===s.type?"Production Webhook":"email"===s.type?"Support Email Forward":"Team Email Group"}`,className:M.name?"border-red-500":""}),M.name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:M.name})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"description",children:"Description"}),(0,a.jsx)(u.Textarea,{id:"description",value:N.description||"",onChange:e=>k(t=>({...t,description:e.target.value})),placeholder:"Optional description of this endpoint's purpose",rows:3})]}),"webhook"===s.type&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"url",children:"URL *"}),(0,a.jsx)(c.Input,{id:"url",type:"url",value:E.url||"",onChange:e=>T(t=>({...t,url:e.target.value})),placeholder:"https://your-app.com/webhooks/inbound",className:M.url?"border-red-500":""}),M.url&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:M.url})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-foreground border-b border-border pb-2",children:"Configuration"}),"webhook"===s.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(m.Label,{children:"Webhook Format"}),(0,a.jsx)("div",{className:"grid gap-3",children:Object.entries(n.WEBHOOK_FORMAT_CONFIGS).map(([e,t])=>{let s="slack"===e;return(0,a.jsx)("div",{className:`relative rounded-lg border p-4 transition-all ${s?"border-border bg-muted cursor-not-allowed opacity-60":C===e?"border-primary bg-accent ring-1 ring-primary cursor-pointer":"border-border hover:border-muted-foreground cursor-pointer"}`,onClick:()=>!s&&S(e),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:`mt-0.5 h-4 w-4 rounded-full border-2 transition-colors ${s?"border-muted-foreground bg-muted":C===e?"border-primary bg-primary":"border-muted-foreground"}`,children:C===e&&!s&&(0,a.jsx)("div",{className:"h-full w-full rounded-full bg-white scale-50"})}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("h4",{className:"font-medium text-foreground",children:t.name})})]})},e)})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"timeout",children:"Timeout (seconds)"}),(0,a.jsx)(c.Input,{id:"timeout",type:"number",min:"1",max:"300",value:E.timeout||"",onChange:e=>T(t=>({...t,timeout:parseInt(e.target.value)||30})),className:M.timeout?"border-red-500":""}),M.timeout&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:M.timeout})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"retryAttempts",children:"Retry Attempts"}),(0,a.jsx)(c.Input,{id:"retryAttempts",type:"number",min:"0",max:"10",value:E.retryAttempts||"",onChange:e=>T(t=>({...t,retryAttempts:parseInt(e.target.value)||3})),className:M.retryAttempts?"border-red-500":""}),M.retryAttempts&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:M.retryAttempts})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{children:"Custom Headers"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.Input,{placeholder:"Header name",value:A,onChange:e=>D(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),G())}),(0,a.jsx)(c.Input,{placeholder:"Header value",value:F,onChange:e=>I(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),G())}),(0,a.jsx)(o.Button,{type:"button",variant:"secondary",size:"sm",onClick:G,disabled:!A.trim()||!F.trim(),children:(0,a.jsx)(j.default,{className:"h-4 w-4"})})]}),Object.entries(E.headers||{}).length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:Object.entries(E.headers||{}).map(([e,t])=>(0,a.jsxs)(h.Badge,{variant:"secondary",className:"text-xs",children:[e,": ",t,(0,a.jsx)("button",{type:"button",onClick:()=>V(e),className:"ml-1 hover:text-red-500",children:(0,a.jsx)(f.default,{className:"h-3 w-3"})})]},e))})]})]}),"email"===s.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"forwardTo",children:"Forward To Email *"}),(0,a.jsx)(c.Input,{id:"forwardTo",type:"email",value:P.forwardTo||"",onChange:e=>$(t=>({...t,forwardTo:e.target.value})),placeholder:"support@yourcompany.com",className:M.forwardTo?"border-red-500":""}),M.forwardTo&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:M.forwardTo})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"fromAddress",children:"From Address"}),(0,a.jsxs)(x.Select,{value:P.fromAddress||"auto-detect",onValueChange:e=>$(t=>({...t,fromAddress:"auto-detect"===e?"":e})),children:[(0,a.jsx)(x.SelectTrigger,{children:(0,a.jsx)(x.SelectValue,{placeholder:"Auto-detect from domain"})}),(0,a.jsxs)(x.SelectContent,{children:[(0,a.jsx)(x.SelectItem,{value:"auto-detect",children:"Auto-detect from domain"}),W.map(e=>(0,a.jsxs)(x.SelectItem,{value:`noreply@${e.domain}`,children:["noreply@",e.domain]},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"subjectPrefix",children:"Subject Prefix"}),(0,a.jsx)(c.Input,{id:"subjectPrefix",value:P.subjectPrefix||"",onChange:e=>$(t=>({...t,subjectPrefix:e.target.value})),placeholder:"[Support]"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Switch,{id:"includeAttachments",checked:P.includeAttachments,onCheckedChange:e=>$(t=>({...t,includeAttachments:e}))}),(0,a.jsx)(m.Label,{htmlFor:"includeAttachments",children:"Include attachments"})]})]}),"email_group"===s.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"emails",children:"Email Addresses *"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.Input,{id:"emails",type:"email",placeholder:"team@yourcompany.com",value:O,onChange:e=>_(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),Q())}),(0,a.jsx)(o.Button,{type:"button",variant:"secondary",size:"sm",onClick:Q,disabled:!O.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O.trim()),children:(0,a.jsx)(j.default,{className:"h-4 w-4"})})]}),B.emails.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:B.emails.map(e=>(0,a.jsxs)(h.Badge,{variant:"secondary",className:"text-xs",children:[e,(0,a.jsx)("button",{type:"button",onClick:()=>Y(e),className:"ml-1 hover:text-red-500",children:(0,a.jsx)(f.default,{className:"h-3 w-3"})})]},e))}),M.emails&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:M.emails})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"fromAddressGroup",children:"From Address"}),(0,a.jsxs)(x.Select,{value:B.fromAddress||"auto-detect",onValueChange:e=>L(t=>({...t,fromAddress:"auto-detect"===e?"":e})),children:[(0,a.jsx)(x.SelectTrigger,{children:(0,a.jsx)(x.SelectValue,{placeholder:"Auto-detect from domain"})}),(0,a.jsxs)(x.SelectContent,{children:[(0,a.jsx)(x.SelectItem,{value:"auto-detect",children:"Auto-detect from domain"}),W.map(e=>(0,a.jsxs)(x.SelectItem,{value:`noreply@${e.domain}`,children:["noreply@",e.domain]},e.id))]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.Label,{htmlFor:"subjectPrefixGroup",children:"Subject Prefix"}),(0,a.jsx)(c.Input,{id:"subjectPrefixGroup",value:B.subjectPrefix||"",onChange:e=>L(t=>({...t,subjectPrefix:e.target.value})),placeholder:"[Team]"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.Switch,{id:"includeAttachmentsGroup",checked:B.includeAttachments,onCheckedChange:e=>L(t=>({...t,includeAttachments:e}))}),(0,a.jsx)(m.Label,{htmlFor:"includeAttachmentsGroup",children:"Include attachments"})]})]})]})]})]}),(0,a.jsxs)(d.DialogFooter,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Press Cmd+Enter to submit"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(o.Button,{variant:"secondary",onClick:U,children:"Cancel"}),(0,a.jsx)(o.Button,{onClick:H,disabled:z.isPending,children:z.isPending?"Updating...":"Update Endpoint"})]})]})]})})}},314582:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({DeleteEndpointDialog:()=>h});var a=e.i(731636),r=e.i(838653);e.i(486973);var i=e.i(94173),l=e.i(611206),n=e.i(834953),d=e.i(70818),o=e.i(280783),c=e.i(451081),m=e.i(135673),u=e.i(55496);function h({open:e,onOpenChange:t,endpoint:s}){let h=(0,i.useDeleteEndpointMutation)();(0,r.useEffect)(()=>{let t=e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),!h.isPending&&s&&x())};return e&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[e,h.isPending,s]);let x=async()=>{if(s)try{let e=await h.mutateAsync(s.id);e?.message?u.toast.success(e.message):u.toast.success("Endpoint deleted successfully!"),t(!1)}catch(e){u.toast.error(e instanceof Error?e.message:"Failed to delete endpoint")}},p=()=>{switch(s?.type){case"webhook":return"Webhook";case"email":return"Email Forward";case"email_group":return"Email Group";default:return"Endpoint"}};if(!s)return null;let g=(()=>{switch(s?.type){case"webhook":return o.default;case"email":return c.default;case"email_group":return m.default;default:return d.default}})(),f=(()=>{if(!s?.config)return null;try{let e=JSON.parse(s.config);switch(s.type){case"webhook":return e.url;case"email":return`â†’ ${e.forwardTo}`;case"email_group":return`â†’ ${e.emails?.length||0} recipients`;default:return null}}catch{return null}})();return(0,a.jsx)(l.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(l.DialogContent,{className:"sm:max-w-md",children:[(0,a.jsx)(l.DialogHeader,{children:(0,a.jsxs)(l.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-destructive/20",children:(0,a.jsx)(d.default,{className:"h-4 w-4 text-destructive"})}),"Delete ",p()]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(d.default,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-destructive mb-1",children:"This action cannot be undone"}),(0,a.jsxs)("p",{className:"text-sm text-destructive/80",children:["Deleting this ",p().toLowerCase()," will permanently remove it and stop all email deliveries to this endpoint."]})]})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["You are about to delete the ",p().toLowerCase(),":"]}),(0,a.jsxs)("div",{className:"bg-muted rounded-lg p-3 border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(g,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("div",{className:"font-medium text-foreground",children:s.name}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 bg-muted text-muted-foreground rounded-full",children:p()})]}),f&&(0,a.jsx)("div",{className:"text-sm text-muted-foreground font-mono",children:f}),s.description&&(0,a.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:s.description})]})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("strong",{children:"Note:"}),' Any email addresses using this endpoint will be automatically switched to "store-only" mode (emails will be received and stored but not forwarded).']})})]}),(0,a.jsxs)(l.DialogFooter,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Press Cmd+Enter to delete"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.Button,{variant:"secondary",onClick:()=>t(!1),children:"Cancel"}),(0,a.jsx)(n.Button,{onClick:x,disabled:h.isPending,variant:"destructive",children:h.isPending?"Deleting...":`Delete ${p()}`})]})]})]})})}},3773:e=>{"use strict";var{g:t,__dirname:s}=e;{e.s({DeleteMultipleEndpointsDialog:()=>t});var a=e.i(731636),r=e.i(834953),i=e.i(611206);e.i(486973);var l=e.i(517627),n=e.i(70818),d=e.i(55496);let t=({open:e,onOpenChange:t,endpoints:s,onSuccess:o})=>{let c=(0,l.useDeleteMultipleEndpointsMutation)(),m=async()=>{try{let e=s.map(e=>e.id),a=await c.mutateAsync(e);if(a.success){let e=a.message||`Successfully deleted ${a.deletedCount} endpoint${1!==a.deletedCount?"s":""}`;d.toast.success(e),t(!1),o?.()}else d.toast.error(a.error||"Failed to delete endpoints")}catch(e){console.error("Error deleting endpoints:",e),d.toast.error("Failed to delete endpoints")}};return(0,a.jsx)(i.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(i.DialogContent,{className:"sm:max-w-md",children:[(0,a.jsx)(i.DialogHeader,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-destructive/20",children:(0,a.jsx)(n.default,{className:"h-6 w-6 text-destructive"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.DialogTitle,{children:"Delete Multiple Endpoints"}),(0,a.jsxs)(i.DialogDescription,{children:["Are you sure you want to delete ",s.length," endpoint",1!==s.length?"s":"","?"]})]})]})}),(0,a.jsx)("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:(0,a.jsxs)("div",{className:"text-sm text-foreground",children:[(0,a.jsx)("div",{className:"font-medium mb-2",children:"You are about to delete:"}),(0,a.jsx)("div",{className:"text-muted-foreground",children:Object.entries(s.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{})).map(([e,t])=>`${t} ${"webhook"===e?"webhook":"email"===e?"email forward":"email_group"===e?"email group":"endpoint"}${1!==t?"s":""}`).join(", ")}),(0,a.jsxs)("div",{className:"mt-3 space-y-1",children:[s.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:["â€¢ ",e.name]},e.id)),s.length>5&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["... and ",s.length-5," more"]})]})]})}),(0,a.jsx)("div",{className:"mt-4 p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(n.default,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-destructive mb-1",children:"This action cannot be undone"}),(0,a.jsx)("p",{className:"text-sm text-destructive/80",children:"Deleting these endpoints will permanently remove them and stop all email deliveries to these endpoints."})]})]})}),(0,a.jsxs)(i.DialogFooter,{children:[(0,a.jsx)(r.Button,{variant:"secondary",onClick:()=>t(!1),children:"Cancel"}),(0,a.jsx)(r.Button,{onClick:m,disabled:c.isPending,variant:"destructive",children:c.isPending?"Deleting...":`Delete ${s.length} Endpoint${1!==s.length?"s":""}`})]})]})})}}},172306:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({TestEndpointDialog:()=>v});var a=e.i(731636),r=e.i(838653);e.i(486973);var i=e.i(675338),l=e.i(611206),n=e.i(834953),d=e.i(210339),o=e.i(974294),c=e.i(268628),m=e.i(103394),u=e.i(561657),h=e.i(902273),x=e.i(799544),p=e.i(70818),g=e.i(280783),f=e.i(451081),j=e.i(135673),b=e.i(55496);function v({open:e,onOpenChange:t,endpoint:s}){let[v,y]=(0,r.useState)(null),[w,N]=(0,r.useState)("inbound"),k=(0,i.useTestEndpointMutation)();(0,r.useEffect)(()=>{let t=e=>{(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&(e.preventDefault(),!k.isPending&&s?.isActive&&C())};return e&&document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[e,k.isPending,s]);let C=async()=>{if(s)try{y(null);let e=await k.mutateAsync({id:s.id,webhookFormat:"webhook"===s.type?w:void 0});y({...e,timestamp:new Date}),e.success?b.toast.success("Endpoint test completed successfully!"):b.toast.error(e.message||"Endpoint test failed")}catch(t){let e=t instanceof Error?t.message:"Test failed";y({success:!1,message:e,responseTime:0,error:e,timestamp:new Date}),b.toast.error(e)}},S=()=>{switch(s?.type){case"webhook":return"Webhook";case"email":return"Email Forward";case"email_group":return"Email Group";default:return"Endpoint"}};if(!s)return null;let E=(()=>{switch(s?.type){case"webhook":return g.default;case"email":return f.default;case"email_group":return j.default;default:return m.default}})(),T=(()=>{if(!s?.config)return null;try{let e=JSON.parse(s.config);switch(s.type){case"webhook":return e.url;case"email":return`Forward to: ${e.forwardTo}`;case"email_group":return`Forward to: ${e.emails?.length||0} recipients`;default:return null}}catch{return null}})();return(0,a.jsx)(l.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(l.DialogContent,{className:"sm:max-w-lg",children:[(0,a.jsx)(l.DialogHeader,{children:(0,a.jsxs)(l.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:(0,a.jsx)(m.default,{width:"16",height:"16",className:"text-primary"})}),"Test ",S()]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-muted rounded-lg p-4 border border-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(E,{width:"16",height:"16",className:"text-muted-foreground"}),(0,a.jsx)("h4",{className:"font-medium text-foreground",children:s.name}),(0,a.jsx)(d.Badge,{variant:"secondary",className:"text-xs",children:S()}),(0,a.jsx)(d.Badge,{className:`text-xs ${s.isActive?"bg-green-100 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800":"bg-muted text-muted-foreground border-border"}`,children:s.isActive?"Active":"Inactive"})]}),T&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground font-mono break-all",children:T}),s.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:s.description})]}),"webhook"===s.type&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.Label,{htmlFor:"webhook-format",className:"text-sm font-medium",children:"Webhook Format"}),(0,a.jsxs)(o.Select,{value:w,onValueChange:e=>N(e),children:[(0,a.jsx)(o.SelectTrigger,{id:"webhook-format",children:(0,a.jsx)(o.SelectValue,{placeholder:"Select webhook format"})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsxs)(o.SelectItem,{value:"inbound",className:"flex flex-col items-start py-3 gap-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Inbound Format"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"Standard email webhook with full data"})]}),(0,a.jsxs)(o.SelectItem,{value:"discord",className:"flex flex-col items-start py-3 gap-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Discord Format"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"Discord-compatible webhook with rich embeds"})]}),(0,a.jsxs)(o.SelectItem,{value:"slack",className:"flex flex-col items-start py-3 gap-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Slack Format"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"Slack-compatible webhook with attachments"})]})]})]})]}),!s.isActive&&(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 dark:bg-yellow-900/20 dark:border-yellow-800",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(p.default,{width:"16",height:"16",className:"text-yellow-600 dark:text-yellow-500 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-400 mb-1",children:"Endpoint is disabled"}),(0,a.jsx)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"This endpoint is currently disabled and won't receive real emails. You can still test it, but it won't be triggered by actual email deliveries."})]})]})}),v&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-foreground",children:"Test Results"}),(0,a.jsx)("div",{className:`p-3 rounded-lg border ${v.success?"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800":"bg-destructive/10 border-destructive/20"}`,children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[v.success?(0,a.jsx)(u.default,{width:"16",height:"16",className:"text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}):(0,a.jsx)(h.default,{width:"16",height:"16",className:"text-destructive mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:`text-sm font-medium mb-1 ${v.success?"text-green-800 dark:text-green-400":"text-destructive"}`,children:v.success?"Test Successful":"Test Failed"}),v.message&&(0,a.jsx)("p",{className:`text-sm ${v.success?"text-green-700 dark:text-green-300":"text-destructive/80"}`,children:v.message}),v.error&&(0,a.jsx)("p",{className:"text-sm text-destructive/80 font-mono mt-1",children:v.error}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[v.statusCode&&(0,a.jsxs)("span",{children:["Status: ",v.statusCode]}),void 0!==v.responseTime&&(0,a.jsxs)("span",{children:["Response: ",v.responseTime,"ms"]}),v.webhookFormat&&(0,a.jsxs)("span",{children:["Format: ",v.webhookFormat]}),(0,a.jsxs)("span",{children:[(0,a.jsx)(x.default,{width:"12",height:"12",className:"inline mr-1"}),v.timestamp.toLocaleTimeString()]})]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-muted rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(m.default,{width:"16",height:"16",className:"text-muted-foreground"}),(0,a.jsx)("h4",{className:"text-sm font-medium text-foreground",children:"Test Information"})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[(0,a.jsx)("p",{children:"â€¢ This will send a test email to your endpoint"}),(0,a.jsx)("p",{children:"â€¢ The test email contains sample data to verify your endpoint is working"}),(0,a.jsx)("p",{children:"â€¢ Check your endpoint logs to see the received data"}),"webhook"===s.type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"â€¢ For webhooks, we'll send a POST request with email data in the selected format"}),(0,a.jsx)("p",{children:"â€¢ Inbound format: Full email data with headers and metadata"}),(0,a.jsx)("p",{children:"â€¢ Discord format: Rich embeds compatible with Discord webhooks"}),(0,a.jsx)("p",{children:"â€¢ Slack format: Attachments compatible with Slack webhooks"})]}),("email"===s.type||"email_group"===s.type)&&(0,a.jsx)("p",{children:"â€¢ For email forwards, we'll validate the configuration without sending actual emails"})]})]})]}),(0,a.jsxs)(l.DialogFooter,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Press Cmd+Enter to test"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.Button,{variant:"secondary",onClick:()=>t(!1),children:"Close"}),(0,a.jsx)(n.Button,{onClick:C,disabled:k.isPending,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:k.isPending?"Testing...":"Run Test"})]})]})]})})}},647443:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({}),e.i(943034),e.i(134581),e.i(314582),e.i(3773),e.i(172306),e.i(154659)},117855:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({}),e.i(943034),e.i(134581),e.i(314582),e.i(3773),e.i(172306),e.i(154659),e.i(647443)},478423:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({default:()=>I});var a=e.i(731636),r=e.i(838653);e.i(486973);var i=e.i(994579),l=e.i(105390);e.i(117855);var n=e.i(943034),d=e.i(134581),o=e.i(314582),c=e.i(3773),m=e.i(172306),u=e.i(921361),h=e.i(210339),x=e.i(834953),p=e.i(330790),g=e.i(974294),f=e.i(401575),j=e.i(561657),b=e.i(622808),v=e.i(242148),y=e.i(274260),w=e.i(280783),N=e.i(451081),k=e.i(135673),C=e.i(379225),S=e.i(103394),E=e.i(773930),T=e.i(976760),A=e.i(404800),D=e.i(602833),F=e.i(55496);function I(){let{data:e=[],isLoading:t,error:s,refetch:I,migrationInProgress:P,migrationChecked:$}=(0,i.useEndpointsQuery)(),B=(0,l.useMigrationMutation)(),[L,O]=(0,r.useState)(null),[_,M]=(0,r.useState)(!1),[R,z]=(0,r.useState)(""),[K,W]=(0,r.useState)("all"),[q,H]=(0,r.useState)("all"),[U,G]=(0,r.useState)(new Set),[V,Q]=(0,r.useState)(!1),[Y,J]=(0,r.useState)(null);(0,r.useEffect)(()=>{$&&!P&&e.length>0&&e.some(e=>e.description?.includes("Migrated from webhook:"))&&(M(!0),setTimeout(()=>M(!1),1e4))},[$,P,e]);let[X,Z]=(0,r.useState)(!1),[ee,et]=(0,r.useState)(!1),[es,ea]=(0,r.useState)(!1),[er,ei]=(0,r.useState)(!1),[el,en]=(0,r.useState)(!1),ed=(0,r.useMemo)(()=>e=>{if(!e.config)return null;try{let t=JSON.parse(e.config);switch(e.type){case"webhook":return new URL(t.url).hostname;case"email":return t.forwardTo;case"email_group":return`${t.emails?.length||0} recipients`;default:return null}}catch{return null}},[]),eo=(0,r.useMemo)(()=>e.filter(e=>{let t=ed(e),s=""===R||e.name.toLowerCase().includes(R.toLowerCase())||e.description?.toLowerCase().includes(R.toLowerCase())||t?.toLowerCase().includes(R.toLowerCase()),a="all"===K||e.type===K,r="all"===q||"active"===q&&e.isActive||"disabled"===q&&!e.isActive;return s&&a&&r}),[e,R,K,q,ed]);(0,r.useEffect)(()=>{0===eo.length&&U.size>0&&(G(new Set),Q(!1))},[eo.length,U.size]);let ec=(0,r.useMemo)(()=>0!==eo.length&&eo.every(e=>U.has(e.id)),[eo,U]);(0,r.useEffect)(()=>{Q(ec)},[ec]);let em=e=>{J(e),en(!0)},eu=e=>{J(e),et(!0)},eh=e=>{J(e),ea(!0)},ex=(e,t)=>{let s=new Set(U);t?s.add(e):s.delete(e),G(s)},ep=()=>{G(new Set),Q(!1)},eg=e=>e.isActive?(0,a.jsx)(h.Badge,{className:"bg-emerald-500 text-white rounded-full px-0.5 py-0.5 text-xs font-medium shadow-sm",title:"Active",children:(0,a.jsx)(j.default,{width:"12",height:"12"})}):(0,a.jsx)(h.Badge,{className:"bg-gray-400 text-white rounded-full px-2.5 py-0.5 text-xs font-medium shadow-sm",title:"Not Active",children:(0,a.jsx)(b.default,{width:"12",height:"12"})}),ef=e=>{switch(e.type){case"webhook":return w.default;case"email":return N.default;case"email_group":return k.default;default:return C.default}},ej=e=>{if(!e.isActive)return"hsl(var(--muted-foreground))";switch(e.type){case"webhook":return"hsl(262, 83%, 58%)";case"email":return"hsl(221, 83%, 53%)";case"email_group":return"hsl(142, 76%, 36%)";default:return"hsl(var(--muted-foreground))"}},eb=e.length,ev=e.filter(e=>e.isActive).length,ey=e.filter(e=>"webhook"===e.type).length,ew=e.filter(e=>"email"===e.type).length,eN=e.filter(e=>"email_group"===e.type).length,ek=e.filter(e=>U.has(e.id));return t||P?(0,a.jsx)("div",{className:"min-h-screen p-4 font-outfit",children:(0,a.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-muted-foreground mb-2",children:P?"Migrating webhooks to endpoints...":"Loading endpoints..."}),P&&(0,a.jsx)("div",{className:"text-sm text-blue-600",children:"We're automatically importing your existing webhooks into the new endpoints system"})]})})})}):s?(0,a.jsx)("div",{className:"min-h-screen p-4 font-outfit",children:(0,a.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,a.jsx)(u.Card,{className:"border-destructive/50 bg-destructive/10",children:(0,a.jsx)(u.CardContent,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,a.jsx)(b.default,{width:"16",height:"16"}),(0,a.jsx)("span",{children:s.message}),(0,a.jsx)(x.Button,{variant:"ghost",size:"sm",onClick:()=>I(),className:"ml-auto text-destructive hover:text-destructive/80",children:"Try Again"})]})})})})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"min-h-screen p-4 font-outfit",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg mb-6 mt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-1",children:"Endpoint Management"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,a.jsxs)("span",{children:[eb," endpoints"]}),(0,a.jsxs)("span",{children:[ev," active"]}),ey>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(w.default,{width:"12",height:"12"}),ey," webhooks"]}),ew>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(N.default,{width:"12",height:"12"}),ew," email forwards"]}),eN>0&&(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(k.default,{width:"12",height:"12"}),eN," email groups"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(x.Button,{variant:"secondary",size:"sm",onClick:()=>I(),disabled:t,className:"bg-secondary text-secondary-foreground hover:bg-secondary/80",children:[(0,a.jsx)(y.default,{width:"12",height:"12",className:"mr-1"}),"Refresh"]}),(0,a.jsxs)(x.Button,{size:"sm",onClick:()=>Z(!0),children:[(0,a.jsx)(v.default,{width:"12",height:"12",className:"mr-1"}),"Add Endpoint"]})]})]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-1 mb-2",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(A.default,{width:"16",height:"16",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(p.Input,{placeholder:"Search endpoints by name, description, or configuration...",value:R,onChange:e=>z(e.target.value),className:"pl-10 bg-card border-border rounded-xl"})]})}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsxs)(g.Select,{value:K,onValueChange:e=>W(e),children:[(0,a.jsx)(g.SelectTrigger,{className:"w-40 bg-card border-border rounded-xl",children:(0,a.jsx)(g.SelectValue,{placeholder:"Type"})}),(0,a.jsxs)(g.SelectContent,{className:"bg-card border-border rounded-xl",children:[(0,a.jsx)(g.SelectItem,{value:"all",children:"All Types"}),(0,a.jsx)(g.SelectItem,{value:"webhook",children:"Webhooks"}),(0,a.jsx)(g.SelectItem,{value:"email",children:"Email Forwards"}),(0,a.jsx)(g.SelectItem,{value:"email_group",children:"Email Groups"})]})]}),(0,a.jsxs)(g.Select,{value:q,onValueChange:e=>H(e),children:[(0,a.jsx)(g.SelectTrigger,{className:"w-32 bg-card border-border rounded-xl",children:(0,a.jsx)(g.SelectValue,{placeholder:"Status"})}),(0,a.jsxs)(g.SelectContent,{className:"bg-card border-border rounded-xl",children:[(0,a.jsx)(g.SelectItem,{value:"all",children:"All Status"}),(0,a.jsx)(g.SelectItem,{value:"active",children:"Active"}),(0,a.jsx)(g.SelectItem,{value:"disabled",children:"Disabled"})]})]})]})]}),eo.length>0&&(0,a.jsx)(u.Card,{className:"bg-card border-border rounded-xl mb-2",children:(0,a.jsx)(u.CardContent,{className:"py-2 px-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between min-h-[32px]",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.Checkbox,{checked:V,onCheckedChange:e=>{e?G(new Set(eo.map(e=>e.id))):G(new Set)},id:"select-all"}),(0,a.jsx)("label",{htmlFor:"select-all",className:"text-sm font-medium text-foreground cursor-pointer",children:U.size>0?`${U.size} of ${eo.length} endpoints selected`:`Select all (${eo.length}) endpoints`})]}),(0,a.jsxs)("div",{className:`flex items-center gap-2 transition-opacity duration-200 ${U.size>0?"opacity-100":"opacity-0 pointer-events-none"}`,children:[(0,a.jsx)(x.Button,{variant:"secondary",size:"sm",onClick:ep,disabled:0===U.size,children:"Clear"}),(0,a.jsxs)(x.Button,{variant:"destructive",size:"sm",onClick:()=>{if(0===U.size)return void F.toast.error("No endpoints selected");ei(!0)},className:"bg-red-600 hover:bg-red-700",disabled:0===U.size,children:[(0,a.jsx)(T.default,{width:"12",height:"12",className:"mr-1"}),"Delete (",U.size,")"]})]})]})})})]}),(0,a.jsx)("hr",{className:"my-4 border-border"}),(0,a.jsxs)("div",{className:"space-y-2",children:[_&&(0,a.jsx)(u.Card,{className:"bg-green-500/10 border-green-500/50",children:(0,a.jsx)(u.CardContent,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.default,{width:"20",height:"20",className:"text-green-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-green-500",children:"Migration Completed Successfully!"}),(0,a.jsx)("p",{className:"text-sm text-green-500/80",children:"Your webhooks have been imported as endpoints. You can now manage all your endpoints in one place."})]}),(0,a.jsx)(x.Button,{variant:"ghost",size:"sm",onClick:()=>M(!1),className:"text-green-500 hover:text-green-500/80",children:(0,a.jsx)(b.default,{width:"16",height:"16"})})]})})}),0===eo.length?(0,a.jsx)(u.Card,{className:"bg-card border-border rounded-xl",children:(0,a.jsx)(u.CardContent,{className:"p-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(D.CustomInboundIcon,{Icon:R||"all"!==K||"all"!==q?A.default:C.default,size:48,backgroundColor:"hsl(var(--muted-foreground))",className:"mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:R||"all"!==K||"all"!==q?"No endpoints match your search criteria":"No endpoints configured"}),(0,a.jsx)("div",{className:"space-y-2",children:R||"all"!==K||"all"!==q?(0,a.jsx)(x.Button,{variant:"secondary",onClick:()=>{z(""),W("all"),H("all")},children:"Clear Filters"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(x.Button,{variant:"secondary",onClick:()=>Z(!0),children:[(0,a.jsx)(v.default,{width:"16",height:"16",className:"mr-2"}),"Add Your First Endpoint"]}),$&&!P&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,a.jsxs)("p",{children:["Have existing webhooks?",(0,a.jsx)(x.Button,{variant:"ghost",size:"sm",onClick:async()=>{try{let e=await B.mutateAsync();e.success?(e.migratedCount||0)>0?(M(!0),F.toast.success(`Successfully imported ${e.migratedCount} webhooks!`)):F.toast.info("No webhooks found to import"):F.toast.error(e.error||"Failed to import webhooks")}catch(e){console.error("Migration failed:",e),F.toast.error("Failed to import webhooks")}},disabled:B.isPending,className:"p-0 h-auto ml-1 text-primary hover:text-primary/80",children:B.isPending?"Importing...":"Import them now"})]})})]})})]})})}):eo.map(e=>{let t=ef(e);ed(e);let s=U.has(e.id);return(0,a.jsx)(u.Card,{className:`bg-card/95 backdrop-blur-sm shadow-sm hover:shadow-lg transition-all duration-300 border rounded-xl group ${s?"border-primary bg-primary/5":"border-border"}`,children:(0,a.jsx)(u.CardContent,{className:"p-0",children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,a.jsx)(f.Checkbox,{checked:s,onCheckedChange:t=>ex(e.id,t),className:"flex-shrink-0"}),(0,a.jsx)(D.CustomInboundIcon,{Icon:t,size:36,backgroundColor:ej(e)}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("div",{className:"flex items-center space-x-2 mb-1",children:(0,a.jsx)("h3",{className:"text-base font-semibold text-foreground tracking-tight truncate",children:e.name})})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[eg(e),(0,a.jsx)(x.Button,{variant:"ghost",size:"sm",className:"p-1.5 hover:bg-muted rounded-lg transition-colors",onClick:()=>em(e),title:"Test endpoint",children:(0,a.jsx)(S.default,{width:"16",height:"16",className:"text-muted-foreground hover:text-foreground"})}),(0,a.jsx)(x.Button,{variant:"ghost",size:"sm",className:"p-1.5 hover:bg-muted rounded-lg transition-colors",onClick:()=>eu(e),title:"Configure endpoint",children:(0,a.jsx)(E.default,{width:"16",height:"16",className:"text-muted-foreground hover:text-foreground"})}),(0,a.jsx)(x.Button,{variant:"ghost",size:"sm",className:"p-1.5 hover:bg-muted rounded-lg transition-colors",onClick:()=>eh(e),title:"Delete endpoint",children:(0,a.jsx)(T.default,{width:"16",height:"16",className:"text-muted-foreground hover:text-foreground"})})]})]})})})},e.id)})]})]})}),(0,a.jsx)(n.CreateEndpointDialog,{open:X,onOpenChange:Z}),(0,a.jsx)(d.EditEndpointDialog,{open:ee,onOpenChange:et,endpoint:Y}),(0,a.jsx)(o.DeleteEndpointDialog,{open:es,onOpenChange:ea,endpoint:Y}),(0,a.jsx)(c.DeleteMultipleEndpointsDialog,{open:er,onOpenChange:ei,endpoints:ek,onSuccess:ep}),(0,a.jsx)(m.TestEndpointDialog,{open:el,onOpenChange:en,endpoint:Y})]})}}}]);

//# sourceMappingURL=6dca36c94ce5c22b.js.map