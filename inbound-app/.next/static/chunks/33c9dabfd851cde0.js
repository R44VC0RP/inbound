(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{415667:e=>{"use strict";var{g:t,__dirname:s}=e;{e.s({default:()=>t});var r=e.i(731636);let t=function({fill:e="currentColor",secondaryfill:t,title:s="badge 13",...a}){return t=t||e,(0,r.jsxs)("svg",{height:"18",width:"18",...a,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("title",{children:s}),(0,r.jsxs)("g",{fill:e,children:[(0,r.jsx)("rect",{height:"14",width:"5",fill:e,rx:"1.75",ry:"1.75",x:"2",y:"2"}),(0,r.jsx)("rect",{height:"14",width:"5",fill:t,rx:"1.75",ry:"1.75",x:"11",y:"2"})]})]})}}},77408:e=>{"use strict";var{g:t,__dirname:s}=e;{e.s({default:()=>t});var r=e.i(731636);let t=function({fill:e="currentColor",secondaryfill:t,title:s="badge 13",...a}){return t=t||e,(0,r.jsxs)("svg",{height:"18",width:"18",...a,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("title",{children:s}),(0,r.jsx)("g",{fill:e,children:(0,r.jsx)("path",{d:"M14.146,6.327c-.442-2.463-2.611-4.327-5.146-4.327-2.895,0-5.25,2.355-5.25,5.25,0,.128,.005,.258,.017,.39-1.604,.431-2.767,1.885-2.767,3.61,0,2.068,1.682,3.75,3.75,3.75h7.75c2.481,0,4.5-2.019,4.5-4.5,0-1.854-1.15-3.503-2.854-4.173Zm-2.366,3.704l-2.25,2.25c-.146,.146-.338,.22-.53,.22s-.384-.073-.53-.22l-2.25-2.25c-.293-.293-.293-.768,0-1.061s.768-.293,1.061,0l.97,.97v-3.189c0-.414,.336-.75,.75-.75s.75,.336,.75,.75v3.189l.97-.97c.293-.293,.768-.293,1.061,0s.293,.768,0,1.061Z",fill:e})})]})}}},558181:e=>{"use strict";var{g:t,__dirname:s}=e;{e.s({default:()=>t});var r=e.i(731636);let t=function({fill:e="currentColor",secondaryfill:t,title:s="badge 13",...a}){return t=t||e,(0,r.jsxs)("svg",{height:"18",width:"18",...a,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("title",{children:s}),(0,r.jsxs)("g",{fill:e,children:[(0,r.jsx)("path",{d:"M15.75 10.5H8.75C8.336 10.5 8 10.836 8 11.25C8 11.664 8.336 12 8.75 12H15.75C16.164 12 16.5 11.664 16.5 11.25C16.5 10.836 16.164 10.5 15.75 10.5Z",fill:e}),(0,r.jsx)("path",{d:"M15.75 14H8.75C8.336 14 8 14.336 8 14.75C8 15.164 8.336 15.5 8.75 15.5H15.75C16.164 15.5 16.5 15.164 16.5 14.75C16.5 14.336 16.164 14 15.75 14Z",fill:e}),(0,r.jsx)("path",{d:"M15.75 3.5H8.75C8.336 3.5 8 3.836 8 4.25C8 4.664 8.336 5 8.75 5H15.75C16.164 5 16.5 4.664 16.5 4.25C16.5 3.836 16.164 3.5 15.75 3.5Z",fill:e}),(0,r.jsx)("path",{d:"M15.75 7H8.75C8.336 7 8 7.336 8 7.75C8 8.164 8.336 8.5 8.75 8.5H15.75C16.164 8.5 16.5 8.164 16.5 7.75C16.5 7.336 16.164 7 15.75 7Z",fill:e}),(0,r.jsx)("path",{d:"M3.75 6.5C4.9926 6.5 6 5.493 6 4.25C6 3.007 4.9926 2 3.75 2C2.5074 2 1.5 3.007 1.5 4.25C1.5 5.493 2.5074 6.5 3.75 6.5Z",fill:t}),(0,r.jsx)("path",{d:"M3.75 13.5C4.9926 13.5 6 12.493 6 11.25C6 10.007 4.9926 9 3.75 9C2.5074 9 1.5 10.007 1.5 11.25C1.5 12.493 2.5074 13.5 3.75 13.5Z",fill:t})]})]})}}},17848:e=>{"use strict";var{g:t,__dirname:s}=e;{e.s({default:()=>t});var r=e.i(731636);let t=function({fill:e="currentColor",secondaryfill:t,title:s="badge 13",...a}){return t=t||e,(0,r.jsxs)("svg",{height:"18",width:"18",...a,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("title",{children:s}),(0,r.jsxs)("g",{fill:e,children:[(0,r.jsx)("rect",{height:"6",width:"6",fill:e,rx:"1.75",ry:"1.75",x:"2",y:"10"}),(0,r.jsx)("rect",{height:"6",width:"6",fill:e,rx:"1.75",ry:"1.75",x:"10",y:"10"}),(0,r.jsx)("rect",{height:"6",width:"6",fill:e,rx:"1.75",ry:"1.75",x:"2",y:"2"}),(0,r.jsx)("path",{d:"M16.005,3.763l-1.769-1.769c-.681-.68-1.791-.681-2.474,0l-1.769,1.769c-.681,.682-.681,1.792,0,2.474l1.769,1.769c.341,.34,.789,.511,1.237,.511s.896-.17,1.237-.511l1.769-1.769c.681-.682,.681-1.792,0-2.474,0,0,0,0,0,0Z",fill:t})]})]})}}},438109:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({getLambdaFunctionInfo:()=>a});var r=e.i(286714),a=(0,r.createServerReference)("002fadfbf1de6b6906c36737771fcb63155a62f386",r.callServer,void 0,r.findSourceMapURL,"getLambdaFunctionInfo")},458017:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({getLambdaRecentLogs:()=>a});var r=e.i(286714),a=(0,r.createServerReference)("60b38dcd28b08e3c462dc19827d9069a7a04fdad8b",r.callServer,void 0,r.findSourceMapURL,"getLambdaRecentLogs")},489272:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({getLambdaMoreLogs:()=>a});var r=e.i(286714),a=(0,r.createServerReference)("70ad903b3a5ebe2d80c70c968fd3c917594be4b861",r.callServer,void 0,r.findSourceMapURL,"getLambdaMoreLogs")},431365:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({getLambdaLogStreams:()=>a});var r=e.i(286714),a=(0,r.createServerReference)("00d95b3472d71039b8dd024b1b22cac9d0724f6b72",r.callServer,void 0,r.findSourceMapURL,"getLambdaLogStreams")},511412:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({checkAWSConnection:()=>a});var r=e.i(286714),a=(0,r.createServerReference)("00309720759baccbe8187348cba5569cb3494fcf37",r.callServer,void 0,r.findSourceMapURL,"checkAWSConnection")},361028:e=>{"use strict";var{g:t,__dirname:s}=e;e.s({default:()=>I});var r=e.i(731636),a=e.i(838653),l=e.i(921361),d=e.i(834953),n=e.i(344077),i=e.i(308491),o=e.i(974294),c=e.i(330790),u=e.i(560405),m=e.i(55366),g=e.i(274260),x=e.i(415667),h=e.i(103394),p=e.i(77408),f=e.i(404800),b=e.i(558181),v=e.i(17848),j=e.i(806178),y=e.i(142639),w=e.i(55496),S=e.i(438109),L=e.i(458017),N=e.i(489272),k=e.i(431365),C=e.i(511412);function I(){let e,[t,s]=(0,a.useState)(null),[I,T]=(0,a.useState)([]),[R,q]=(0,a.useState)([]),[E,A]=(0,a.useState)(!0),[M,U]=(0,a.useState)(!0),[D,B]=(0,a.useState)("30"),[O,_]=(0,a.useState)(!1),[F,$]=(0,a.useState)(null),[P,H]=(0,a.useState)(null),[G,W]=(0,a.useState)(null),[Z,z]=(0,a.useState)(!1),[Q,V]=(0,a.useState)(""),[K,J]=(0,a.useState)(""),[X,Y]=(0,a.useState)(null),[ee,et]=(0,a.useState)(!1),[es,er]=(0,a.useState)(!0),ea=(0,a.useRef)(null),[el,ed]=(0,a.useState)(!0),[en,ei]=(0,a.useState)(new Set),[eo,ec]=(0,a.useState)({type:null,value:null});(0,a.useEffect)(()=>{eu()},[]),(0,a.useEffect)(()=>{O&&(Y(null),er(!0),em())},[O,D]),(0,a.useEffect)(()=>{let e=null;return M&&O&&(e=setInterval(()=>{eg()},2e3)),()=>{e&&clearInterval(e)}},[M,O,D]),(0,a.useEffect)(()=>{let e=ea.current;if(!e)return;let t=e=>{let{scrollTop:t,scrollHeight:s,clientHeight:r}=e.target;s-t-r<100&&es&&!ee&&ex()},s=e.querySelector("[data-radix-scroll-area-viewport]");if(s)return s.addEventListener("scroll",t),()=>{s.removeEventListener("scroll",t)}},[es,ee]);let eu=async()=>{try{let e=await (0,C.checkAWSConnection)();_(e.success),e.success||$(e.error||"AWS connection failed")}catch(e){$("Failed to check AWS connection"),_(!1)}},em=async()=>{A(!0),$(null);try{let[e,t,r]=await Promise.all([(0,S.getLambdaFunctionInfo)(),(0,L.getLambdaRecentLogs)(parseInt(D)),(0,k.getLambdaLogStreams)()]);if(e.success&&e.data?s(e.data):$(e.error||"Failed to load function info"),t.success&&t.data){let e=t.data.sort((e,t)=>t.timestamp-e.timestamp);q(e),Y(t.nextToken||null),er(!!t.nextToken)}else $(t.error||"Failed to load logs");r.success&&r.data&&T(r.data),H(new Date)}catch(e){$("Failed to load Lambda data")}finally{A(!1)}},eg=async()=>{try{let e=await (0,L.getLambdaRecentLogs)(parseInt(D));if(e.success&&e.data){let t=e.data.sort((e,t)=>t.timestamp-e.timestamp);q(t),Y(e.nextToken||null),er(!!e.nextToken),H(new Date)}}catch(e){console.error("Failed to refresh logs:",e)}},ex=async()=>{if(X&&!ee){et(!0);try{let e=await (0,N.getLambdaMoreLogs)(parseInt(D),X);if(e.success&&e.data){let t=e.data.sort((e,t)=>t.timestamp-e.timestamp);q(e=>[...e,...t].filter((e,t,s)=>t===s.findIndex(t=>t.timestamp===e.timestamp&&t.message===e.message)).sort((e,t)=>t.timestamp-e.timestamp)),Y(e.nextToken||null),er(!!e.nextToken)}}catch(e){console.error("Failed to load more logs:",e)}finally{et(!1)}}},eh=e=>new Date(e).toLocaleString(),ep=e=>e.includes("ERROR")||e.includes("❌")?{type:"error",content:e}:e.includes("WARN")||e.includes("⚠️")?{type:"warning",content:e}:e.includes("✅")||e.includes("SUCCESS")?{type:"success",content:e}:{type:"info",content:e},ef=e=>e.includes("📧 Lambda - Received SES email event")?"📧 Received SES email event":e.includes("📥 Lambda - Fetching email from S3")?"📥 Fetching email from S3":e.includes("✅ Lambda - Successfully fetched email content")?"✅ Email content fetched":e.includes("🚀 Lambda - Sending webhook request")?"🚀 Sending webhook request":e.includes("✅ Lambda - Webhook response")?"✅ Webhook sent successfully":e.includes("❌ Lambda")?"❌ Lambda error occurred":e.includes("INIT_START")?"🔄 Lambda function initializing":e.includes("START RequestId")?"▶️ Request started":e.includes("END RequestId")?"✅ Request completed":e.includes("REPORT RequestId")||e.match(/^REPORT\s+RequestId:/)?"📊 Request metrics":e.length>80?e.substring(0,80)+"...":e,eb=e=>{W(e),z(!0),V("")},ev=()=>G&&Q?G.message.split("\n").filter(e=>e.toLowerCase().includes(Q.toLowerCase())):G?.message.split("\n")||[],ej=e=>{let t=e.split("	"),s=e,r=null;t.length>=4?(r=t[1],s=t.slice(3).join("	")):2===t.length&&(s=t[1]);let a=s.match(/(?:🆔\s+)?REQUEST_START\|([^|]+)\|(.+)/);if(a)return{type:"REQUEST_START",requestId:a[1],message:a[2]};let l=s.match(/(?:📧\s+)?EMAIL_TARGET\|([^|]+)\|([^|]+)\|(.+)/);if(l)return{type:"EMAIL_TARGET",requestId:l[1],email:l[2],message:l[3]};let d=s.match(/(?:✅\s+)?REQUEST_COMPLETE\|([^|]+)\|([^|]+)\|(.+)/);if(d)return{type:"REQUEST_COMPLETE",requestId:d[1],status:d[2],message:d[3]};let n=s.match(/^(?:[📧📥🔍🚀💥⚠️❌✅📨📭📍🧪📊]\s+)?([a-f0-9-]+)\|(.+)/);if(n)return{type:"LAMBDA_LOG",requestId:n[1],message:n[2]};if(r)return{type:"LAMBDA_LOG",requestId:r,message:s};if(s.match(/^([📧📥🔍🚀💥⚠️❌✅📨📭📍🧪📊])\s+(Lambda\s+-\s+.+|Error\s+details:|.+error.+)/))return{type:"LAMBDA_LOG_NO_ID",requestId:null,message:s};let i=s.match(/^([a-f0-9-]+)\|(.+)/);if(i)return{type:"LAMBDA_LOG",requestId:i[1],message:i[2]};let o=s.match(/RequestId:\s*([a-f0-9-]+)/);return o?{type:"LAMBDA_LOG",requestId:o[1],message:s}:{type:"OTHER",requestId:null,message:s}},ey=e=>{let t={};return e.forEach(e=>{let s=ej(e.message);s.requestId&&(t[s.requestId]||(t[s.requestId]={requestId:s.requestId,logs:[],startTime:e.timestamp,endTime:e.timestamp,status:"RUNNING",summary:"Processing request..."}),t[s.requestId].logs.push(e),t[s.requestId].startTime=Math.min(t[s.requestId].startTime,e.timestamp),t[s.requestId].endTime=Math.max(t[s.requestId].endTime,e.timestamp),"EMAIL_TARGET"===s.type?(t[s.requestId].emailTarget=s.email,t[s.requestId].summary=`Processing email for ${s.email}`):"REQUEST_COMPLETE"===s.type&&(t[s.requestId].status="SUCCESS"===s.status?"SUCCESS":"FAILED",t[s.requestId].summary="SUCCESS"===s.status?"Request completed successfully":"Request failed"))}),Object.values(t).sort((e,t)=>t.startTime-e.startTime)},ew=e=>{ei(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},eS=e=>{ec({type:"request",value:e}),J("")},eL=e=>{ec({type:"email",value:e}),J("")};return O?(0,r.jsxs)("div",{className:"flex flex-1 flex-col h-full p-6 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,r.jsx)(m.default,{width:"32",height:"32"}),"Lambda Monitoring"]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[P&&(0,r.jsxs)("span",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[M&&(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Last refresh: ",P.toLocaleTimeString()]}),(0,r.jsx)(d.Button,{variant:"secondary",onClick:()=>{U(!M)},className:M?"bg-green-50 border-green-200 text-green-700 dark:bg-green-950 dark:border-green-800 dark:text-green-300":"",children:M?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.default,{width:"16",height:"16",className:"mr-2"}),"Live Streaming"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.default,{width:"16",height:"16",className:"mr-2"}),"Start Live Stream"]})}),(0,r.jsxs)(d.Button,{variant:"secondary",onClick:em,disabled:E,children:[(0,r.jsx)(g.default,{width:"16",height:"16",className:"mr-2"}),"Refresh"]})]})]}),(0,r.jsxs)(n.Tabs,{defaultValue:"logs",className:"flex flex-col flex-1 gap-4",children:[(0,r.jsxs)(n.TabsList,{children:[(0,r.jsx)(n.TabsTrigger,{value:"logs",children:"Recent Logs"}),(0,r.jsx)(n.TabsTrigger,{value:"streams",children:"Log Streams"})]}),(0,r.jsxs)(n.TabsContent,{value:"logs",className:"flex flex-col flex-1 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Lambda Logs"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm text-muted-foreground bg-muted px-2 py-1 rounded-md font-mono",children:(e=R,eo.type&&eo.value&&("request"===eo.type?e=R.filter(e=>ej(e.message).requestId===eo.value):"email"===eo.type&&(e=R.filter(e=>{let t=ej(e.message);return"EMAIL_TARGET"===t.type&&t.email===eo.value||e.message.includes(eo.value)}))),e=e.filter(e=>""===K||e.message.toLowerCase().includes(K.toLowerCase())||ef(e.message).toLowerCase().includes(K.toLowerCase())),`${e.length} logs`)}),(0,r.jsxs)(d.Button,{variant:"secondary",size:"sm",onClick:()=>ed(!el),className:"flex items-center gap-1",children:[el?(0,r.jsx)(b.default,{width:"16",height:"16"}):(0,r.jsx)(v.default,{width:"16",height:"16"}),el?"Grouped":"Individual"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[eo.type&&(0,r.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 bg-blue-50 border border-blue-200 rounded text-xs dark:bg-blue-950 dark:border-blue-800",children:[(0,r.jsxs)("span",{className:"text-blue-700 dark:text-blue-300",children:["request"===eo.type?"🔍 Request:":"📧 Email:"," ",eo.value]}),(0,r.jsx)("button",{onClick:()=>{ec({type:null,value:null})},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200",children:"×"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(f.default,{width:"16",height:"16",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),(0,r.jsx)(c.Input,{placeholder:eo.type?"Search filtered logs...":"Search logs...",value:K,onChange:e=>J(e.target.value),className:"pl-10 w-48"})]}),(0,r.jsxs)(o.Select,{value:D,onValueChange:B,children:[(0,r.jsx)(o.SelectTrigger,{className:"w-32",children:(0,r.jsx)(o.SelectValue,{})}),(0,r.jsxs)(o.SelectContent,{children:[(0,r.jsx)(o.SelectItem,{value:"15",children:"Last 15 min"}),(0,r.jsx)(o.SelectItem,{value:"30",children:"Last 30 min"}),(0,r.jsx)(o.SelectItem,{value:"60",children:"Last 1 hour"}),(0,r.jsx)(o.SelectItem,{value:"180",children:"Last 3 hours"}),(0,r.jsx)(o.SelectItem,{value:"720",children:"Last 12 hours"})]})]}),(0,r.jsxs)(d.Button,{variant:"secondary",onClick:()=>{let e=new Blob([R.map(e=>`${eh(e.timestamp)} - ${e.message}`).join("\n")],{type:"text/plain"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`lambda-logs-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},children:[(0,r.jsx)(p.default,{width:"16",height:"16",className:"mr-2"}),"Download"]})]})]}),(0,r.jsx)(i.ScrollArea,{className:"flex-1 w-full",ref:ea,children:(0,r.jsxs)("div",{className:"p-2 space-y-0.5 font-mono text-xs",children:[(()=>{let e=R;if(eo.type&&eo.value&&("request"===eo.type?e=R.filter(e=>ej(e.message).requestId===eo.value):"email"===eo.type&&(e=R.filter(e=>{let t=ej(e.message);return"EMAIL_TARGET"===t.type&&t.email===eo.value||e.message.includes(eo.value)}))),0===(e=e.filter(e=>""===K||e.message.toLowerCase().includes(K.toLowerCase())||ef(e.message).toLowerCase().includes(K.toLowerCase()))).length){let e="No logs found for the selected time range";return eo.type&&K?e=`No logs found matching "${K}" in filtered results`:eo.type?e=`No logs found for ${"request"===eo.type?"request":"email"}: ${eo.value}`:K&&(e=`No logs found matching "${K}"`),(0,r.jsx)("div",{className:"text-center text-muted-foreground py-6 text-xs",children:e})}if(!el)return e.map((e,t)=>{let s=e.message,a=e.message.split("	");a.length>=4&&(s=a.slice(3).join("	"));let l=ej(e.message);l.requestId&&(s=(s=(s=s.replace(RegExp(l.requestId,"g"),"").trim()).replace(/\|\s*\|/g,"|").replace(/\s+/g," ").replace(/^\|/,"").trim()).replace(/\|Lambda\s+-\s+/g,"Lambda - "));let d=ep(s),n=ef(s);return(0,r.jsxs)("div",{onClick:()=>eb(e),className:`px-3 py-2 rounded-md cursor-pointer transition-colors border-l-2 h-8 flex items-center ${"error"===d.type?"bg-red-50/50 hover:bg-red-50 text-red-800 border-l-red-400 dark:bg-red-950/30 dark:hover:bg-red-950/50 dark:text-red-300 dark:border-l-red-600":"warning"===d.type?"bg-yellow-50/50 hover:bg-yellow-50 text-yellow-800 border-l-yellow-400 dark:bg-yellow-950/30 dark:hover:bg-yellow-950/50 dark:text-yellow-300 dark:border-l-yellow-600":"success"===d.type?"bg-green-50/50 hover:bg-green-50 text-green-800 border-l-green-400 dark:bg-green-950/30 dark:hover:bg-green-950/50 dark:text-green-300 dark:border-l-green-600":"bg-muted/50 hover:bg-muted border-l-border"}`,children:[(0,r.jsx)("span",{className:"text-[10px] text-muted-foreground whitespace-nowrap flex-shrink-0 font-mono opacity-60",children:new Date(e.timestamp).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}),(0,r.jsx)("div",{className:"font-medium text-xs truncate flex-1 mx-2",children:n}),(0,r.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,r.jsxs)("span",{className:"text-[10px] text-muted-foreground opacity-60 font-mono",children:[e.message.split("\n").length," lines"]}),(0,r.jsx)("div",{className:"text-[10px] text-muted-foreground opacity-50",children:"↗"})]})]},t)});{let t=ey(e),s=e.filter(e=>!ej(e.message).requestId),a=[...t.map(e=>({type:"group",timestamp:e.startTime,group:e})),...s.map((e,t)=>({type:"log",timestamp:e.timestamp,log:e,originalIndex:t}))];return a.sort((e,t)=>t.timestamp-e.timestamp),(0,r.jsx)(r.Fragment,{children:a.map((e,t)=>{if("group"===e.type&&e.group){let t=e.group;return(0,r.jsxs)("div",{className:"border rounded-md bg-card",children:[(0,r.jsxs)("div",{className:`px-3 py-2 transition-colors border-l-4 flex items-center gap-2 ${"SUCCESS"===t.status?"bg-green-50/50 hover:bg-green-50 text-green-800 border-l-green-400 dark:bg-green-950/30 dark:hover:bg-green-950/50 dark:text-green-300 dark:border-l-green-600":"FAILED"===t.status?"bg-red-50/50 hover:bg-red-50 text-red-800 border-l-red-400 dark:bg-red-950/30 dark:hover:bg-red-950/50 dark:text-red-300 dark:border-l-red-600":"bg-blue-50/50 hover:bg-blue-50 text-blue-800 border-l-blue-400 dark:bg-blue-950/30 dark:hover:bg-blue-950/50 dark:text-blue-300 dark:border-l-blue-600"}`,children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 cursor-pointer",onClick:()=>ew(t.requestId),children:[en.has(t.requestId)?(0,r.jsx)(j.default,{width:"12",height:"12"}):(0,r.jsx)(y.default,{width:"12",height:"12"}),(0,r.jsx)("span",{className:"text-[9px] text-muted-foreground whitespace-nowrap font-mono opacity-60",children:new Date(t.startTime).toLocaleTimeString()})]}),(0,r.jsx)("div",{className:"font-medium text-xs flex-1 cursor-pointer",onClick:()=>ew(t.requestId),children:t.emailTarget?`Request for ${t.emailTarget}`:t.summary}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[t.emailTarget&&(0,r.jsx)(d.Button,{variant:"secondary",size:"sm",onClick:e=>{e.stopPropagation(),eL(t.emailTarget)},className:"h-5 px-2 text-[10px] bg-blue-100 hover:bg-blue-200 text-blue-700 dark:bg-blue-900 dark:hover:bg-blue-800 dark:text-blue-300",children:"📧 Email"}),(0,r.jsx)(d.Button,{variant:"secondary",size:"sm",onClick:e=>{e.stopPropagation(),eS(t.requestId)},className:"h-5 px-2 text-[10px] bg-purple-100 hover:bg-purple-200 text-purple-700 dark:bg-purple-900 dark:hover:bg-purple-800 dark:text-purple-300",children:"🔍 Filter"}),(0,r.jsx)(d.Button,{variant:"secondary",size:"sm",onClick:e=>{e.stopPropagation(),navigator.clipboard.writeText(t.requestId),w.toast.success("Request ID copied to clipboard")},className:"h-5 px-2 text-[10px] bg-muted hover:bg-muted/80 text-muted-foreground",title:`Copy request ID: ${t.requestId}`,children:"📋 Copy ID"}),(0,r.jsxs)("span",{className:"text-[9px] text-muted-foreground opacity-60 font-mono",children:[t.logs.length," logs"]}),(0,r.jsx)("span",{className:"text-[10px] px-1 py-0.5 rounded font-mono",children:"SUCCESS"===t.status?"✅":"FAILED"===t.status?"❌":"⏳"})]})]}),en.has(t.requestId)&&(0,r.jsx)("div",{className:"border-t bg-muted/30 space-y-0.5 p-2",children:t.logs.map((e,s)=>{ej(e.message);let a=e.message,l=e.message.split("	");l.length>=4&&(a=l.slice(3).join("	")),t.requestId&&(a=(a=(a=a.replace(RegExp(t.requestId,"g"),"").trim()).replace(/\|\s*\|/g,"|").replace(/\s+/g," ").replace(/^\|/,"").trim()).replace(/\|Lambda\s+-\s+/g,"Lambda - ")),ep(a);let d=ef(a);return(0,r.jsx)("div",{onClick:()=>eb(e),className:"px-2 py-1 hover:bg-card rounded cursor-pointer transition-colors text-xs",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("span",{className:"text-[9px] text-muted-foreground whitespace-nowrap flex-shrink-0 font-mono opacity-50",children:new Date(e.timestamp).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}),(0,r.jsx)("div",{className:"flex-1 break-words",children:d})]})},s)})})]},`group-${t.requestId}`)}if("log"===e.type&&e.log){let t=e.log,s=t.message,a=t.message.split("	");a.length>=4&&(s=a.slice(3).join("	"));let l=ej(t.message);l.requestId&&(s=(s=(s=s.replace(RegExp(l.requestId,"g"),"").trim()).replace(/\|\s*\|/g,"|").replace(/\s+/g," ").replace(/^\|/,"").trim()).replace(/\|Lambda\s+-\s+/g,"Lambda - "));let d=ep(s),n=ef(s);return(0,r.jsxs)("div",{onClick:()=>eb(t),className:`px-3 py-2 rounded-md cursor-pointer transition-colors border-l-2 h-8 flex items-center opacity-60 ${"error"===d.type?"bg-red-50/50 hover:bg-red-50 text-red-800 border-l-red-400 dark:bg-red-950/30 dark:hover:bg-red-950/50 dark:text-red-300 dark:border-l-red-600":"warning"===d.type?"bg-yellow-50/50 hover:bg-yellow-50 text-yellow-800 border-l-yellow-400 dark:bg-yellow-950/30 dark:hover:bg-yellow-950/50 dark:text-yellow-300 dark:border-l-yellow-600":"success"===d.type?"bg-green-50/50 hover:bg-green-50 text-green-800 border-l-green-400 dark:bg-green-950/30 dark:hover:bg-green-950/50 dark:text-green-300 dark:border-l-green-600":"bg-muted/50 hover:bg-muted border-l-border"}`,children:[(0,r.jsx)("span",{className:"text-[10px] text-muted-foreground whitespace-nowrap flex-shrink-0 font-mono opacity-60",children:new Date(t.timestamp).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}),(0,r.jsx)("div",{className:"font-medium text-xs flex-1 mx-2 break-words",children:n}),(0,r.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,r.jsxs)("span",{className:"text-[10px] text-muted-foreground opacity-60 font-mono",children:[t.message.split("\n").length," lines"]}),(0,r.jsx)("div",{className:"text-[10px] text-muted-foreground opacity-50",children:"↗"})]})]},`log-${e.originalIndex}`)}return null})})}})(),ee&&(0,r.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-muted-foreground border-t-transparent rounded-full animate-spin"}),"Loading more logs..."]})}),es&&!ee&&R.length>0&&(0,r.jsx)("div",{className:"text-center py-4",children:(0,r.jsx)(d.Button,{variant:"secondary",size:"sm",onClick:ex,children:"Load More Logs"})}),!es&&R.length>0&&(0,r.jsx)("div",{className:"text-center py-4 text-xs text-muted-foreground",children:"No more logs available"})]})})]}),(0,r.jsx)(n.TabsContent,{value:"streams",className:"space-y-4",children:(0,r.jsxs)(l.Card,{children:[(0,r.jsx)(l.CardHeader,{children:(0,r.jsx)(l.CardTitle,{children:"Log Streams"})}),(0,r.jsx)(l.CardContent,{children:(0,r.jsx)("div",{className:"space-y-2",children:0===I.length?(0,r.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No log streams found"}):I.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-mono text-sm",children:e.logStreamName}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Created: ",eh(e.creationTime)]})]}),(0,r.jsx)("div",{className:"text-right",children:e.lastEventTime&&(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Last event: ",eh(e.lastEventTime)]})})]},t))})})]})})]}),(0,r.jsx)(u.Sheet,{open:Z,onOpenChange:z,children:(0,r.jsxs)(u.SheetContent,{side:"bottom",className:"h-[80vh] flex flex-col",children:[(0,r.jsxs)(u.SheetHeader,{className:"pb-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(u.SheetTitle,{children:"Log Details"}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:G&&eh(G.timestamp)})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(f.default,{width:"16",height:"16",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),(0,r.jsx)(c.Input,{placeholder:"Search in log...",value:Q,onChange:e=>V(e.target.value),className:"pl-10"})]})]}),(0,r.jsx)(i.ScrollArea,{className:"flex-1",children:(0,r.jsx)("div",{className:"font-mono text-sm space-y-1 p-4",children:G&&(Q?ev().length>0?ev().map((e,t)=>(0,r.jsxs)("div",{className:"py-1 border-b border-border last:border-b-0",children:[(0,r.jsx)("span",{className:"text-muted-foreground text-xs mr-2",children:t+1}),(0,r.jsx)("span",{dangerouslySetInnerHTML:{__html:e.replace(RegExp(Q,"gi"),'<mark class="bg-yellow-200 text-yellow-900 px-1 rounded dark:bg-yellow-800 dark:text-yellow-100">$&</mark>')}})]},t)):(0,r.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:['No lines found matching "',Q,'"']}):G.message.split("\n").map((e,t)=>{let s=ep(e);return(0,r.jsxs)("div",{className:`py-1 border-b border-border last:border-b-0 ${"error"===s.type?"bg-red-50 text-red-700 dark:bg-red-950/30 dark:text-red-300":"warning"===s.type?"bg-yellow-50 text-yellow-700 dark:bg-yellow-950/30 dark:text-yellow-300":"success"===s.type?"bg-green-50 text-green-700 dark:bg-green-950/30 dark:text-green-300":""}`,children:[(0,r.jsx)("span",{className:"text-muted-foreground text-xs mr-2 select-none",children:t+1}),(0,r.jsx)("span",{className:"whitespace-pre-wrap break-words",children:e})]},t)}))})})]})})]}):(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("div",{children:(0,r.jsxs)("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[(0,r.jsx)(m.default,{width:"32",height:"32"}),"Lambda Monitoring"]})})}),(0,r.jsxs)(l.Card,{children:[(0,r.jsx)(l.CardHeader,{children:(0,r.jsx)(l.CardTitle,{className:"text-destructive",children:"AWS Connection Error"})}),(0,r.jsxs)(l.CardContent,{children:[(0,r.jsx)("p",{className:"text-muted-foreground mb-4",children:F||"Unable to connect to AWS services. Please check your AWS credentials and configuration."}),(0,r.jsxs)(d.Button,{onClick:eu,children:[(0,r.jsx)(g.default,{width:"16",height:"16",className:"mr-2"}),"Retry Connection"]})]})]})]})}}}]);

//# sourceMappingURL=3eb219e7c8d499aa.js.map