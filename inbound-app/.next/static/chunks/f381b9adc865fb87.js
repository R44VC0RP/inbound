(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{921361:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({Card:()=>t,CardContent:()=>d,CardDescription:()=>o,CardFooter:()=>l,CardHeader:()=>r,CardTitle:()=>a});var n=e.i(731636),i=e.i(838653),s=e.i(718331);let t=(0,i.forwardRef)(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));t.displayName="Card";let r=(0,i.forwardRef)(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));r.displayName="CardHeader";let a=(0,i.forwardRef)(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight",e),...t}));a.displayName="CardTitle";let o=(0,i.forwardRef)(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let d=(0,i.forwardRef)(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent";let l=(0,i.forwardRef)(({className:e,...t},r)=>(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t}));l.displayName="CardFooter"}},870517:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({default:()=>t});var n=e.i(731636);let t=function({fill:e="currentColor",secondaryfill:t,title:r="badge 13",...i}){return t=t||e,(0,n.jsxs)("svg",{height:"18",width:"18",...i,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("title",{children:r}),(0,n.jsx)("g",{fill:e,children:(0,n.jsx)("path",{d:"M16.586,8.004L10.005,3.011c-.38-.288-.883-.335-1.311-.124-.429,.213-.694,.642-.694,1.12v1.993H2.75c-.965,0-1.75,.785-1.75,1.75v2.5c0,.965,.785,1.75,1.75,1.75h5.25v1.993c0,.478,.266,.907,.694,1.12,.177,.088,.368,.131,.557,.131,.267,0,.531-.086,.754-.255l6.581-4.994c.314-.238,.494-.601,.494-.996s-.18-.757-.494-.996Z",fill:e})})]})}}},561657:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({default:()=>t});var n=e.i(731636);let t=function({fill:e="currentColor",secondaryfill:t,title:r="badge 13",...i}){return t=t||e,(0,n.jsxs)("svg",{height:"18",width:"18",...i,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("title",{children:r}),(0,n.jsx)("g",{fill:e,children:(0,n.jsx)("path",{d:"M9,1C4.589,1,1,4.589,1,9s3.589,8,8,8,8-3.589,8-8S13.411,1,9,1Zm3.843,5.708l-4.25,5.5c-.136,.176-.343,.283-.565,.291-.01,0-.019,0-.028,0-.212,0-.415-.09-.558-.248l-2.25-2.5c-.277-.308-.252-.782,.056-1.06,.309-.276,.781-.252,1.06,.056l1.648,1.832,3.701-4.789c.253-.328,.725-.388,1.052-.135,.328,.253,.388,.724,.135,1.052Z",fill:e})})]})}}},520860:e=>{"use strict";var{g:t,__dirname:r}=e;e.s({computeRoute:()=>l,default:()=>p,inject:()=>u,pageview:()=>f,track:()=>m}),e.i(922271);var n=()=>{window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)})};function i(){return"undefined"!=typeof window}function s(){return"production"}function a(){return(i()?window.vam:s())||"production"}function o(){return"production"===a()}function d(){return"development"===a()}function l(e,t){if(!e||!t)return e;let r=e;try{let e=Object.entries(t);for(let[t,n]of e)if(!Array.isArray(n)){let e=c(n);e.test(r)&&(r=r.replace(e,`/[${t}]`))}for(let[t,n]of e)if(Array.isArray(n)){let e=c(n.join("/"));e.test(r)&&(r=r.replace(e,`/[...${t}]`))}return r}catch(t){return e}}function c(e){return RegExp(`/${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(?=[/?#]|$)`)}function u(e={debug:!0}){var t;if(!i())return;!function(e="auto"){if("auto"===e){window.vam=s();return}window.vam=e}(e.mode),n(),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));let r=e.scriptSrc?e.scriptSrc:d()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js";if(document.head.querySelector(`script[src*="${r}"]`))return;let a=document.createElement("script");a.src=r,a.defer=!0,a.dataset.sdkn="@vercel/analytics"+(e.framework?`/${e.framework}`:""),a.dataset.sdkv="1.5.0",e.disableAutoTrack&&(a.dataset.disableAutoTrack="1"),e.endpoint?a.dataset.endpoint=e.endpoint:e.basePath&&(a.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(a.dataset.dsn=e.dsn),a.onerror=()=>{let e=d()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${r}. ${e}`)},d()&&!1===e.debug&&(a.dataset.debug="false"),document.head.appendChild(a)}function m(e,t,r){var n,s;if(!i()){let e="[Vercel Web Analytics] Please import `track` from `@vercel/analytics/server` when using this function in a server environment";if(o())console.warn(e);else throw Error(e);return}if(!t){null==(n=window.va)||n.call(window,"event",{name:e,options:r});return}try{let n=function(e,t){if(!e)return;let r=e,n=[];for(let[i,s]of Object.entries(e))"object"==typeof s&&null!==s&&(t.strip?r=function(e,{[e]:t,...r}){return r}(i,r):n.push(i));if(n.length>0&&!t.strip)throw Error(`The following properties are not valid: ${n.join(", ")}. Only strings, numbers, booleans, and null are allowed.`);return r}(t,{strip:o()});null==(s=window.va)||s.call(window,"event",{name:e,data:n,options:r})}catch(e){e instanceof Error&&d()&&console.error(e)}}function f({route:e,path:t}){var r;null==(r=window.va)||r.call(window,"pageview",{route:e,path:t})}var p={inject:u,track:m,computeRoute:l}},602833:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({CustomInboundIcon:()=>t,default:()=>r});var n=e.i(731636);let t=({size:e=64,backgroundColor:t="#A50A3E",Icon:r,text:i,iconScale:s=.5,iconColor:a="white",className:o=""})=>{let d=e*s,l=.3*e,c=.4*e;return(0,n.jsx)("div",{className:`inline-flex items-center justify-center ${o}`,style:{width:e,height:e,backgroundColor:t,borderRadius:l,background:`linear-gradient(180deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 100%), ${t}`,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:r?(0,n.jsx)(r,{width:d,height:d,style:{color:a,filter:"drop-shadow(0px 1px 2px rgba(0,0,0,0.1))"}}):i?(0,n.jsx)("span",{style:{fontSize:c,fontWeight:"bold",color:a,textTransform:"uppercase",letterSpacing:"0.5px",textShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:i.slice(0,2)}):null})},r=t}},280783:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({default:()=>t});var n=e.i(731636);let t=function({fill:e="currentColor",secondaryfill:t,title:r="badge 13",...i}){return t=t||e,(0,n.jsxs)("svg",{height:"18",width:"18",...i,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("title",{children:r}),(0,n.jsx)("g",{fill:e,children:(0,n.jsx)("path",{d:"M14.868,6.191c-.213-.426-.642-.691-1.118-.691h-2.653l1.088-2.798c.149-.385,.099-.818-.134-1.159-.233-.34-.619-.543-1.031-.543H6.85c-.522,0-.994,.329-1.174,.819l-2.385,6.501c-.14,.383-.083,.812,.15,1.146,.234,.334,.617,.533,1.024,.533h3.79l-1.727,6.044c-.1,.348,.063,.717,.387,.878,.107,.053,.221,.078,.334,.078,.229,0,.454-.106,.6-.3L14.751,7.5c.285-.381,.33-.882,.117-1.309Z",fill:e})})]})}}},649879:e=>{"use strict";var{g:t,__dirname:r}=e;e.s({checkMigrationNeeded:()=>i});var n=e.i(286714),i=(0,n.createServerReference)("009bc667e4551b976ae0c15e50cbf919762c4f6f91",n.callServer,void 0,n.findSourceMapURL,"checkMigrationNeeded")},92794:e=>{"use strict";var{g:t,__dirname:r}=e;e.s({migrateWebhooksToEndpoints:()=>i});var n=e.i(286714),i=(0,n.createServerReference)("00a849d61ace5e9280f8827e33dcb81c884d88af53",n.callServer,void 0,n.findSourceMapURL,"migrateWebhooksToEndpoints")},994579:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({useEndpointsQuery:()=>t});var n=e.i(645643),i=e.i(628662),s=e.i(838653),a=e.i(649879),o=e.i(92794);async function d(){let e=await fetch("/api/v2/endpoints");if(!e.ok)throw Error("Failed to fetch endpoints");return(await e.json()).data||[]}let t=()=>{let e=(0,i.useQueryClient)(),[t,r]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),u=(0,n.useQuery)({queryKey:["endpoints"],queryFn:d,staleTime:3e5});return(0,s.useEffect)(()=>{(async()=>{if(u.isSuccess&&u.data?.length===0&&!t&&!l)try{console.log("🔍 Checking if webhook migration is needed...");let t=await (0,a.checkMigrationNeeded)();if(t.success&&t.migrationNeeded){c(!0),console.log("🚀 Starting automatic webhook migration...");let t=await (0,o.migrateWebhooksToEndpoints)();t.success?(console.log(`✅ Migration completed: ${t.migratedCount} webhooks migrated`),e.invalidateQueries({queryKey:["endpoints"]})):console.error("❌ Migration failed:",t.error)}else console.log("ℹ️ No migration needed")}catch(e){console.error("❌ Error during migration check/process:",e)}finally{r(!0),c(!1)}})()},[u.isSuccess,u.data,t,l,e]),{...u,migrationInProgress:l,migrationChecked:t}}}},706563:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({useCreateEndpointMutation:()=>t});var n=e.i(659544),i=e.i(628662),s=e.i(520860);async function a(e){let t=await fetch("/api/v2/endpoints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json()).error||"Failed to create endpoint");return await t.json()}let t=()=>{let e=(0,i.useQueryClient)();return(0,n.useMutation)({mutationFn:a,onSuccess:t=>{(0,s.track)("Endpoint Created",{endpointType:t.type,endpointName:t.name,endpointId:t.id}),e.invalidateQueries({queryKey:["endpoints"]})}})}}},577526:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({useUpdateEndpointMutation:()=>t});var n=e.i(659544),i=e.i(628662);async function s(e){let{id:t,data:r}=e,n=await fetch(`/api/v2/endpoints/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok)throw Error((await n.json()).error||"Failed to update endpoint");return await n.json()}let t=()=>{let e=(0,i.useQueryClient)();return(0,n.useMutation)({mutationFn:s,onSuccess:()=>{e.invalidateQueries({queryKey:["endpoints"]})}})}}},94173:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({useDeleteEndpointMutation:()=>t});var n=e.i(659544),i=e.i(628662),s=e.i(520860);async function a(e){let t=await fetch(`/api/v2/endpoints/${e}`,{method:"DELETE"});if(!t.ok)throw Error((await t.json()).error||"Failed to delete endpoint");return await t.json()}let t=()=>{let e=(0,i.useQueryClient)();return(0,n.useMutation)({mutationFn:a,onSuccess:(t,r)=>{(0,s.track)("Endpoint Deleted",{endpointId:r}),e.invalidateQueries({queryKey:["endpoints"]})}})}}},302527:e=>{"use strict";var{g:t,__dirname:r}=e;e.s({deleteMultipleEndpoints:()=>i});var n=e.i(286714),i=(0,n.createServerReference)("40515f2a1a45eae61cc5c66b637f7b7f5d38b98ad9",n.callServer,void 0,n.findSourceMapURL,"deleteMultipleEndpoints")},517627:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({useDeleteMultipleEndpointsMutation:()=>t});var n=e.i(659544),i=e.i(628662),s=e.i(302527);let t=()=>{let e=(0,i.useQueryClient)();return(0,n.useMutation)({mutationFn:s.deleteMultipleEndpoints,onSuccess:()=>{e.invalidateQueries({queryKey:["endpoints"]})}})}}},675338:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({useTestEndpointMutation:()=>t});var n=e.i(659544);async function i(e){let{id:t,webhookFormat:r}=e,n=await fetch(`/api/v2/endpoints/${t}/test`,{method:"POST",headers:{"Content-Type":"application/json"},body:r?JSON.stringify({webhookFormat:r}):void 0});if(!n.ok)throw Error((await n.json()).error||"Failed to test endpoint");return await n.json()}let t=()=>(0,n.useMutation)({mutationFn:i})}},105390:e=>{"use strict";var{g:t,__dirname:r}=e;{e.s({useMigrationMutation:()=>t});var n=e.i(659544),i=e.i(628662),s=e.i(92794);let t=()=>{let e=(0,i.useQueryClient)();return(0,n.useMutation)({mutationFn:s.migrateWebhooksToEndpoints,onSuccess:()=>{e.invalidateQueries({queryKey:["endpoints"]})}})}}},524230:e=>{"use strict";var{g:t,__dirname:r}=e;e.s({}),e.i(994579),e.i(706563),e.i(577526),e.i(94173),e.i(517627),e.i(675338),e.i(105390)},486973:e=>{"use strict";var{g:t,__dirname:r}=e;e.s({}),e.i(994579),e.i(706563),e.i(577526),e.i(94173),e.i(517627),e.i(675338),e.i(105390),e.i(524230)},526925:e=>{"use strict";var{g:t,__dirname:r}=e;e.s({completeOnboarding:()=>i});var n=e.i(286714),i=(0,n.createServerReference)("40d01e1907c9b1aadfc6cf61c68b9fb60a9d17348f",n.callServer,void 0,n.findSourceMapURL,"completeOnboarding")},494002:e=>{"use strict";var{g:t,__dirname:r}=e;e.s({default:()=>y});var n=e.i(731636),i=e.i(838653),s=e.i(395372),a=e.i(555366),o=e.i(921361),d=e.i(834953),l=e.i(210339),c=e.i(451081),u=e.i(379225),m=e.i(280783),f=e.i(561657),p=e.i(870517),g=e.i(242148),h=e.i(602833);e.i(486973);var x=e.i(706563),b=e.i(994579),v=e.i(628662),w=e.i(55496),j=e.i(526925);function y(){let{data:e,isPending:t}=(0,s.useSession)(),r=(0,a.useRouter)(),y=(0,v.useQueryClient)(),[N,C]=(0,i.useState)(!1),[S,k]=(0,i.useState)(!1),[E,M]=(0,i.useState)(!1),T=(0,x.useCreateEndpointMutation)(),{data:$=[],isLoading:A}=(0,b.useEndpointsQuery)(),R=$.length>0;(0,i.useEffect)(()=>{t||e?.user||r.push("/login")},[e,t,r]);let F=async()=>{if(e?.user?.email){k(!0);try{let t=e.user.name||e.user.email.split("@")[0]||"User",r={name:`${t} Email Endpoint`,type:"email",description:"Default email forwarding endpoint created during onboarding",config:{forwardTo:e.user.email,includeAttachments:!0,subjectPrefix:""}};await T.mutateAsync(r),M(!0),w.toast.success("Email endpoint created successfully!")}catch(e){console.error("Error creating endpoint:",e),w.toast.error(e instanceof Error?e.message:"Failed to create endpoint")}finally{k(!1)}}},I=async()=>{if(e?.user?.id){C(!0);try{let t=await (0,j.completeOnboarding)(e.user.id);if(!t.success)throw Error(t.error||"Failed to complete onboarding");y.invalidateQueries({queryKey:["onboarding-status"]}),w.toast.success("Welcome to Inbound! 🎉"),r.push("/add?onboarding=true")}catch(e){console.error("Error completing onboarding:",e),w.toast.error(e instanceof Error?e.message:"Failed to complete onboarding")}finally{C(!1)}}};return t?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e?.user?(0,n.jsx)("div",{className:"min-h-screen p-4 font-outfit",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("h2",{className:"text-2xl font-semibold text-gray-900 mb-1 tracking-tight",children:["Welcome to Inbound, ",e.user.name||e.user.email?.split("@")[0],"!"]}),(0,n.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"Transform any domain into a powerful email infrastructure"})]}),(0,n.jsx)(o.Card,{className:"bg-blue-500/10 border-blue-500/30 rounded-xl mb-6",children:(0,n.jsxs)(o.CardContent,{className:"p-6",children:[(0,n.jsx)("h3",{className:"font-semibold text-blue-300 mb-3",children:"How Inbound Works"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm text-blue-200",children:[(0,n.jsxs)("p",{children:["• ",(0,n.jsx)("strong",{children:"Add your domain"})," - Connect any domain you own (example.com)"]}),(0,n.jsxs)("p",{children:["• ",(0,n.jsx)("strong",{children:"Configure DNS"})," - Simple DNS setup to route emails to Inbound"]}),(0,n.jsxs)("p",{children:["• ",(0,n.jsx)("strong",{children:"Create endpoints"})," - Set up email forwarding, webhooks, or groups"]}),(0,n.jsxs)("p",{children:["• ",(0,n.jsx)("strong",{children:"Receive emails"})," - Get emails at any address @yourdomain.com"]})]})]})}),(0,n.jsxs)("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[(0,n.jsx)(o.Card,{className:"bg-card border-border rounded-xl",children:(0,n.jsxs)(o.CardContent,{className:"p-6 text-center",children:[(0,n.jsx)(h.CustomInboundIcon,{Icon:u.default,size:40,backgroundColor:"#3b82f6",className:"mx-auto mb-3"}),(0,n.jsx)("h3",{className:"font-semibold text-foreground mb-2",children:"Add Domain"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Connect your domain to start receiving emails"})]})}),(0,n.jsx)(o.Card,{className:"bg-card border-border rounded-xl",children:(0,n.jsxs)(o.CardContent,{className:"p-6 text-center",children:[(0,n.jsx)(h.CustomInboundIcon,{Icon:c.default,size:40,backgroundColor:"#10b981",className:"mx-auto mb-3"}),(0,n.jsx)("h3",{className:"font-semibold text-foreground mb-2",children:"Create Endpoint"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"Set up email forwarding or webhooks"}),R||E?(0,n.jsxs)(l.Badge,{className:"bg-green-100 text-green-800",children:[(0,n.jsx)(f.default,{className:"h-3 w-3 mr-1"}),R?"Already Created":"Created"]}):(0,n.jsxs)(d.Button,{onClick:F,disabled:S||A,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[(0,n.jsx)(g.default,{className:"h-3 w-3 mr-1"}),S?"Creating...":"Create"]})]})}),(0,n.jsx)(o.Card,{className:"bg-card border-border rounded-xl",children:(0,n.jsxs)(o.CardContent,{className:"p-6 text-center",children:[(0,n.jsx)(h.CustomInboundIcon,{Icon:m.default,size:40,backgroundColor:"#8b5cf6",className:"mx-auto mb-3"}),(0,n.jsx)("h3",{className:"font-semibold text-foreground mb-2",children:"Advanced"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Webhooks, groups, and integrations"})]})})]}),(0,n.jsx)(o.Card,{className:"bg-card border-border rounded-xl mb-6",children:(0,n.jsxs)(o.CardContent,{className:"p-6",children:[(0,n.jsx)("h3",{className:"font-semibold text-foreground mb-3",children:"Next Steps"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm text-muted-foreground",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:`w-2 h-2 rounded-full ${R||E?"bg-green-500":"bg-blue-500"}`}),(0,n.jsx)("span",{className:R||E?"line-through text-muted-foreground/60":"",children:"Create your first endpoint above"}),(R||E)&&(0,n.jsx)("span",{className:"text-green-500 text-xs",children:"✓ Done"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,n.jsx)("span",{children:"Add and verify your domain"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-muted-foreground/40 rounded-full"}),(0,n.jsx)("span",{children:"Configure email addresses"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 bg-muted-foreground/40 rounded-full"}),(0,n.jsx)("span",{children:"Start receiving emails at your domain"})]})]})]})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(d.Button,{onClick:I,disabled:N,size:"lg",className:"bg-blue-600 hover:bg-blue-700 text-white",children:N?"Completing setup...":(0,n.jsxs)(n.Fragment,{children:["Continue to Domain Setup",(0,n.jsx)(p.default,{className:"h-4 w-4 ml-2"})]})}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"This will mark your onboarding as complete and take you to add your first domain."})]})]})}):null}}}]);

//# sourceMappingURL=fe3fb6ef70ac645b.js.map