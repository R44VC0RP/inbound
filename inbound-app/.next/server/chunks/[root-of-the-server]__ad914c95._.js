module.exports={929549:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},983943:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},86103:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},945935:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},348629:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("@opentelemetry/api",()=>require("@opentelemetry/api"))},76569:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:events",()=>require("node:events"))},804713:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("util",()=>require("util"))},87485:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("child_process",()=>require("child_process"))},420467:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("events",()=>require("events"))},936121:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:util",()=>require("node:util"))},681635:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:http",()=>require("node:http"))},866098:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:https",()=>require("node:https"))},580767:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:buffer",()=>require("node:buffer"))},329295:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("crypto",()=>require("crypto"))},62445:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("http",()=>require("http"))},348388:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("https",()=>require("https"))},591032:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:crypto",()=>require("node:crypto"))},909834:e=>{"use strict";var{g:s,__dirname:r}=e;e.s({DELIVERY_STATUS:()=>i.DELIVERY_STATUS,DELIVERY_TYPES:()=>i.DELIVERY_TYPES,DOMAIN_STATUS:()=>i.DOMAIN_STATUS,EMAIL_STATUS:()=>i.EMAIL_STATUS,ENDPOINT_TYPES:()=>i.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>i.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>i.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>i.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>i.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>i.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>i.WEBHOOK_STATUS,account:()=>t.account,apikey:()=>t.apikey,blockedEmails:()=>i.blockedEmails,domainDnsRecords:()=>i.domainDnsRecords,emailAddresses:()=>i.emailAddresses,emailDomains:()=>i.emailDomains,emailGroups:()=>i.emailGroups,endpointDeliveries:()=>i.endpointDeliveries,endpoints:()=>i.endpoints,parsedEmails:()=>i.parsedEmails,receivedEmails:()=>i.receivedEmails,sentEmails:()=>i.sentEmails,sesEvents:()=>i.sesEvents,session:()=>t.session,structuredEmails:()=>i.structuredEmails,subscriptions:()=>i.subscriptions,user:()=>t.user,userAccounts:()=>i.userAccounts,userOnboarding:()=>i.userOnboarding,verification:()=>t.verification,vipAllowedSenders:()=>i.vipAllowedSenders,vipConfigs:()=>i.vipConfigs,vipEmailAttempts:()=>i.vipEmailAttempts,vipPaymentSessions:()=>i.vipPaymentSessions,webhookDeliveries:()=>i.webhookDeliveries,webhooks:()=>i.webhooks});var t=e.i(594120),i=e.i(55379)},436754:e=>{"use strict";var{g:s,__dirname:r}=e;e.s({DELIVERY_STATUS:()=>t.DELIVERY_STATUS,DELIVERY_TYPES:()=>t.DELIVERY_TYPES,DOMAIN_STATUS:()=>t.DOMAIN_STATUS,EMAIL_STATUS:()=>t.EMAIL_STATUS,ENDPOINT_TYPES:()=>t.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>t.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>t.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>t.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>t.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>t.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>t.WEBHOOK_STATUS,account:()=>t.account,apikey:()=>t.apikey,blockedEmails:()=>t.blockedEmails,domainDnsRecords:()=>t.domainDnsRecords,emailAddresses:()=>t.emailAddresses,emailDomains:()=>t.emailDomains,emailGroups:()=>t.emailGroups,endpointDeliveries:()=>t.endpointDeliveries,endpoints:()=>t.endpoints,parsedEmails:()=>t.parsedEmails,receivedEmails:()=>t.receivedEmails,sentEmails:()=>t.sentEmails,sesEvents:()=>t.sesEvents,session:()=>t.session,structuredEmails:()=>t.structuredEmails,subscriptions:()=>t.subscriptions,user:()=>t.user,userAccounts:()=>t.userAccounts,userOnboarding:()=>t.userOnboarding,verification:()=>t.verification,vipAllowedSenders:()=>t.vipAllowedSenders,vipConfigs:()=>t.vipConfigs,vipEmailAttempts:()=>t.vipEmailAttempts,vipPaymentSessions:()=>t.vipPaymentSessions,webhookDeliveries:()=>t.webhookDeliveries,webhooks:()=>t.webhooks}),e.i(468686);var t=e.i(909834)},309386:function(e){var{g:s,__dirname:r,m:t,e:i}=e},295215:e=>{"use strict";var{g:s,__dirname:r}=e;e.s({GET:()=>p,POST:()=>c});var t=e.i(125427),i=e.i(402168),o=e.i(998322),n=e.i(557440);e.i(468686);var a=e.i(55379),d=e.i(176825),u=e.i(318812);async function p(e){try{console.log("📋 GET /api/v1/webhooks - Fetching webhooks (compatibility layer)");let e=await i.auth.api.getSession({headers:await (0,o.headers)()});if(!e?.user?.id)return console.warn("❌ GET /api/v1/webhooks - Unauthorized request"),t.NextResponse.json({error:"Unauthorized"},{status:401});let s=await n.db.select().from(a.endpoints).where((0,d.and)((0,d.eq)(a.endpoints.userId,e.user.id),(0,d.eq)(a.endpoints.type,"webhook"))).orderBy(a.endpoints.createdAt),r=await n.db.select().from(a.webhooks).where((0,d.eq)(a.webhooks.userId,e.user.id)).orderBy(a.webhooks.createdAt),u=s.map(e=>{let s=JSON.parse(e.config);return{id:e.id,name:e.name,url:s.url,secret:s.secret||null,isActive:e.isActive,description:e.description,headers:s.headers?JSON.stringify(s.headers):null,timeout:s.timeout||30,retryAttempts:s.retryAttempts||3,lastUsed:null,totalDeliveries:0,successfulDeliveries:0,failedDeliveries:0,createdAt:e.createdAt,updatedAt:e.updatedAt,userId:e.userId,_source:"endpoint"}}),p=r.map(e=>({...e,_source:"legacy"})),c=[...u,...p];return console.log(`✅ GET /api/v1/webhooks - Retrieved ${c.length} webhooks (${s.length} from endpoints, ${r.length} legacy)`),t.NextResponse.json({webhooks:c,_deprecationNotice:"This API is deprecated. Please migrate to /api/v1/endpoints for enhanced functionality."})}catch(e){return console.error("❌ GET /api/v1/webhooks - Error:",e),t.NextResponse.json({error:"Failed to fetch webhooks",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function c(e){try{console.log("📝 POST /api/v1/webhooks - Creating webhook (compatibility layer)");let s=await i.auth.api.getSession({headers:await (0,o.headers)()});if(!s?.user?.id)return console.warn("❌ POST /api/v1/webhooks - Unauthorized request"),t.NextResponse.json({error:"Unauthorized"},{status:401});let r=await e.json();if(!r.name||!r.url)return t.NextResponse.json({error:"Missing required fields: name, url"},{status:400});try{new URL(r.url)}catch{return t.NextResponse.json({error:"Invalid URL format"},{status:400})}console.log(`📝 POST /api/v1/webhooks - Creating webhook endpoint: ${r.name}`);let d={url:r.url,secret:r.secret||void 0,headers:r.headers?JSON.parse(r.headers):void 0,timeout:r.timeout||30,retryAttempts:r.retryAttempts||3},p={id:(0,u.nanoid)(),name:r.name,type:"webhook",config:JSON.stringify(d),description:r.description||null,userId:s.user.id,isActive:void 0===r.isActive||r.isActive,createdAt:new Date,updatedAt:new Date},[c]=await n.db.insert(a.endpoints).values(p).returning(),l={id:c.id,name:c.name,url:d.url,secret:d.secret||null,isActive:c.isActive,description:c.description,headers:d.headers?JSON.stringify(d.headers):null,timeout:d.timeout,retryAttempts:d.retryAttempts,lastUsed:null,totalDeliveries:0,successfulDeliveries:0,failedDeliveries:0,createdAt:c.createdAt,updatedAt:c.updatedAt,userId:c.userId};return console.log(`✅ POST /api/v1/webhooks - Successfully created webhook endpoint ${c.id}`),t.NextResponse.json({webhook:l,_deprecationNotice:"This API is deprecated. Please migrate to /api/v1/endpoints for enhanced functionality."},{status:201})}catch(e){return console.error("❌ POST /api/v1/webhooks - Error:",e),t.NextResponse.json({error:"Failed to create webhook",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}},333464:e=>{"use strict";var{g:s,__dirname:r}=e;{e.s({patchFetch:()=>a,routeModule:()=>s,serverHooks:()=>u,workAsyncStorage:()=>r,workUnitAsyncStorage:()=>d});var t=e.i(854885),i=e.i(814689),o=e.i(25402),n=e.i(295215);let s=new t.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/v1/webhooks/route",pathname:"/api/v1/webhooks",filename:"route",bundlePath:""},resolvedPagePath:"[project]/app/api/v1/webhooks/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:r,workUnitAsyncStorage:d,serverHooks:u}=s;function a(){return(0,o.patchFetch)({workAsyncStorage:r,workUnitAsyncStorage:d})}}},993477:e=>{var{g:s,__dirname:r}=e;e.v(s=>Promise.all(["server/chunks/[root-of-the-server]__a00d8608._.js","server/chunks/node_modules_10ae7a2d._.js"].map(s=>e.l(s))).then(()=>s(611487)))}};

//# sourceMappingURL=%5Broot-of-the-server%5D__ad914c95._.js.map