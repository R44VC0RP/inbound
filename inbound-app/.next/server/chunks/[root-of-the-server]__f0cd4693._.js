module.exports={929549:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},983943:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},86103:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},945935:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},348629:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("@opentelemetry/api",()=>require("@opentelemetry/api"))},76569:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("node:events",()=>require("node:events"))},804713:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("util",()=>require("util"))},87485:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("child_process",()=>require("child_process"))},420467:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("events",()=>require("events"))},936121:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("node:util",()=>require("node:util"))},681635:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("node:http",()=>require("node:http"))},866098:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("node:https",()=>require("node:https"))},580767:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("node:buffer",()=>require("node:buffer"))},329295:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("crypto",()=>require("crypto"))},62445:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("http",()=>require("http"))},348388:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("https",()=>require("https"))},591032:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("node:crypto",()=>require("node:crypto"))},909834:e=>{"use strict";var{g:r,__dirname:o}=e;e.s({DELIVERY_STATUS:()=>t.DELIVERY_STATUS,DELIVERY_TYPES:()=>t.DELIVERY_TYPES,DOMAIN_STATUS:()=>t.DOMAIN_STATUS,EMAIL_STATUS:()=>t.EMAIL_STATUS,ENDPOINT_TYPES:()=>t.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>t.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>t.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>t.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>t.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>t.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>t.WEBHOOK_STATUS,account:()=>i.account,apikey:()=>i.apikey,blockedEmails:()=>t.blockedEmails,domainDnsRecords:()=>t.domainDnsRecords,emailAddresses:()=>t.emailAddresses,emailDomains:()=>t.emailDomains,emailGroups:()=>t.emailGroups,endpointDeliveries:()=>t.endpointDeliveries,endpoints:()=>t.endpoints,parsedEmails:()=>t.parsedEmails,receivedEmails:()=>t.receivedEmails,sentEmails:()=>t.sentEmails,sesEvents:()=>t.sesEvents,session:()=>i.session,structuredEmails:()=>t.structuredEmails,subscriptions:()=>t.subscriptions,user:()=>i.user,userAccounts:()=>t.userAccounts,userOnboarding:()=>t.userOnboarding,verification:()=>i.verification,vipAllowedSenders:()=>t.vipAllowedSenders,vipConfigs:()=>t.vipConfigs,vipEmailAttempts:()=>t.vipEmailAttempts,vipPaymentSessions:()=>t.vipPaymentSessions,webhookDeliveries:()=>t.webhookDeliveries,webhooks:()=>t.webhooks});var i=e.i(594120),t=e.i(55379)},436754:e=>{"use strict";var{g:r,__dirname:o}=e;e.s({DELIVERY_STATUS:()=>i.DELIVERY_STATUS,DELIVERY_TYPES:()=>i.DELIVERY_TYPES,DOMAIN_STATUS:()=>i.DOMAIN_STATUS,EMAIL_STATUS:()=>i.EMAIL_STATUS,ENDPOINT_TYPES:()=>i.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>i.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>i.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>i.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>i.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>i.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>i.WEBHOOK_STATUS,account:()=>i.account,apikey:()=>i.apikey,blockedEmails:()=>i.blockedEmails,domainDnsRecords:()=>i.domainDnsRecords,emailAddresses:()=>i.emailAddresses,emailDomains:()=>i.emailDomains,emailGroups:()=>i.emailGroups,endpointDeliveries:()=>i.endpointDeliveries,endpoints:()=>i.endpoints,parsedEmails:()=>i.parsedEmails,receivedEmails:()=>i.receivedEmails,sentEmails:()=>i.sentEmails,sesEvents:()=>i.sesEvents,session:()=>i.session,structuredEmails:()=>i.structuredEmails,subscriptions:()=>i.subscriptions,user:()=>i.user,userAccounts:()=>i.userAccounts,userOnboarding:()=>i.userOnboarding,verification:()=>i.verification,vipAllowedSenders:()=>i.vipAllowedSenders,vipConfigs:()=>i.vipConfigs,vipEmailAttempts:()=>i.vipEmailAttempts,vipPaymentSessions:()=>i.vipPaymentSessions,webhookDeliveries:()=>i.webhookDeliveries,webhooks:()=>i.webhooks}),e.i(468686);var i=e.i(909834)},362474:function(e){var{g:r,__dirname:o,m:i,e:t}=e;i.exports=e.x("dns",()=>require("dns"))},719797:e=>{"use strict";var{g:r,__dirname:o}=e;{e.s({checkDomainCanReceiveEmails:()=>a,checkMultipleDomainsCanReceiveEmails:()=>l,detectDomainProvider:()=>s,getDetailedMxInfo:()=>d,getDetailedProviderInfo:()=>c,verifyDnsRecords:()=>T,verifyMxRecord:()=>m,verifyMxRecordWithFallback:()=>v,verifyTxtRecord:()=>u,verifyTxtRecordWithFallback:()=>g});var i=e.i(362474);let r={cloudflare:{name:"Cloudflare",icon:"cloudflare",patterns:["cloudflare.com","ns.cloudflare.com","cloudflare.net"]},namecheap:{name:"Namecheap",icon:"namecheap",patterns:["registrar-servers.com","namecheap.com","namecheaphosting.com"]},godaddy:{name:"GoDaddy",icon:"godaddy",patterns:["domaincontrol.com","godaddy.com","secureserver.net"]},route53:{name:"AWS Route 53",icon:"aws",patterns:["awsdns","amazonaws.com","awsdns-"]},google:{name:"Google Domains",icon:"google",patterns:["googledomains.com","google.com","googlehosted.com"]},vercel:{name:"Vercel",icon:"vercel",patterns:["vercel-dns.com","vercel.app"]},digitalocean:{name:"DigitalOcean",icon:"digitalocean",patterns:["digitalocean.com","ns1.digitalocean.com","ns2.digitalocean.com","ns3.digitalocean.com"]},netlify:{name:"Netlify",icon:"netlify",patterns:["netlify.com","dns1.p01.nsone.net","dns2.p01.nsone.net"]},dnsimple:{name:"DNSimple",icon:"dnsimple",patterns:["dnsimple.com","ns1.dnsimple.com","ns2.dnsimple.com"]},hover:{name:"Hover",icon:"hover",patterns:["hover.com","ns1.hover.com","ns2.hover.com"]},porkbun:{name:"Porkbun",icon:"porkbun",patterns:["porkbun.com","curitiba.porkbun.com","fortaleza.porkbun.com"]},squarespace:{name:"Squarespace",icon:"squarespace",patterns:["squarespace.com","ext-dns.squarespace.com"]}};function t(e){let r=e.split("."),o=[];for(let e=1;e<r.length;e++)o.push(r.slice(e).join("."));return o}async function s(e){let r=await n(e);if(r&&r.detected)return r;for(let r of t(e))try{let e=await n(r);if(e&&e.detected)return{...e,confidence:"high"===e.confidence?"medium":"low"}}catch(e){continue}return r||{name:"DNS Provider",icon:"globe",detected:!1,confidence:"low"}}async function n(e){try{let o=await i.promises.resolveNs(e);for(let[e,i]of Object.entries(r))for(let e of o)for(let r of i.patterns)if(e.toLowerCase().includes(r.toLowerCase()))return{name:i.name,icon:i.icon,detected:!0,confidence:"high"};if(o.length>0)return{name:"Custom DNS Provider",icon:"globe",detected:!1,confidence:"medium"};return null}catch(e){return null}}async function a(e){var r;let o={domain:e,canReceiveEmails:!1,hasMxRecords:!1,timestamp:new Date};if(r=e,!/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(r)||!(r.length<=253))return o.error="Invalid domain format",o;try{let r=await s(e);r&&(o.provider=r)}catch(e){}let t=[],n=null;try{t=await i.promises.resolveMx(e),console.log("üèÅ CANDOMAINRECEIVE üèÅ \n MX Records:",t)}catch(e){"ENOTFOUND"!==e.code&&"ENODATA"!==e.code&&(n=e.message)}let a=[],l=null;try{a=await i.promises.resolveCname(e)}catch(e){"ENOTFOUND"!==e.code&&"ENODATA"!==e.code&&(l=e.message)}let c=t.length>0,d=a.length>0;if(c||d)o.hasMxRecords=c,o.mxRecords=t,o.canReceiveEmails=!1,c?o.error=`Domain has ${t.length} MX record(s) - email already configured`:d&&(o.error="Domain has CNAME record(s) - conflicts with MX records");else if(o.hasMxRecords=!1,o.canReceiveEmails=!0,n||l){let e=[n,l].filter(Boolean);o.error=`Domain check: ${e.join(", ")} (safe for email receiving)`}return o}async function l(e){return Promise.all(e.map(e=>a(e)))}async function c(e){let r=[e];try{let o=[];try{o=await i.promises.resolveNs(e)}catch(n){let s=t(e);for(let e of(r.push(...s),s))try{o=await i.promises.resolveNs(e);break}catch(e){continue}}let n=await s(e);return{domain:e,provider:n,nameservers:o,checkedDomains:r}}catch(o){return{domain:e,provider:null,nameservers:[],checkedDomains:r,error:o.message}}}async function d(e){try{let r=await i.promises.resolveMx(e);return{domain:e,mxRecords:r,hasRecords:r.length>0}}catch(r){return{domain:e,mxRecords:[],hasRecords:!1,error:r.message}}}async function u(e,r){let o={type:"TXT",name:e,expectedValue:r,actualValues:[],isVerified:!1};try{console.log(`üîç TXT Verification - Checking TXT records for: ${e}`),console.log(`üéØ TXT Verification - Expected value: ${r}`);let t=await i.promises.resolveTxt(e);console.log(`üìã TXT Verification - Found ${t.length} TXT records:`,t),o.actualValues=t.flat(),console.log(`üìä TXT Verification - Flattened values:`,o.actualValues),o.isVerified=o.actualValues.some(e=>e===r),console.log(`‚úÖ TXT Verification - Is verified: ${o.isVerified}`),!o.isVerified&&o.actualValues.length>0&&console.log(`‚ùå TXT Verification - Expected "${r}" but found:`,o.actualValues)}catch(i){let r=i instanceof Error?i.message:"Unknown DNS error";console.log(`üí• TXT Verification - DNS lookup failed for ${e}:`,r),r.includes("ENODATA")||r.includes("ENOTFOUND")?o.error=`No TXT records found for ${e}. Please add the TXT record to your DNS.`:o.error=r,o.isVerified=!1}return o}async function m(e,r){let o={type:"MX",name:e,expectedValue:r,actualValues:[],isVerified:!1};try{console.log(`üîç MX Verification - Checking MX records for: ${e}`),console.log(`üéØ MX Verification - Expected value: ${r}`);let t=await i.promises.resolveMx(e);console.log(`üìã MX Verification - Found ${t.length} MX records:`,t),o.actualValues=t.map(e=>`${e.priority} ${e.exchange}`),console.log(`üìä MX Verification - Formatted values:`,o.actualValues),o.isVerified=o.actualValues.some(e=>e===r),console.log(`‚úÖ MX Verification - Is verified: ${o.isVerified}`),!o.isVerified&&o.actualValues.length>0&&console.log(`‚ùå MX Verification - Expected "${r}" but found:`,o.actualValues)}catch(i){let r=i instanceof Error?i.message:"Unknown DNS error";console.log(`üí• MX Verification - DNS lookup failed for ${e}:`,r),r.includes("ENODATA")||r.includes("ENOTFOUND")?o.error=`No MX records found for ${e}. Please add the MX record to your DNS.`:o.error=r,o.isVerified=!1}return o}async function f(e){for(let r of[["8.8.8.8","8.8.4.4"],["1.1.1.1","1.0.0.1"],["208.67.222.222","208.67.220.220"]])try{console.log(`üîÑ TXT Alternative - Trying resolver: ${r.join(", ")}`);let o=new i.Resolver;o.setServers(r);let t=await new Promise((r,i)=>{o.resolveTxt(e,(e,o)=>{e?i(e):r(o||[])})});if(t.length>0)return console.log(`‚úÖ TXT Alternative - Found records with ${r[0]}:`,t),t}catch(e){console.log(`‚ùå TXT Alternative - Failed with ${r[0]}:`,e instanceof Error?e.message:"Unknown error");continue}return[]}async function p(e){for(let r of[["8.8.8.8","8.8.4.4"],["1.1.1.1","1.0.0.1"],["208.67.222.222","208.67.220.220"]])try{console.log(`üîÑ MX Alternative - Trying resolver: ${r.join(", ")}`);let o=new i.Resolver;o.setServers(r);let t=await new Promise((r,i)=>{o.resolveMx(e,(e,o)=>{e?i(e):r(o||[])})});if(t.length>0)return console.log(`‚úÖ MX Alternative - Found records with ${r[0]}:`,t),t}catch(e){console.log(`‚ùå MX Alternative - Failed with ${r[0]}:`,e instanceof Error?e.message:"Unknown error");continue}return[]}async function v(e,r){let o={type:"MX",name:e,expectedValue:r,actualValues:[],isVerified:!1};try{console.log(`üîç MX Verification - Checking MX records for: ${e}`),console.log(`üéØ MX Verification - Expected value: ${r}`);let t=[];try{t=await i.promises.resolveMx(e),console.log(`üìã MX Verification - Default DNS found ${t.length} MX records:`,t)}catch(r){console.log(`‚ö†Ô∏è MX Verification - Default DNS failed, trying alternative resolvers...`),t=await p(e)}o.actualValues=t.map(e=>`${e.priority} ${e.exchange}`),console.log(`üìä MX Verification - Formatted values:`,o.actualValues),o.isVerified=o.actualValues.some(e=>e===r),console.log(`‚úÖ MX Verification - Is verified: ${o.isVerified}`),!o.isVerified&&o.actualValues.length>0&&console.log(`‚ùå MX Verification - Expected "${r}" but found:`,o.actualValues),0===o.actualValues.length&&(o.error=`No MX records found for ${e} using multiple DNS resolvers. Please add the MX record to your DNS.`)}catch(i){let r=i instanceof Error?i.message:"Unknown DNS error";console.log(`üí• MX Verification - All DNS lookups failed for ${e}:`,r),o.error=`DNS resolution failed: ${r}`,o.isVerified=!1}return o}async function g(e,r){let o={type:"TXT",name:e,expectedValue:r,actualValues:[],isVerified:!1};try{console.log(`üîç TXT Verification - Checking TXT records for: ${e}`),console.log(`üéØ TXT Verification - Expected value: ${r}`);let t=[];try{t=await i.promises.resolveTxt(e),console.log(`üìã TXT Verification - Default DNS found ${t.length} TXT records:`,t)}catch(r){console.log(`‚ö†Ô∏è TXT Verification - Default DNS failed, trying alternative resolvers...`),t=await f(e)}o.actualValues=t.flat(),console.log(`üìä TXT Verification - Flattened values:`,o.actualValues),o.isVerified=o.actualValues.some(e=>e===r),console.log(`‚úÖ TXT Verification - Is verified: ${o.isVerified}`),!o.isVerified&&o.actualValues.length>0&&console.log(`‚ùå TXT Verification - Expected "${r}" but found:`,o.actualValues),0===o.actualValues.length&&(o.error=`No TXT records found for ${e} using multiple DNS resolvers. Please add the TXT record to your DNS.`)}catch(i){let r=i instanceof Error?i.message:"Unknown DNS error";console.log(`üí• TXT Verification - All DNS lookups failed for ${e}:`,r),o.error=`DNS resolution failed: ${r}`,o.isVerified=!1}return o}async function T(e){return console.log(`üìã Starting verification of ${e.length} DNS records:`),e.forEach((e,r)=>{console.log(`  ${r+1}. ${e.type} record for ${e.name}`)}),Promise.all(e.map(async e=>{switch(e.type.toUpperCase()){case"TXT":return g(e.name,e.value);case"MX":return v(e.name,e.value);default:return{type:e.type,name:e.name,expectedValue:e.value,actualValues:[],isVerified:!1,error:`Unsupported record type: ${e.type}`}}}))}}},562454:e=>{"use strict";var{g:r,__dirname:o}=e;{e.s({GetIdentityVerificationAttributesCommand:()=>r}),e.i(176357);var i=e.i(765519);e.i(74189);var t=e.i(517274);e.i(608477);var s=e.i(677114),n=e.i(477034),a=e.i(62265);class r extends s.Command.classBuilder().ep(n.commonParams).m(function(e,r,o,s){return[(0,t.getSerdePlugin)(o,this.serialize,this.deserialize),(0,i.getEndpointPlugin)(o,e.getEndpointParameterInstructions())]}).s("SimpleEmailService","GetIdentityVerificationAttributes",{}).n("SESClient","GetIdentityVerificationAttributesCommand").f(void 0,void 0).ser(a.se_GetIdentityVerificationAttributesCommand).de(a.de_GetIdentityVerificationAttributesCommand).build(){}}},937917:function(e){var{g:r,__dirname:o,m:i,e:t}=e},677468:e=>{"use strict";var{g:r,__dirname:o}=e;e.s({POST:()=>c});var i=e.i(125427),t=e.i(906273),s=e.i(719797),n=e.i(236286),a=e.i(402168),l=e.i(998322);async function c(e){try{let r=await a.auth.api.getSession({headers:await (0,l.headers)()});if(!r?.user?.id)return i.NextResponse.json({error:"Unauthorized"},{status:401});let{domain:o,domainId:c}=await e.json();if(!o)return i.NextResponse.json({error:"Domain is required"},{status:400});let d=await (0,t.getDomainWithRecords)(o,r.user.id);if(!d)return i.NextResponse.json({error:"Domain not found. Please run DNS check first."},{status:404});try{let e=await (0,n.initiateDomainVerification)(o,r.user.id);if(d.dnsRecords.length>0){let r=e.dnsRecords.map(e=>({type:e.type,name:e.name,value:e.value}));if("Success"===e.sesStatus){let o=await (0,s.verifyDnsRecords)(r);o.every(e=>e.isVerified)&&(e.status="verified",await (0,t.updateDomainStatus)(d.id,"verified")),e.dnsRecords=o.map(e=>({type:e.type,name:e.name,value:e.expectedValue,isVerified:e.isVerified}))}}return i.NextResponse.json({...e,timestamp:new Date})}catch(e){return console.error("Domain verification error:",e),i.NextResponse.json({error:e instanceof Error?e.message:"Failed to verify domain with AWS SES",domain:o,domainId:d.id,verificationToken:"",status:"failed",dnsRecords:d.dnsRecords.map(e=>({type:e.recordType,name:e.name,value:e.value,isVerified:e.isVerified})),timestamp:new Date},{status:500})}}catch(e){return console.error("Domain verification error:",e),i.NextResponse.json({error:"Failed to verify domain"},{status:500})}}},564979:e=>{"use strict";var{g:r,__dirname:o}=e;{e.s({patchFetch:()=>a,routeModule:()=>r,serverHooks:()=>c,workAsyncStorage:()=>o,workUnitAsyncStorage:()=>l});var i=e.i(854885),t=e.i(814689),s=e.i(25402),n=e.i(677468);let r=new i.AppRouteRouteModule({definition:{kind:t.RouteKind.APP_ROUTE,page:"/api/inbound/verify-domain/route",pathname:"/api/inbound/verify-domain",filename:"route",bundlePath:""},resolvedPagePath:"[project]/app/api/inbound/verify-domain/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:o,workUnitAsyncStorage:l,serverHooks:c}=r;function a(){return(0,s.patchFetch)({workAsyncStorage:o,workUnitAsyncStorage:l})}}},278680:e=>{var{g:r,__dirname:o}=e;e.v(e=>Promise.resolve().then(()=>e(594120)))},73518:e=>{var{g:r,__dirname:o}=e;e.v(r=>Promise.all(["server/chunks/[externals]_url_a7f1d978._.js","server/chunks/9f50b_@smithy_credential-provider-imds_dist-es_d5e4d7ca._.js"].map(r=>e.l(r))).then(()=>r(653223)))},855094:e=>{var{g:r,__dirname:o}=e;e.v(r=>Promise.all(["server/chunks/[externals]_fs_promises_1c68bc94._.js","server/chunks/9f50b_@aws-sdk_credential-provider-http_89f62eca._.js"].map(r=>e.l(r))).then(()=>r(515630)))},520835:e=>{var{g:r,__dirname:o}=e;e.v(r=>Promise.all(["server/chunks/9f50b_@aws-sdk_credential-provider-web-identity_5f9640ad._.js"].map(r=>e.l(r))).then(()=>r(399432)))},404886:e=>{var{g:r,__dirname:o}=e;e.v(r=>Promise.all(["server/chunks/9f50b_@aws-sdk_credential-provider-process_dist-es_f8837f08._.js"].map(r=>e.l(r))).then(()=>r(31086)))},800893:e=>{var{g:r,__dirname:o}=e;e.v(r=>Promise.all(["server/chunks/9f50b_2b713c4a._.js"].map(r=>e.l(r))).then(()=>r(387894)))},683391:e=>{var{g:r,__dirname:o}=e;e.v(r=>Promise.all(["server/chunks/9f50b_@aws-sdk_credential-provider-sso_2ef9c404._.js"].map(r=>e.l(r))).then(()=>r(695705)))},586469:e=>{var{g:r,__dirname:o}=e;e.v(r=>Promise.all(["server/chunks/[externals]_url_a7f1d978._.js","server/chunks/87a6c_@smithy_credential-provider-imds_dist-es_ee44b021._.js"].map(r=>e.l(r))).then(()=>r(488366)))},993477:e=>{var{g:r,__dirname:o}=e;e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__cba3ec6b._.js","server/chunks/node_modules_10ae7a2d._.js"].map(r=>e.l(r))).then(()=>r(611487)))}};

//# sourceMappingURL=%5Broot-of-the-server%5D__f0cd4693._.js.map