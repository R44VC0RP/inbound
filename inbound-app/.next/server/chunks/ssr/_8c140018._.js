module.exports={464785:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>b});var d=a.i(674420);let b=function({fill:a="currentColor",secondaryfill:b,title:c="badge 13",...e}){return b=b||a,(0,d.jsxs)("svg",{height:"18",width:"18",...e,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("title",{children:c}),(0,d.jsxs)("g",{fill:a,children:[(0,d.jsx)("path",{d:"M16.5,4.25c-.192,0-.384-.073-.53-.22l-2-2c-.293-.293-.293-.768,0-1.061s.768-.293,1.061,0l2,2c.293,.293,.293,.768,0,1.061-.146,.146-.338,.22-.53,.22Z",fill:b}),(0,d.jsx)("path",{d:"M1.5,4.25c-.192,0-.384-.073-.53-.22-.293-.293-.293-.768,0-1.061L2.97,.97c.293-.293,.768-.293,1.061,0s.293,.768,0,1.061l-2,2c-.146,.146-.338,.22-.53,.22Z",fill:b}),(0,d.jsx)("path",{d:"M14.447,13.386c.969-1.201,1.553-2.726,1.553-4.386,0-3.86-3.14-7-7-7S2,5.14,2,9c0,1.66,.584,3.185,1.553,4.386l-1.333,1.333c-.293,.293-.293,.768,0,1.061,.146,.146,.338,.22,.53,.22s.384-.073,.53-.22l1.333-1.333c1.201,.969,2.726,1.553,4.387,1.553s3.185-.583,4.387-1.553l1.333,1.333c.146,.146,.338,.22,.53,.22s.384-.073,.53-.22c.293-.293,.293-.768,0-1.061l-1.333-1.333Zm-2.064-2.234c-.143,.225-.386,.347-.633,.347-.138,0-.277-.038-.402-.117l-2.75-1.75c-.216-.138-.347-.376-.347-.633v-3.25c0-.414,.336-.75,.75-.75s.75,.336,.75,.75v2.838l2.403,1.529c.349,.223,.452,.686,.23,1.036Z",fill:a})]})]})}}},752610:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({markAllEmailsAsRead:()=>e});var d=a.i(283620),e=(0,d.createServerReference)("00b110dd3c06704b76c3b03d988a4765d56aaab563",d.callServer,void 0,d.findSourceMapURL,"markAllEmailsAsRead")},132686:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({MarkAllReadButton:()=>l});var d=a.i(674420),e=a.i(722851),f=a.i(378903),g=a.i(232997),h=a.i(195743),i=a.i(164929),j=a.i(752610),k=a.i(918656);function l({unreadCount:a}){let[b,c]=(0,e.useState)(!1),[l,m]=(0,e.useState)(!1),n=(0,k.useRouter)(),o=async()=>{try{m(!0);let a=await (0,j.markAllEmailsAsRead)();if(a.error)return void console.error("Failed to mark all as read:",a.error);console.log(a.message),c(!1),n.refresh()}catch(a){console.error("Error marking all emails as read:",a)}finally{m(!1)}};return 0===a?null:(0,d.jsxs)(g.Dialog,{open:b,onOpenChange:c,children:[(0,d.jsx)(g.DialogTrigger,{asChild:!0,children:(0,d.jsxs)(f.Button,{variant:"primary",size:"sm",children:[(0,d.jsx)(h.default,{className:"h-4 w-4 mr-2"}),"Mark All as Read"]})}),(0,d.jsxs)(g.DialogContent,{className:"sm:max-w-md",children:[(0,d.jsxs)(g.DialogHeader,{children:[(0,d.jsxs)(g.DialogTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)(i.default,{className:"h-5 w-5 text-amber-500"}),"Mark All Emails as Read?"]}),(0,d.jsxs)(g.DialogDescription,{children:["This will mark all ",a," unread email",1===a?"":"s"," as read. This action cannot be undone."]})]}),(0,d.jsxs)(g.DialogFooter,{className:"flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",children:[(0,d.jsx)(f.Button,{variant:"secondary",onClick:()=>c(!1),disabled:l,children:"Cancel"}),(0,d.jsx)(f.Button,{onClick:o,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white",children:l?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Marking as Read..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.default,{className:"h-4 w-4 mr-2"}),"Mark All as Read"]})})]})]})]})}},128951:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({DomainFilterSelect:()=>g});var d=a.i(674420),e=a.i(526146),f=a.i(918656);function g({domains:a,currentDomain:b}){let c=(0,f.useRouter)(),g=(0,f.useSearchParams)();return(0,d.jsxs)(e.Select,{value:b,onValueChange:a=>{let b=new URLSearchParams(g.toString());"all"===a?b.delete("domain"):b.set("domain",a),b.delete("offset"),c.push(`/mail?${b.toString()}`)},children:[(0,d.jsx)(e.SelectTrigger,{className:"w-40 h-9 rounded-xl",children:(0,d.jsx)(e.SelectValue,{placeholder:"All Domains"})}),(0,d.jsxs)(e.SelectContent,{className:"rounded-xl",children:[(0,d.jsx)(e.SelectItem,{value:"all",children:"All Domains"}),a.map(a=>(0,d.jsx)(e.SelectItem,{value:a,children:a},a))]})]})}},417967:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({EmailListItem:()=>j});var d=a.i(674420),e=a.i(816486),f=a.i(576104),g=a.i(525164),h=a.i(222239);a.i(697859);var i=a.i(458146);function j({email:a,isSelectMode:b=!1,isSelected:c=!1,onSelect:j,threadCount:k}){let l=(0,i.useUpdateEmailMutation)(),m=a.parsedData.fromData?.addresses?.[0]?.name||a.from.split("@")[0]||a.from.split("<")[0]||a.from,n=a.parsedData.preview||"No preview available",o=b=>{j&&j(a.id,!0===b)},p=(0,d.jsxs)("div",{className:"flex items-center gap-4 relative",children:[b&&(0,d.jsx)("div",{className:"flex-shrink-0",onClick:a=>a.stopPropagation(),children:(0,d.jsx)(h.Checkbox,{checked:c,onCheckedChange:o})}),(0,d.jsx)("div",{className:"w-40 flex-shrink-0",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:`font-medium truncate text-foreground text-sm ${!a.isRead?"font-semibold":""}`,children:m}),!a.isRead&&(0,d.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0"})]})}),(0,d.jsx)("div",{className:"flex-1 min-w-0",children:(0,d.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,d.jsx)("span",{className:`font-medium text-foreground ${!a.isRead?"font-semibold":""}`,children:a.subject}),k&&k>1&&(0,d.jsx)("span",{className:"bg-muted-foreground/20 text-muted-foreground text-xs px-1.5 py-0.5 rounded-md font-medium",children:k})]}),(0,d.jsxs)("span",{className:"text-muted-foreground/80 truncate",children:["â€” ",n]}),a.parsedData.hasAttachments&&(0,d.jsx)(g.default,{width:"14",height:"14",className:"text-muted-foreground flex-shrink-0"})]})}),(0,d.jsx)("div",{className:"w-24 flex-shrink-0 text-right",children:(0,d.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:(0,f.formatDistanceToNow)(new Date(a.receivedAt||new Date),{addSuffix:!0})})})]});return b?(0,d.jsx)("div",{className:`block w-full px-6 py-3 hover:bg-accent/50 transition-colors duration-200 group cursor-pointer 
        } ${c?"bg-accent/30":""}`,onClick:()=>o(!c),children:p}):(0,d.jsx)(e.default,{href:`/mail/${a.id}`,className:`block w-full px-6 py-3 hover:bg-accent/50 transition-colors duration-200 group ${!a.isRead?"bg-primary/5 border-l-4 border-l-primary":""}`,onClick:()=>{a.isRead||l.mutate({emailId:a.id,updates:{isRead:!0}})},children:p})}},21775:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>s});var d=a.i(674420),e=a.i(722851),f=a.i(918656),g=a.i(123546);a.i(238769);var h=a.i(378903),i=a.i(668018),j=a.i(222239);a.i(697859);var k=a.i(458146),l=a.i(816486);a.i(196544),a.i(464785);var m=a.i(212242);a.i(919801);var n=a.i(164929),o=a.i(566825),p=a.i(132686),q=a.i(128951),r=a.i(417967);function s(){let a=(0,f.useSearchParams)();(0,f.useRouter)();let b=a.get("search")||"",c=a.get("status")||"all",s=a.get("domain")||"all",t=parseInt(a.get("limit")||"50"),u=parseInt(a.get("offset")||"0"),[v,w]=(0,e.useState)([]),[x,y]=(0,e.useState)(!1),{data:z,isLoading:A,error:B,refetch:C}=(0,k.useMailV2Query)({limit:t,offset:u,search:b,status:"all"===c?void 0:c,domain:"all"===s?void 0:s});(0,k.useUpdateEmailMutation)();let D=(0,k.useBulkUpdateEmailsMutation)(),E=z?.emails?.map(a=>a.id)||[],{data:F}=(0,k.useEmailThreadCountsV2Query)(E);(0,e.useEffect)(()=>{let a=setInterval(()=>{C()},5e3);return()=>clearInterval(a)},[C]);let G=(a,b)=>{b?w(b=>[...b,a]):w(b=>b.filter(b=>b!==a))},H=a=>{a&&z?.emails?w(z.emails.map(a=>a.id)):w([])},I=async()=>{if(0!==v.length)try{await D.mutateAsync({emailIds:v,updates:{isArchived:!0}}),w([]),y(!1)}catch(a){console.error("Failed to archive emails:",a)}},J=async()=>{if(0!==v.length)try{await D.mutateAsync({emailIds:v,updates:{isRead:!0}}),w([])}catch(a){console.error("Failed to mark emails as read:",a)}};if((0,e.useEffect)(()=>{x||w([])},[x]),B)return(0,d.jsx)("div",{className:"min-h-screen p-4 font-outfit",children:(0,d.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,d.jsx)(g.Card,{className:"border-destructive/50 bg-destructive/10",children:(0,d.jsx)(g.CardContent,{className:"p-6",children:(0,d.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,d.jsx)(n.default,{width:"16",height:"16"}),(0,d.jsx)("span",{children:B.message})]})})})})});if(A)return(0,d.jsx)("div",{className:"min-h-screen p-4 font-outfit",children:(0,d.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,d.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,d.jsx)("div",{className:"text-muted-foreground",children:"Loading emails..."})})})});if(!z)return(0,d.jsx)("div",{className:"min-h-screen p-4 font-outfit",children:(0,d.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,d.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,d.jsx)("div",{className:"text-muted-foreground",children:"No emails found"})})})});let{emails:K,pagination:L,filters:M={uniqueDomains:[]}}=z,N=K.filter(a=>!a.isRead).length,O=a=>{if(!F?.success)return;let b=F.data.find(b=>b.emailId===a);return b?.threadCount},P=a=>({id:a.id,from:a.from,subject:a.subject||"No Subject",receivedAt:a.receivedAt.toString(),isRead:a.isRead,parsedData:{fromData:{addresses:[{name:a.fromName,address:a.from}]},preview:a.preview,hasAttachments:a.hasAttachments,htmlContent:null,textContent:null}});return(0,d.jsxs)("div",{className:"min-h-screen font-outfit",children:[(0,d.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[(0,d.jsx)("div",{className:"mb-6",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{className:"text-2xl font-semibold text-foreground mb-1 tracking-tight",children:["Mail (",N," unread)"]}),(0,d.jsx)("p",{className:"text-muted-foreground text-sm font-medium",children:"Search and filter your received emails"})]}),(0,d.jsx)("div",{className:"flex items-center gap-2",children:x?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>y(!1),children:"Cancel"}),(0,d.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:J,disabled:0===v.length||D.isPending,children:["Mark Read (",v.length,")"]}),(0,d.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:I,disabled:0===v.length||D.isPending,className:"text-destructive hover:text-destructive",children:["Archive (",v.length,")"]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>y(!0),disabled:!z?.emails||0===z.emails.length,children:"Select"}),(0,d.jsx)(p.MarkAllReadButton,{unreadCount:N})]})})]})}),(0,d.jsx)("div",{className:"mb-6",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[x&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(j.Checkbox,{checked:!!z?.emails&&v.length===z.emails.length&&z.emails.length>0,onCheckedChange:a=>H(!0===a)}),(0,d.jsx)("span",{className:"text-sm text-muted-foreground",children:"Select All"})]}),(0,d.jsxs)("form",{method:"GET",className:"relative flex-1",children:[(0,d.jsx)(m.default,{width:"16",height:"16",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),(0,d.jsx)(i.Input,{name:"search",placeholder:"Search emails...",defaultValue:b,className:"pl-10 h-9 rounded-xl"}),"all"!==s&&(0,d.jsx)("input",{type:"hidden",name:"domain",value:s}),(0,d.jsx)(h.Button,{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-6 px-2",children:(0,d.jsx)(m.default,{width:"12",height:"12"})})]}),(0,d.jsx)(q.DomainFilterSelect,{domains:M.uniqueDomains,currentDomain:s})]})})]}),(0,d.jsxs)("div",{className:"w-full max-w-6xl mx-auto",children:[0===K.length?(0,d.jsx)("div",{className:"max-w-5xl mx-auto p-4",children:(0,d.jsx)("div",{className:"bg-card border-border rounded-xl p-8",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(o.CustomInboundIcon,{text:"EM",size:48,backgroundColor:"#8b5cf6",className:"mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-lg font-semibold mb-2 text-foreground",children:"No emails found"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:b||"all"!==c||"all"!==s?"No emails match your search criteria.":"Hey! Looks like you don't have any emails yet."}),!(b||"all"!==c||"all"!==s)&&(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Ready to start receiving emails? Let's get you set up!"}),(0,d.jsx)(h.Button,{asChild:!0,children:(0,d.jsx)(l.default,{href:"/onboarding",children:"Start Onboarding"})})]})]})})}):(0,d.jsx)("div",{className:"divide-y divide-border",children:K.map(a=>(0,d.jsx)(r.EmailListItem,{email:P(a),isSelectMode:x,isSelected:v.includes(a.id),onSelect:G,threadCount:O(a.id)},a.id))}),L.total>L.limit&&(0,d.jsx)("div",{className:"max-w-5xl mx-auto p-4",children:(0,d.jsx)("div",{className:"bg-card border-border rounded-xl p-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"text-sm text-muted-foreground font-medium",children:["Showing ",L.offset+1," to ",Math.min(L.offset+L.limit,L.total)," of ",L.total," emails"]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[L.offset>0&&(0,d.jsx)(l.default,{href:{pathname:"/mail",query:{...b&&{search:b},..."all"!==c&&{status:c},..."all"!==s&&{domain:s},offset:Math.max(0,L.offset-L.limit).toString()}},children:(0,d.jsx)(h.Button,{variant:"secondary",size:"sm",className:"rounded-xl",children:"Previous"})}),L.hasMore&&(0,d.jsx)(l.default,{href:{pathname:"/mail",query:{...b&&{search:b},..."all"!==c&&{status:c},..."all"!==s&&{domain:s},offset:(L.offset+L.limit).toString()}},children:(0,d.jsx)(h.Button,{variant:"secondary",size:"sm",className:"rounded-xl",children:"Next"})})]})]})})})]})]})}}};

//# sourceMappingURL=_8c140018._.js.map