module.exports={591032:function(a){var{g:b,__dirname:c,m:d,e:e}=a;d.exports=a.x("node:crypto",()=>require("node:crypto"))},429380:a=>{var{g:b,__dirname:c}=a;a.n(a.i(483241))},222086:a=>{var{g:b,__dirname:c}=a;a.n(a.i(170773))},445875:a=>{var{g:b,__dirname:c}=a;a.n(a.i(253380))},657904:a=>{var{g:b,__dirname:c}=a;a.n(a.i(349996))},521018:a=>{var{g:b,__dirname:c}=a;a.n(a.i(435178))},942505:a=>{var{g:b,__dirname:c}=a;a.n(a.i(106157))},745431:a=>{var{g:b,__dirname:c}=a;a.n(a.i(541884))},801327:a=>{var{g:b,__dirname:c}=a;a.n(a.i(906079))},13182:a=>{var{g:b,__dirname:c}=a;a.n(a.i(212509))},660874:function(a){var{g:b,__dirname:c,m:d,e:e}=a;d.exports=a.r(929549)},715847:a=>{var{g:b,__dirname:c}=a;a.n(a.i(103439))},781045:a=>{var{g:b,__dirname:c}=a;a.n(a.i(909856))},913994:a=>{var{g:b,__dirname:c}=a;a.n(a.i(330020))},401617:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>b});var d=a.i(129629);let b=function({fill:a="currentColor",secondaryfill:b,title:c="badge 13",...e}){return b=b||a,(0,d.jsxs)("svg",{height:"18",width:"18",...e,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("title",{children:c}),(0,d.jsx)("g",{fill:a,children:(0,d.jsx)("path",{d:"M9,1C4.589,1,1,4.589,1,9s3.589,8,8,8,8-3.589,8-8S13.411,1,9,1Zm3.843,5.708l-4.25,5.5c-.136,.176-.343,.283-.565,.291-.01,0-.019,0-.028,0-.212,0-.415-.09-.558-.248l-2.25-2.5c-.277-.308-.252-.782,.056-1.06,.309-.276,.781-.252,1.06,.056l1.648,1.832,3.701-4.789c.253-.328,.725-.388,1.052-.135,.328,.253,.388,.724,.135,1.052Z",fill:a})})]})}}},311955:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({Card:()=>b,CardContent:()=>i,CardDescription:()=>h,CardFooter:()=>j,CardHeader:()=>c,CardTitle:()=>g});var d=a.i(129629),e=a.i(465421),f=a.i(989128);let b=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...b}));b.displayName="Card";let c=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));c.displayName="CardHeader";let g=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("font-semibold leading-none tracking-tight",a),...b}));g.displayName="CardTitle";let h=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b}));h.displayName="CardDescription";let i=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));i.displayName="CardContent";let j=(0,e.forwardRef)(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b}));j.displayName="CardFooter"}},161982:function(a){var{g:b,__dirname:c,m:d,e:e}=a;{let{createClientModuleProxy:b}=a.r(77624);a.n(b("[project]/node_modules/next/dist/client/app-dir/link.js <module evaluation>"))}},502549:function(a){var{g:b,__dirname:c,m:d,e:e}=a;{let{createClientModuleProxy:b}=a.r(77624);a.n(b("[project]/node_modules/next/dist/client/app-dir/link.js"))}},331055:a=>{"use strict";var{g:b,__dirname:c}=a;a.i(161982);var d=a.i(502549);a.n(d)},950693:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>b});var d=a.i(129629);let b=function({fill:a="currentColor",secondaryfill:b,title:c="badge 13",...e}){return b=b||a,(0,d.jsxs)("svg",{height:"12",width:"12",...e,viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("title",{children:c}),(0,d.jsxs)("g",{fill:a,children:[(0,d.jsx)("path",{d:"m6,5.935l5.962-2.556c-.183-1.34-1.323-2.378-2.712-2.378H2.75C1.361,1.001.221,2.04.038,3.38l5.962,2.555Z",fill:b,strokeWidth:"0"}),(0,d.jsx)("path",{d:"m6.295,7.441c-.094.041-.195.061-.295.061s-.201-.02-.295-.061L0,4.996v3.255c0,1.517,1.233,2.75,2.75,2.75h6.5c1.517,0,2.75-1.233,2.75-2.75v-3.256l-5.705,2.445Z",fill:a,strokeWidth:"0"})]})]})}}},377708:function(a){var{g:b,__dirname:c,m:d,e:e}=a},132972:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>p});var d=a.i(129629),e=a.i(900707);a.i(508384);var f=a.i(954523),g=a.i(988777),h=a.i(311955),i=a.i(574541),j=a.i(401617),k=a.i(950693),l=a.i(331055);a.i(622427);var m=a.i(766719),n=a.i(14394);async function o(a){let b=await e.db.select().from(f.vipPaymentSessions).where((0,g.eq)(f.vipPaymentSessions.id,a)).limit(1);if(!b[0])return{success:!1,error:"Payment session not found"};if("paid"===b[0].status)return{success:!0,alreadyProcessed:!0,senderEmail:b[0].senderEmail};await e.db.update(f.vipPaymentSessions).set({status:"paid",paidAt:new Date,updatedAt:new Date}).where((0,g.eq)(f.vipPaymentSessions.id,a));let c=await e.db.select().from(f.vipConfigs).where((0,g.eq)(f.vipConfigs.id,b[0].vipConfigId)).limit(1);if(!c[0])return{success:!1,error:"VIP configuration not found"};c[0].allowAfterPayment&&await e.db.insert(f.vipAllowedSenders).values({id:(0,n.nanoid)(),vipConfigId:c[0].id,senderEmail:b[0].senderEmail,paymentSessionId:a,createdAt:new Date}),await e.db.update(f.vipEmailAttempts).set({status:"allowed",allowedReason:"payment_completed",updatedAt:new Date}).where((0,g.eq)(f.vipEmailAttempts.paymentSessionId,a));let d=await e.db.select().from(f.structuredEmails).where((0,g.eq)(f.structuredEmails.id,b[0].originalEmailId)).limit(1);return d[0]&&console.log("Delivering original email:",d[0].id),{success:!0,senderEmail:b[0].senderEmail,allowFutureEmails:c[0].allowAfterPayment}}async function p({searchParams:a}){a.session_id||(0,m.redirect)("/");let b=await o(a.session_id);return b.success?(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,d.jsxs)(h.Card,{className:"max-w-md w-full",children:[(0,d.jsxs)(h.CardHeader,{children:[(0,d.jsx)("div",{className:"flex justify-center mb-4",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(k.default,{className:"h-16 w-16 text-gray-400"}),(0,d.jsx)(j.default,{className:"h-8 w-8 text-green-500 absolute -bottom-1 -right-1 bg-white dark:bg-gray-800 rounded-full"})]})}),(0,d.jsx)(h.CardTitle,{className:"text-center text-2xl",children:b.alreadyProcessed?"Email Already Delivered":"Payment Successful!"}),(0,d.jsx)(h.CardDescription,{className:"text-center",children:b.alreadyProcessed?"Your email has already been delivered.":"Your email has been delivered successfully."})]}),(0,d.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,d.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-4",children:(0,d.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Email sent from: ",(0,d.jsx)("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:b.senderEmail})]})}),b.allowFutureEmails&&!b.alreadyProcessed&&(0,d.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)(j.default,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Future emails approved"}),(0,d.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:"All your future emails to this address will be delivered automatically."})]})]})}),(0,d.jsx)("div",{className:"text-center pt-4",children:(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"You can close this window now."})})]})]})}):(0,d.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,d.jsxs)(h.Card,{className:"max-w-md w-full",children:[(0,d.jsxs)(h.CardHeader,{children:[(0,d.jsx)(h.CardTitle,{className:"text-red-600",children:"Payment Error"}),(0,d.jsx)(h.CardDescription,{children:b.error||"An error occurred processing your payment"})]}),(0,d.jsx)(h.CardContent,{children:(0,d.jsx)(i.Button,{asChild:!0,children:(0,d.jsx)(l.default,{href:"/",children:"Return Home"})})})]})})}},259753:a=>{var{g:b,__dirname:c}=a;a.n(a.i(132972))},214671:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({__next_app__:()=>p,pages:()=>c,routeModule:()=>q,tree:()=>b});var d=a.i(429380),e=a.i(222086),f=a.i(445875),g=a.i(657904),h=a.i(521018),i=a.i(942505),j=a.i(745431),k=a.i(801327),l=a.i(13182),m=a.i(259753),n=a.i(660874),o=a.i(715847);a.i(781045);let b=["",{children:["api",{children:["products",{children:["inboundvip",{children:["success",{children:["__PAGE__",{},{metadata:{},page:[()=>m,"[project]/app/api/products/inboundvip/success/page.tsx"]}]},{metadata:{}}]},{metadata:{}}]},{metadata:{}}]},{metadata:{}}]},{metadata:{icon:[async a=>[{url:(0,d.fillMetadataSegment)("//",await a.params,"favicon.ico")+`?${e.default.src.split("/").splice(-1)[0]}`,sizes:`${e.default.width}x${e.default.height}`,type:"image/x-icon"}]],twitter:[async a=>[{url:(0,d.fillMetadataSegment)("//",await a.params,"twitter-image.png")+`?${f.default.src.split("/").splice(-1)[0]}`,width:f.default.width,height:f.default.height,type:"image/png"}]],openGraph:[async a=>[{url:(0,d.fillMetadataSegment)("//",await a.params,"opengraph-image.png")+`?${g.default.src.split("/").splice(-1)[0]}`,width:g.default.width,height:g.default.height,type:"image/png"}]]},layout:[()=>h,"[project]/app/layout.tsx"],"not-found":[()=>i,"[project]/node_modules/next/dist/client/components/not-found-error.js"],forbidden:[()=>j,"[project]/node_modules/next/dist/client/components/forbidden-error.js"],unauthorized:[()=>k,"[project]/node_modules/next/dist/client/components/unauthorized-error.js"],"global-error":[()=>l,"[project]/app/global-error.tsx"]}],c=["[project]/app/api/products/inboundvip/success/page.tsx"],p={require:a.r,loadChunk:a.l},q=new n.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/api/products/inboundvip/success/page",pathname:"/api/products/inboundvip/success",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:b}})}},578883:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({}),a.i(429380),a.i(222086),a.i(445875),a.i(657904),a.i(521018),a.i(942505),a.i(745431),a.i(801327),a.i(13182),a.i(259753),a.i(660874),a.i(715847),a.i(781045),a.i(214671)},577846:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({ClientPageRoot:()=>e.ClientPageRoot,ClientSegmentRoot:()=>e.ClientSegmentRoot,GlobalError:()=>d.default,HTTPAccessFallbackBoundary:()=>e.HTTPAccessFallbackBoundary,LayoutRouter:()=>e.LayoutRouter,MetadataBoundary:()=>e.MetadataBoundary,OutletBoundary:()=>e.OutletBoundary,Postpone:()=>e.Postpone,RenderFromTemplateContext:()=>e.RenderFromTemplateContext,ViewportBoundary:()=>e.ViewportBoundary,__next_app__:()=>f.__next_app__,actionAsyncStorage:()=>e.actionAsyncStorage,collectSegmentData:()=>e.collectSegmentData,createMetadataComponents:()=>e.createMetadataComponents,createPrerenderParamsForClientSegment:()=>e.createPrerenderParamsForClientSegment,createPrerenderSearchParamsForClientPage:()=>e.createPrerenderSearchParamsForClientPage,createServerParamsForServerSegment:()=>e.createServerParamsForServerSegment,createServerSearchParamsForServerPage:()=>e.createServerSearchParamsForServerPage,createTemporaryReferenceSet:()=>e.createTemporaryReferenceSet,decodeAction:()=>e.decodeAction,decodeFormState:()=>e.decodeFormState,decodeReply:()=>e.decodeReply,pages:()=>f.pages,patchFetch:()=>e.patchFetch,preconnect:()=>e.preconnect,preloadFont:()=>e.preloadFont,preloadStyle:()=>e.preloadStyle,prerender:()=>e.prerender,renderToReadableStream:()=>e.renderToReadableStream,routeModule:()=>f.routeModule,serverHooks:()=>e.serverHooks,taintObjectReference:()=>e.taintObjectReference,tree:()=>f.tree,workAsyncStorage:()=>e.workAsyncStorage,workUnitAsyncStorage:()=>e.workUnitAsyncStorage});var d=a.i(13182),e=a.i(913994),f=a.i(214671)},442161:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({ClientPageRoot:()=>d.ClientPageRoot,ClientSegmentRoot:()=>d.ClientSegmentRoot,GlobalError:()=>d.GlobalError,HTTPAccessFallbackBoundary:()=>d.HTTPAccessFallbackBoundary,LayoutRouter:()=>d.LayoutRouter,MetadataBoundary:()=>d.MetadataBoundary,OutletBoundary:()=>d.OutletBoundary,Postpone:()=>d.Postpone,RenderFromTemplateContext:()=>d.RenderFromTemplateContext,ViewportBoundary:()=>d.ViewportBoundary,__next_app__:()=>d.__next_app__,actionAsyncStorage:()=>d.actionAsyncStorage,collectSegmentData:()=>d.collectSegmentData,createMetadataComponents:()=>d.createMetadataComponents,createPrerenderParamsForClientSegment:()=>d.createPrerenderParamsForClientSegment,createPrerenderSearchParamsForClientPage:()=>d.createPrerenderSearchParamsForClientPage,createServerParamsForServerSegment:()=>d.createServerParamsForServerSegment,createServerSearchParamsForServerPage:()=>d.createServerSearchParamsForServerPage,createTemporaryReferenceSet:()=>d.createTemporaryReferenceSet,decodeAction:()=>d.decodeAction,decodeFormState:()=>d.decodeFormState,decodeReply:()=>d.decodeReply,pages:()=>d.pages,patchFetch:()=>d.patchFetch,preconnect:()=>d.preconnect,preloadFont:()=>d.preloadFont,preloadStyle:()=>d.preloadStyle,prerender:()=>d.prerender,renderToReadableStream:()=>d.renderToReadableStream,routeModule:()=>d.routeModule,serverHooks:()=>d.serverHooks,taintObjectReference:()=>d.taintObjectReference,tree:()=>d.tree,workAsyncStorage:()=>d.workAsyncStorage,workUnitAsyncStorage:()=>d.workUnitAsyncStorage}),a.i(578883);var d=a.i(577846)}};

//# sourceMappingURL=%5Broot-of-the-server%5D__7fe01c1b._.js.map