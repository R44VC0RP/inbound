module.exports={333613:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({domainsApi:()=>b});var d=a.i(795012);let b={getDomainStats:async()=>{let a=await (0,d.getDomainStats)();if("error"in a)throw Error(a.error||"Failed to fetch domain statistics");return a},getDomainDetails:async a=>{let b=await fetch(`/api/domain/${a}`);if(!b.ok){if(404===b.status)throw Error("Domain not found");throw Error("Failed to fetch domain details")}return b.json()},verifyDomain:async a=>{let b=await fetch(`/api/domain/${a}/verify`,{method:"POST"});if(!b.ok)throw Error("Failed to verify domain");return b.json()}}}},260118:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({domainKeys:()=>b,useDomainDetailsQuery:()=>h,useDomainVerifyMutation:()=>i,useDomainsStatsQuery:()=>c});var d=a.i(18337),e=a.i(513929),f=a.i(378727),g=a.i(333613);let b={all:["domains"],stats:()=>[...b.all,"stats"],details:()=>[...b.all,"details"],detail:a=>[...b.details(),a]},c=()=>(0,d.useQuery)({queryKey:b.stats(),queryFn:g.domainsApi.getDomainStats}),h=a=>(0,d.useQuery)({queryKey:b.detail(a),queryFn:()=>g.domainsApi.getDomainDetails(a),enabled:!!a}),i=()=>{let a=(0,f.useQueryClient)();return(0,e.useMutation)({mutationFn:g.domainsApi.verifyDomain,onSuccess:(c,d)=>{a.invalidateQueries({queryKey:b.stats()}),a.invalidateQueries({queryKey:b.detail(d)})}})}}},356785:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({WEBHOOK_FORMAT_CONFIGS:()=>b,generateRealPayload:()=>f,generateTestPayload:()=>e,getWebhookFormatConfig:()=>d});let b={inbound:{name:"Inbound Webhook",description:"Standard Inbound email webhook format with full email data",testPayload:a=>({event:"webhook_test",timestamp:a.timestamp,messageId:a.messageId,source:a.from,destination:a.to,subject:a.subject,body:{text:a.textBody||"This is a test email from the Inbound Email service to verify webhook functionality.",html:a.htmlBody||"<p>This is a test email from the <strong>Inbound Email service</strong> to verify webhook functionality.</p>"},attachments:a.attachments||[],headers:a.headers||{},test:!0}),realPayload:a=>({event:"email_received",timestamp:a.timestamp,messageId:a.messageId,source:a.from,destination:a.to,subject:a.subject,body:{text:a.textBody,html:a.htmlBody},attachments:a.attachments||[],headers:a.headers||{}})},discord:{name:"Discord Webhook",description:"Discord-compatible webhook format with rich embeds",testPayload:a=>({content:`ðŸ“§ **Test Email Received**`,embeds:[{title:a.subject||"Test Email - Inbound Email Service",description:a.textBody||"This is a test email from the Inbound Email service to verify webhook functionality.",color:65280,timestamp:a.timestamp,footer:{text:"Inbound Email Service - Test",icon_url:"https://inbound.new/favicon.ico"},fields:[{name:"From",value:a.from||"test@example.com",inline:!0},{name:"To",value:a.to.join(", ")||a.recipient,inline:!0},{name:"Message ID",value:`\`${a.messageId}\``,inline:!1}]}]}),realPayload:a=>({content:`ðŸ“§ **New Email Received**`,embeds:[{title:a.subject||"No Subject",description:a.textBody?a.textBody.length>2e3?a.textBody.substring(0,2e3)+"...":a.textBody:"No content",color:39423,timestamp:a.timestamp,footer:{text:"Inbound Email Service",icon_url:"https://inbound.new/favicon.ico"},fields:[{name:"From",value:a.from,inline:!0},{name:"To",value:a.to.join(", "),inline:!0},...a.attachments&&a.attachments.length>0?[{name:"Attachments",value:a.attachments.map(a=>a.filename||"Unknown").join(", "),inline:!1}]:[],{name:"Message ID",value:`\`${a.messageId}\``,inline:!1}]}]})},slack:{name:"Slack Webhook",description:"Slack-compatible webhook format with attachments",testPayload:a=>({text:`ðŸ“§ *Test Email Received*`,username:"Inbound Email",icon_url:"https://inbound.new/favicon.ico",attachments:[{fallback:`Test email: ${a.subject}`,color:"good",title:a.subject||"Test Email - Inbound Email Service",text:a.textBody||"This is a test email from the Inbound Email service to verify webhook functionality.",fields:[{title:"From",value:a.from||"test@example.com",short:!0},{title:"To",value:a.to.join(", ")||a.recipient,short:!0},{title:"Message ID",value:a.messageId,short:!1}],footer:"Inbound Email Service - Test",ts:Math.floor(new Date(a.timestamp).getTime()/1e3)}]}),realPayload:a=>({text:`ðŸ“§ *New Email Received*`,username:"Inbound Email",icon_url:"https://inbound.new/favicon.ico",attachments:[{fallback:`New email: ${a.subject}`,color:"#0099ff",title:a.subject||"No Subject",text:a.textBody?a.textBody.length>1e3?a.textBody.substring(0,1e3)+"...":a.textBody:"No content",fields:[{title:"From",value:a.from,short:!0},{title:"To",value:a.to.join(", "),short:!0},...a.attachments&&a.attachments.length>0?[{title:"Attachments",value:a.attachments.map(a=>a.filename||"Unknown").join(", "),short:!1}]:[],{title:"Message ID",value:a.messageId,short:!1}],footer:"Inbound Email Service",ts:Math.floor(new Date(a.timestamp).getTime()/1e3)}]})}};function d(a){return b[a]}function e(a,c){let d=b[a],e={...{messageId:`test-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,from:"test@example.com",to:["test@yourdomain.com"],subject:"Test Email - Inbound Email Service",textBody:"This is a test email from the Inbound Email service to verify webhook functionality.",htmlBody:"<p>This is a test email from the <strong>Inbound Email service</strong> to verify webhook functionality.</p>",attachments:[],headers:{From:"test@example.com",To:"test@yourdomain.com",Subject:"Test Email - Inbound Email Service",Date:new Date().toISOString()},timestamp:new Date().toISOString(),recipient:"test@yourdomain.com"},...c};return d.testPayload(e)}function f(a,c){return b[a].realPayload(c)}}},924796:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({EndpointTypeSelector:()=>i});var d=a.i(674420),e=a.i(300096),f=a.i(569164),g=a.i(313812),h=a.i(123546);function i({selectedType:a,onTypeSelect:b,disabled:c=!1}){let i=[{type:"webhook",icon:e.default,title:"Webhook",description:"Send HTTP requests to your application",color:"purple"},{type:"email",icon:f.default,title:"Email Forward",description:"Forward emails to a single recipient",color:"blue"},{type:"email_group",icon:g.default,title:"Email Group",description:"Forward emails to multiple recipients",color:"green"}],j=(a,b)=>({purple:{border:b?"border-purple-500":"border-border",bg:b?"bg-purple-50 dark:bg-purple-900/20":"bg-card",icon:b?"text-purple-600 dark:text-purple-400":"text-muted-foreground",title:b?"text-purple-900 dark:text-purple-100":"text-foreground",desc:b?"text-purple-700 dark:text-purple-300":"text-muted-foreground"},blue:{border:b?"border-blue-500":"border-border",bg:b?"bg-blue-50 dark:bg-blue-900/20":"bg-card",icon:b?"text-blue-600 dark:text-blue-400":"text-muted-foreground",title:b?"text-blue-900 dark:text-blue-100":"text-foreground",desc:b?"text-blue-700 dark:text-blue-300":"text-muted-foreground"},green:{border:b?"border-green-500":"border-border",bg:b?"bg-green-50 dark:bg-green-900/20":"bg-card",icon:b?"text-green-600 dark:text-green-400":"text-muted-foreground",title:b?"text-green-900 dark:text-green-100":"text-foreground",desc:b?"text-green-700 dark:text-green-300":"text-muted-foreground"}})[a];return(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-foreground",children:"Endpoint Type"}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Choose how you want to receive emails"})]}),(0,d.jsx)("div",{className:"grid grid-cols-1 gap-3",children:i.map(e=>{let f=a===e.type,g=j(e.color,f),i=e.icon;return(0,d.jsx)(h.Card,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${g.border} ${g.bg} ${c?"opacity-50 cursor-not-allowed":""}`,onClick:()=>!c&&b(e.type),children:(0,d.jsx)(h.CardContent,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)("div",{className:`flex items-center justify-center w-10 h-10 rounded-lg ${f?`bg-${e.color}-100 dark:bg-${e.color}-900/30`:"bg-muted"}`,children:(0,d.jsx)(i,{width:"20",height:"20",className:g.icon})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h5",{className:`text-sm font-semibold ${g.title}`,children:e.title}),(0,d.jsx)("p",{className:`text-xs mt-1 ${g.desc}`,children:e.description})]}),f&&(0,d.jsx)("div",{className:`w-4 h-4 rounded-full bg-${e.color}-500 flex items-center justify-center`,children:(0,d.jsx)("div",{className:"w-2 h-2 rounded-full bg-white dark:bg-gray-900"})})]})})},e.type)})})]})}},71710:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({CreateEndpointDialog:()=>y});var d=a.i(674420),e=a.i(722851);a.i(440712);var f=a.i(699389),g=a.i(260118),h=a.i(356785),i=a.i(232997),j=a.i(378903),k=a.i(668018),l=a.i(386483),m=a.i(487085),n=a.i(238769),o=a.i(974137),p=a.i(483182),q=a.i(58901),r=a.i(300096),s=a.i(569164),t=a.i(313812),u=a.i(693610),v=a.i(24491),w=a.i(323772),x=a.i(924796);function y({open:a,onOpenChange:b}){let[c,y]=(0,e.useState)("type"),[z,A]=(0,e.useState)(null),[B,C]=(0,e.useState)({name:"",description:""}),[D,E]=(0,e.useState)("inbound"),[F,G]=(0,e.useState)({url:"",timeout:30,retryAttempts:3,headers:{}}),[H,I]=(0,e.useState)(""),[J,K]=(0,e.useState)(""),[L,M]=(0,e.useState)({forwardTo:"",includeAttachments:!0,subjectPrefix:""}),[N,O]=(0,e.useState)({emails:[],includeAttachments:!0,subjectPrefix:""}),[P,Q]=(0,e.useState)(""),[R,S]=(0,e.useState)({}),T=(0,f.useCreateEndpointMutation)(),{data:U}=(0,g.useDomainsStatsQuery)();U?.domains?.filter(a=>a.isVerified),(0,e.useEffect)(()=>{let b=a=>{(a.metaKey||a.ctrlKey)&&"Enter"===a.key&&(a.preventDefault(),"config"===c&&!T.isPending&&z&&V()?Y(a):W()&&X())};return a&&document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[a,c,T.isPending,z,B,F,L,N]);let V=()=>{let a={};if("type"!==c||z||(a.type="Please select an endpoint type"),"basic"===c&&(B.name.trim()||(a.name="Name is required"),"email"===z&&(L.forwardTo.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L.forwardTo)||(a.forwardTo="Please enter a valid email address"):a.forwardTo="Forward to email is required")),"config"===c&&z){if("webhook"===z){if(F.url.trim())try{new URL(F.url)}catch{a.url="Please enter a valid URL"}else a.url="URL is required";F.timeout&&(F.timeout<1||F.timeout>300)&&(a.timeout="Timeout must be between 1 and 300 seconds"),F.retryAttempts&&(F.retryAttempts<0||F.retryAttempts>10)&&(a.retryAttempts="Retry attempts must be between 0 and 10")}"email"===z&&(L.forwardTo.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L.forwardTo)||(a.forwardTo="Please enter a valid email address"):a.forwardTo="Forward to email is required"),"email_group"===z&&0===N.emails.length&&(a.emails="At least one email address is required")}return S(a),0===Object.keys(a).length},W=()=>{if("type"===c)return null!==z;if("basic"===c){let a=""!==B.name.trim();if("email"===z){let b=""!==L.forwardTo.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L.forwardTo);return a&&b}return a}return!1},X=()=>{V()&&("type"===c?y("basic"):"basic"===c&&y("config"))},Y=async a=>{let b;if(a.preventDefault(),!z||!V())return;switch(z){case"webhook":b=F;break;case"email":b=L;break;case"email_group":b=N;break;default:return}let c={name:B.name,type:z,webhookFormat:"webhook"===z?D:void 0,description:B.description||void 0,config:b};try{await T.mutateAsync(c),w.toast.success("Endpoint created successfully!"),Z()}catch(a){w.toast.error(a instanceof Error?a.message:"Failed to create endpoint")}},Z=()=>{y("type"),A(null),C({name:"",description:""}),E("inbound"),G({url:"",timeout:30,retryAttempts:3,headers:{}}),M({forwardTo:"",includeAttachments:!0,subjectPrefix:""}),O({emails:[],includeAttachments:!0,subjectPrefix:""}),I(""),K(""),Q(""),S({}),b(!1)},$=()=>{H.trim()&&J.trim()&&(G(a=>({...a,headers:{...a.headers,[H.trim()]:J.trim()}})),I(""),K(""))},_=a=>{G(b=>{let c={...b.headers};return delete c[a],{...b,headers:c}})},aa=()=>{P.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P.trim())&&!N.emails.includes(P.trim())&&(O(a=>({...a,emails:[...a.emails,P.trim()]})),Q(""))},ab=a=>{O(b=>({...b,emails:b.emails.filter(b=>b!==a)}))},{icon:ac,variant:ad}=(()=>{switch(z){case"webhook":return{icon:r.default,variant:"webhook"};case"email":return{icon:s.default,variant:"email"};case"email_group":return{icon:t.default,variant:"email_group"};default:return{icon:p.default,variant:"default"}}})();return(0,d.jsx)(i.Dialog,{open:a,onOpenChange:b,children:(0,d.jsxs)(i.DialogContent,{className:"sm:max-w-lg",children:[(0,d.jsx)(i.DialogHeader,{children:(0,d.jsxs)(i.DialogTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:`flex items-center justify-center w-8 h-8 rounded-full ${"webhook"===ad?"bg-purple-100 dark:bg-purple-900/20":"email"===ad?"bg-blue-100 dark:bg-blue-900/20":"email_group"===ad?"bg-green-100 dark:bg-green-900/20":"bg-muted"}`,children:(0,d.jsx)(ac,{className:`h-4 w-4 ${"webhook"===ad?"text-purple-600 dark:text-purple-400":"email"===ad?"text-blue-600 dark:text-blue-400":"email_group"===ad?"text-green-600 dark:text-green-400":"text-muted-foreground"}`})}),(()=>{switch(c){case"type":return"Choose Endpoint Type";case"basic":return"email"===z?"Email Forward Setup":"Basic Information";case"config":return"email"===z?"Review & Create":`Configure ${"webhook"===z?"Webhook":"Email Group"}`;default:return"Create New Endpoint"}})()]})}),(0,d.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-6",children:[(0,d.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ${"type"===c?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"1"}),(0,d.jsx)("div",{className:`w-8 h-1 ${"type"!==c?"bg-primary":"bg-muted"}`}),(0,d.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ${"basic"===c?"bg-primary text-primary-foreground":"config"===c?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"}`,children:"2"}),(0,d.jsx)("div",{className:`w-8 h-1 ${"config"===c?"bg-primary":"bg-muted"}`}),(0,d.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium ${"config"===c?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:"3"})]}),(0,d.jsxs)("form",{id:"endpoint-form",onSubmit:Y,className:"min-h-[300px]",children:["type"===c&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)(x.EndpointTypeSelector,{selectedType:z,onTypeSelect:A}),R.type&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:R.type})]}),"basic"===c&&(0,d.jsxs)("div",{className:"space-y-4",children:["email"===z&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"forwardToBasic",children:"Forward To Email *"}),(0,d.jsx)(k.Input,{id:"forwardToBasic",type:"email",value:L.forwardTo,onChange:a=>{let b=a.target.value;M(a=>({...a,forwardTo:b})),B.name.trim()&&B.name!==L.forwardTo||C(a=>({...a,name:b}))},placeholder:"support@yourcompany.com",className:R.forwardTo?"border-red-500":"",autoFocus:!0}),R.forwardTo&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:R.forwardTo})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"name",children:"Name *"}),(0,d.jsx)(k.Input,{id:"name",value:B.name,onChange:a=>C(b=>({...b,name:a.target.value})),placeholder:`${"webhook"===z?"Production Webhook":"email"===z?"Auto-filled from email above":"Team Email Group"}`,className:R.name?"border-red-500":"",autoFocus:"email"!==z}),R.name&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:R.name})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"description",children:"Description"}),(0,d.jsx)(m.Textarea,{id:"description",value:B.description,onChange:a=>C(b=>({...b,description:a.target.value})),placeholder:"Optional description of this endpoint's purpose",rows:3})]}),"email"===z&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"subjectPrefixBasic",children:"Subject Prefix"}),(0,d.jsx)(k.Input,{id:"subjectPrefixBasic",value:L.subjectPrefix,onChange:a=>M(b=>({...b,subjectPrefix:a.target.value})),placeholder:"[Forwarded] "}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Optional prefix to add to forwarded email subjects"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{className:"text-sm font-medium",children:"Include Attachments"}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Forward email attachments"})]}),(0,d.jsx)(o.Switch,{checked:L.includeAttachments,onCheckedChange:a=>M(b=>({...b,includeAttachments:a}))})]})]})]}),"config"===c&&z&&(0,d.jsxs)("div",{className:"space-y-4",children:["webhook"===z&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"url",children:"URL *"}),(0,d.jsx)(k.Input,{id:"url",type:"url",value:F.url,onChange:a=>G(b=>({...b,url:a.target.value})),placeholder:"https://your-app.com/webhooks/inbound",className:R.url?"border-red-500":"",autoFocus:!0}),R.url&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:R.url})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(l.Label,{children:"Webhook Format"}),(0,d.jsx)("div",{className:"grid gap-3",children:Object.entries(h.WEBHOOK_FORMAT_CONFIGS).map(([a,b])=>{let c="slack"===a;return(0,d.jsx)("div",{className:`relative rounded-lg border p-4 transition-all ${c?"border-border bg-muted cursor-not-allowed opacity-60":D===a?"border-primary bg-primary/5 ring-1 ring-primary cursor-pointer":"border-border hover:border-border/80 cursor-pointer"}`,onClick:()=>!c&&E(a),children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)("div",{className:`mt-0.5 h-4 w-4 rounded-full border-2 transition-colors ${c?"border-muted-foreground bg-muted":D===a?"border-primary bg-primary":"border-muted-foreground"}`,children:D===a&&!c&&(0,d.jsx)("div",{className:"h-full w-full rounded-full bg-background scale-50"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h4",{className:"font-medium text-foreground",children:b.name}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:b.description}),"discord"===a&&(0,d.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:"Perfect for Discord channels with rich embeds"}),"slack"===a&&(0,d.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:"Coming soon - Slack-compatible format"})]})]})},a)})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"timeout",children:"Timeout (seconds)"}),(0,d.jsx)(k.Input,{id:"timeout",type:"number",min:"1",max:"300",value:F.timeout||"",onChange:a=>G(b=>({...b,timeout:parseInt(a.target.value)||30})),className:R.timeout?"border-red-500":""}),R.timeout&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:R.timeout})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"retryAttempts",children:"Retry Attempts"}),(0,d.jsx)(k.Input,{id:"retryAttempts",type:"number",min:"0",max:"10",value:F.retryAttempts||"",onChange:a=>G(b=>({...b,retryAttempts:parseInt(a.target.value)||3})),className:R.retryAttempts?"border-red-500":""}),R.retryAttempts&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:R.retryAttempts})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{children:"Custom Headers (Optional)"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(k.Input,{placeholder:"Header name",value:H,onChange:a=>I(a.target.value),onKeyDown:a=>"Enter"===a.key&&(a.preventDefault(),$())}),(0,d.jsx)(k.Input,{placeholder:"Header value",value:J,onChange:a=>K(a.target.value),onKeyDown:a=>"Enter"===a.key&&(a.preventDefault(),$())}),(0,d.jsx)(j.Button,{type:"button",variant:"secondary",size:"sm",onClick:$,disabled:!H.trim()||!J.trim(),children:(0,d.jsx)(p.default,{className:"h-4 w-4"})})]}),Object.entries(F.headers||{}).length>0&&(0,d.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:Object.entries(F.headers||{}).map(([a,b])=>(0,d.jsxs)(n.Badge,{variant:"secondary",className:"text-xs",children:[a,": ",b,(0,d.jsx)("button",{type:"button",onClick:()=>_(a),className:"ml-1 hover:text-red-500",children:(0,d.jsx)(q.default,{className:"h-3 w-3"})})]},a))})]})]}),"email"===z&&(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 dark:bg-blue-900/20 mx-auto mb-4",children:(0,d.jsx)(s.default,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Email Forward Ready"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Your email forward is configured and ready to create."}),(0,d.jsx)("div",{className:"bg-muted rounded-lg p-4 text-left",children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Forward to:"}),(0,d.jsx)("span",{className:"text-sm font-mono",children:L.forwardTo})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Name:"}),(0,d.jsx)("span",{className:"text-sm",children:B.name})]}),B.description&&(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Description:"}),(0,d.jsx)("span",{className:"text-sm",children:B.description})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Include attachments:"}),(0,d.jsx)("span",{className:"text-sm",children:L.includeAttachments?"Yes":"No"})]}),L.subjectPrefix&&(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"Subject prefix:"}),(0,d.jsx)("span",{className:"text-sm font-mono",children:L.subjectPrefix})]})]})})]}),"email_group"===z&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{children:"Email Recipients *"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(k.Input,{placeholder:"recipient@example.com",value:P,onChange:a=>Q(a.target.value),onKeyDown:a=>"Enter"===a.key&&(a.preventDefault(),aa()),autoFocus:!0}),(0,d.jsx)(j.Button,{type:"button",variant:"secondary",size:"sm",onClick:aa,disabled:!P.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P.trim()),children:(0,d.jsx)(p.default,{className:"h-4 w-4"})})]}),N.emails.length>0&&(0,d.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:N.emails.map(a=>(0,d.jsxs)(n.Badge,{variant:"secondary",className:"text-xs",children:[a,(0,d.jsx)("button",{type:"button",onClick:()=>ab(a),className:"ml-1 hover:text-red-500",children:(0,d.jsx)(q.default,{className:"h-3 w-3"})})]},a))}),R.emails&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:R.emails})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"subjectPrefix",children:"Subject Prefix"}),(0,d.jsx)(k.Input,{id:"subjectPrefix",value:N.subjectPrefix,onChange:a=>O(b=>({...b,subjectPrefix:a.target.value})),placeholder:"[Forwarded] "}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Optional prefix to add to forwarded email subjects"})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{className:"text-sm font-medium",children:"Include Attachments"}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Forward email attachments"})]}),(0,d.jsx)(o.Switch,{checked:N.includeAttachments,onCheckedChange:a=>O(b=>({...b,includeAttachments:a}))})]})]})]})]}),(0,d.jsxs)(i.DialogFooter,{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"flex items-center gap-2",children:"type"!==c&&(0,d.jsxs)(j.Button,{variant:"secondary",onClick:()=>{"config"===c?y("basic"):"basic"===c&&y("type")},tabIndex:0,children:[(0,d.jsx)(u.default,{className:"h-4 w-4 mr-1"}),"Previous"]})}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(j.Button,{variant:"secondary",onClick:Z,tabIndex:0,children:"Cancel"}),"config"===c?(0,d.jsx)(j.Button,{type:"submit",form:"endpoint-form",onClick:Y,disabled:T.isPending||!z,variant:"primary",tabIndex:0,children:T.isPending?"Creating...":"Create Endpoint"}):(0,d.jsxs)(j.Button,{onClick:X,disabled:!W(),tabIndex:0,children:["Next",(0,d.jsx)(v.default,{className:"h-4 w-4 ml-1"})]})]})]})]})})}},25644:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({EditEndpointDialog:()=>x});var d=a.i(674420),e=a.i(722851);a.i(440712);var f=a.i(19745),g=a.i(260118),h=a.i(356785),i=a.i(232997),j=a.i(378903),k=a.i(668018),l=a.i(386483),m=a.i(487085),n=a.i(238769),o=a.i(526146),p=a.i(974137),q=a.i(342064),r=a.i(58901),s=a.i(483182),t=a.i(300096),u=a.i(569164),v=a.i(313812),w=a.i(323772);function x({open:a,onOpenChange:b,endpoint:c}){let[x,y]=(0,e.useState)({name:"",description:"",isActive:!0}),[z,A]=(0,e.useState)("inbound"),[B,C]=(0,e.useState)({url:"",timeout:30,retryAttempts:3,headers:{}}),[D,E]=(0,e.useState)(""),[F,G]=(0,e.useState)(""),[H,I]=(0,e.useState)({forwardTo:"",includeAttachments:!0,subjectPrefix:"",fromAddress:""}),[J,K]=(0,e.useState)({emails:[],includeAttachments:!0,subjectPrefix:"",fromAddress:""}),[L,M]=(0,e.useState)(""),[N,O]=(0,e.useState)({}),P=(0,f.useUpdateEndpointMutation)(),{data:Q}=(0,g.useDomainsStatsQuery)(),R=Q?.domains?.filter(a=>a.isVerified)||[];(0,e.useEffect)(()=>{let b=a=>{(a.metaKey||a.ctrlKey)&&"Enter"===a.key&&(a.preventDefault(),!P.isPending&&c&&S()&&T(a))};return a&&document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[a,P.isPending,c,x,B,H,J]),(0,e.useEffect)(()=>{if(c&&a){y({name:c.name,description:c.description||"",isActive:c.isActive??!0}),"webhook"===c.type&&A(c.webhookFormat||"inbound");let a={};if(c.config)try{a=JSON.parse(c.config)}catch(b){console.error("Failed to parse endpoint config:",b),a={}}"webhook"===c.type?C({url:a.url||"",timeout:a.timeout||30,retryAttempts:a.retryAttempts||3,headers:a.headers||{}}):"email"===c.type?I({forwardTo:a.forwardTo||"",includeAttachments:a.includeAttachments??!0,subjectPrefix:a.subjectPrefix||"",fromAddress:a.fromAddress||""}):"email_group"===c.type&&K({emails:a.emails||[],includeAttachments:a.includeAttachments??!0,subjectPrefix:a.subjectPrefix||"",fromAddress:a.fromAddress||""}),O({})}},[c,a]);let S=()=>{let a={};if(x.name?.trim()||(a.name="Name is required"),!c)return O(a),!1;if("webhook"===c.type){if(B.url.trim())try{new URL(B.url)}catch{a.url="Please enter a valid URL"}else a.url="URL is required";B.timeout&&(B.timeout<1||B.timeout>300)&&(a.timeout="Timeout must be between 1 and 300 seconds"),B.retryAttempts&&(B.retryAttempts<0||B.retryAttempts>10)&&(a.retryAttempts="Retry attempts must be between 0 and 10")}return"email"===c.type&&(H.forwardTo.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(H.forwardTo)||(a.forwardTo="Please enter a valid email address"):a.forwardTo="Forward to email is required"),"email_group"===c.type&&0===J.emails.length&&(a.emails="At least one email address is required"),O(a),0===Object.keys(a).length},T=async a=>{let b;if(a.preventDefault(),!c||!S())return;switch(c.type){case"webhook":b=B;break;case"email":b=H;break;case"email_group":b=J;break;default:return}let d={...x,webhookFormat:"webhook"===c.type?z:void 0,config:b};try{await P.mutateAsync({id:c.id,data:d}),w.toast.success("Endpoint updated successfully!"),U()}catch(a){w.toast.error(a instanceof Error?a.message:"Failed to update endpoint")}},U=()=>{E(""),G(""),M(""),O({}),b(!1)},V=()=>{D.trim()&&F.trim()&&(C(a=>({...a,headers:{...a.headers,[D.trim()]:F.trim()}})),E(""),G(""))},W=a=>{C(b=>{let c={...b.headers};return delete c[a],{...b,headers:c}})},X=()=>{L.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L.trim())&&!J.emails.includes(L.trim())&&(K(a=>({...a,emails:[...a.emails,L.trim()]})),M(""))},Y=a=>{K(b=>({...b,emails:b.emails.filter(b=>b!==a)}))};if(!c)return null;let{icon:Z,color:$}=(()=>{switch(c?.type){case"webhook":return{icon:t.default,color:"purple"};case"email":return{icon:u.default,color:"blue"};case"email_group":return{icon:v.default,color:"green"};default:return{icon:q.default,color:"gray"}}})();return(0,d.jsx)(i.Dialog,{open:a,onOpenChange:b,children:(0,d.jsxs)(i.DialogContent,{className:"sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,d.jsx)(i.DialogHeader,{children:(0,d.jsxs)(i.DialogTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-muted",children:(0,d.jsx)(Z,{className:"h-4 w-4 text-muted-foreground"})}),"Edit Endpoint"]})}),(0,d.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(l.Label,{className:"text-sm font-medium",children:"Status"}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enable or disable this endpoint"})]}),(0,d.jsx)(p.Switch,{checked:x.isActive,onCheckedChange:a=>y(b=>({...b,isActive:a}))})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-foreground border-b border-border pb-2",children:"Basic Information"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"name",children:"Name *"}),(0,d.jsx)(k.Input,{id:"name",value:x.name||"",onChange:a=>y(b=>({...b,name:a.target.value})),placeholder:`${"webhook"===c.type?"Production Webhook":"email"===c.type?"Support Email Forward":"Team Email Group"}`,className:N.name?"border-red-500":""}),N.name&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:N.name})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"description",children:"Description"}),(0,d.jsx)(m.Textarea,{id:"description",value:x.description||"",onChange:a=>y(b=>({...b,description:a.target.value})),placeholder:"Optional description of this endpoint's purpose",rows:3})]}),"webhook"===c.type&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"url",children:"URL *"}),(0,d.jsx)(k.Input,{id:"url",type:"url",value:B.url||"",onChange:a=>C(b=>({...b,url:a.target.value})),placeholder:"https://your-app.com/webhooks/inbound",className:N.url?"border-red-500":""}),N.url&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:N.url})]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-sm font-medium text-foreground border-b border-border pb-2",children:"Configuration"}),"webhook"===c.type&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(l.Label,{children:"Webhook Format"}),(0,d.jsx)("div",{className:"grid gap-3",children:Object.entries(h.WEBHOOK_FORMAT_CONFIGS).map(([a,b])=>{let c="slack"===a;return(0,d.jsx)("div",{className:`relative rounded-lg border p-4 transition-all ${c?"border-border bg-muted cursor-not-allowed opacity-60":z===a?"border-primary bg-accent ring-1 ring-primary cursor-pointer":"border-border hover:border-muted-foreground cursor-pointer"}`,onClick:()=>!c&&A(a),children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)("div",{className:`mt-0.5 h-4 w-4 rounded-full border-2 transition-colors ${c?"border-muted-foreground bg-muted":z===a?"border-primary bg-primary":"border-muted-foreground"}`,children:z===a&&!c&&(0,d.jsx)("div",{className:"h-full w-full rounded-full bg-white scale-50"})}),(0,d.jsx)("div",{className:"flex-1 min-w-0",children:(0,d.jsx)("h4",{className:"font-medium text-foreground",children:b.name})})]})},a)})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"timeout",children:"Timeout (seconds)"}),(0,d.jsx)(k.Input,{id:"timeout",type:"number",min:"1",max:"300",value:B.timeout||"",onChange:a=>C(b=>({...b,timeout:parseInt(a.target.value)||30})),className:N.timeout?"border-red-500":""}),N.timeout&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:N.timeout})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"retryAttempts",children:"Retry Attempts"}),(0,d.jsx)(k.Input,{id:"retryAttempts",type:"number",min:"0",max:"10",value:B.retryAttempts||"",onChange:a=>C(b=>({...b,retryAttempts:parseInt(a.target.value)||3})),className:N.retryAttempts?"border-red-500":""}),N.retryAttempts&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:N.retryAttempts})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{children:"Custom Headers"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(k.Input,{placeholder:"Header name",value:D,onChange:a=>E(a.target.value),onKeyDown:a=>"Enter"===a.key&&(a.preventDefault(),V())}),(0,d.jsx)(k.Input,{placeholder:"Header value",value:F,onChange:a=>G(a.target.value),onKeyDown:a=>"Enter"===a.key&&(a.preventDefault(),V())}),(0,d.jsx)(j.Button,{type:"button",variant:"secondary",size:"sm",onClick:V,disabled:!D.trim()||!F.trim(),children:(0,d.jsx)(s.default,{className:"h-4 w-4"})})]}),Object.entries(B.headers||{}).length>0&&(0,d.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:Object.entries(B.headers||{}).map(([a,b])=>(0,d.jsxs)(n.Badge,{variant:"secondary",className:"text-xs",children:[a,": ",b,(0,d.jsx)("button",{type:"button",onClick:()=>W(a),className:"ml-1 hover:text-red-500",children:(0,d.jsx)(r.default,{className:"h-3 w-3"})})]},a))})]})]}),"email"===c.type&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"forwardTo",children:"Forward To Email *"}),(0,d.jsx)(k.Input,{id:"forwardTo",type:"email",value:H.forwardTo||"",onChange:a=>I(b=>({...b,forwardTo:a.target.value})),placeholder:"support@yourcompany.com",className:N.forwardTo?"border-red-500":""}),N.forwardTo&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:N.forwardTo})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"fromAddress",children:"From Address"}),(0,d.jsxs)(o.Select,{value:H.fromAddress||"auto-detect",onValueChange:a=>I(b=>({...b,fromAddress:"auto-detect"===a?"":a})),children:[(0,d.jsx)(o.SelectTrigger,{children:(0,d.jsx)(o.SelectValue,{placeholder:"Auto-detect from domain"})}),(0,d.jsxs)(o.SelectContent,{children:[(0,d.jsx)(o.SelectItem,{value:"auto-detect",children:"Auto-detect from domain"}),R.map(a=>(0,d.jsxs)(o.SelectItem,{value:`noreply@${a.domain}`,children:["noreply@",a.domain]},a.id))]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"subjectPrefix",children:"Subject Prefix"}),(0,d.jsx)(k.Input,{id:"subjectPrefix",value:H.subjectPrefix||"",onChange:a=>I(b=>({...b,subjectPrefix:a.target.value})),placeholder:"[Support]"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(p.Switch,{id:"includeAttachments",checked:H.includeAttachments,onCheckedChange:a=>I(b=>({...b,includeAttachments:a}))}),(0,d.jsx)(l.Label,{htmlFor:"includeAttachments",children:"Include attachments"})]})]}),"email_group"===c.type&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"emails",children:"Email Addresses *"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(k.Input,{id:"emails",type:"email",placeholder:"team@yourcompany.com",value:L,onChange:a=>M(a.target.value),onKeyDown:a=>"Enter"===a.key&&(a.preventDefault(),X())}),(0,d.jsx)(j.Button,{type:"button",variant:"secondary",size:"sm",onClick:X,disabled:!L.trim()||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L.trim()),children:(0,d.jsx)(s.default,{className:"h-4 w-4"})})]}),J.emails.length>0&&(0,d.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:J.emails.map(a=>(0,d.jsxs)(n.Badge,{variant:"secondary",className:"text-xs",children:[a,(0,d.jsx)("button",{type:"button",onClick:()=>Y(a),className:"ml-1 hover:text-red-500",children:(0,d.jsx)(r.default,{className:"h-3 w-3"})})]},a))}),N.emails&&(0,d.jsx)("p",{className:"text-sm text-red-500",children:N.emails})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"fromAddressGroup",children:"From Address"}),(0,d.jsxs)(o.Select,{value:J.fromAddress||"auto-detect",onValueChange:a=>K(b=>({...b,fromAddress:"auto-detect"===a?"":a})),children:[(0,d.jsx)(o.SelectTrigger,{children:(0,d.jsx)(o.SelectValue,{placeholder:"Auto-detect from domain"})}),(0,d.jsxs)(o.SelectContent,{children:[(0,d.jsx)(o.SelectItem,{value:"auto-detect",children:"Auto-detect from domain"}),R.map(a=>(0,d.jsxs)(o.SelectItem,{value:`noreply@${a.domain}`,children:["noreply@",a.domain]},a.id))]})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(l.Label,{htmlFor:"subjectPrefixGroup",children:"Subject Prefix"}),(0,d.jsx)(k.Input,{id:"subjectPrefixGroup",value:J.subjectPrefix||"",onChange:a=>K(b=>({...b,subjectPrefix:a.target.value})),placeholder:"[Team]"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(p.Switch,{id:"includeAttachmentsGroup",checked:J.includeAttachments,onCheckedChange:a=>K(b=>({...b,includeAttachments:a}))}),(0,d.jsx)(l.Label,{htmlFor:"includeAttachmentsGroup",children:"Include attachments"})]})]})]})]})]}),(0,d.jsxs)(i.DialogFooter,{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:"Press Cmd+Enter to submit"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(j.Button,{variant:"secondary",onClick:U,children:"Cancel"}),(0,d.jsx)(j.Button,{onClick:T,disabled:P.isPending,children:P.isPending?"Updating...":"Update Endpoint"})]})]})]})})}},573948:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({DeleteEndpointDialog:()=>n});var d=a.i(674420),e=a.i(722851);a.i(440712);var f=a.i(208649),g=a.i(232997),h=a.i(378903),i=a.i(164929),j=a.i(300096),k=a.i(569164),l=a.i(313812),m=a.i(323772);function n({open:a,onOpenChange:b,endpoint:c}){let n=(0,f.useDeleteEndpointMutation)();(0,e.useEffect)(()=>{let b=a=>{(a.metaKey||a.ctrlKey)&&"Enter"===a.key&&(a.preventDefault(),!n.isPending&&c&&o())};return a&&document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[a,n.isPending,c]);let o=async()=>{if(c)try{let a=await n.mutateAsync(c.id);a?.message?m.toast.success(a.message):m.toast.success("Endpoint deleted successfully!"),b(!1)}catch(a){m.toast.error(a instanceof Error?a.message:"Failed to delete endpoint")}},p=()=>{switch(c?.type){case"webhook":return"Webhook";case"email":return"Email Forward";case"email_group":return"Email Group";default:return"Endpoint"}};if(!c)return null;let q=(()=>{switch(c?.type){case"webhook":return j.default;case"email":return k.default;case"email_group":return l.default;default:return i.default}})(),r=(()=>{if(!c?.config)return null;try{let a=JSON.parse(c.config);switch(c.type){case"webhook":return a.url;case"email":return`â†’ ${a.forwardTo}`;case"email_group":return`â†’ ${a.emails?.length||0} recipients`;default:return null}}catch{return null}})();return(0,d.jsx)(g.Dialog,{open:a,onOpenChange:b,children:(0,d.jsxs)(g.DialogContent,{className:"sm:max-w-md",children:[(0,d.jsx)(g.DialogHeader,{children:(0,d.jsxs)(g.DialogTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-destructive/20",children:(0,d.jsx)(i.default,{className:"h-4 w-4 text-destructive"})}),"Delete ",p()]})}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4",children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)(i.default,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-destructive mb-1",children:"This action cannot be undone"}),(0,d.jsxs)("p",{className:"text-sm text-destructive/80",children:["Deleting this ",p().toLowerCase()," will permanently remove it and stop all email deliveries to this endpoint."]})]})]})}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("p",{className:"text-sm text-muted-foreground",children:["You are about to delete the ",p().toLowerCase(),":"]}),(0,d.jsxs)("div",{className:"bg-muted rounded-lg p-3 border border-border",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,d.jsx)(q,{className:"h-4 w-4 text-muted-foreground"}),(0,d.jsx)("div",{className:"font-medium text-foreground",children:c.name}),(0,d.jsx)("span",{className:"text-xs px-2 py-1 bg-muted text-muted-foreground rounded-full",children:p()})]}),r&&(0,d.jsx)("div",{className:"text-sm text-muted-foreground font-mono",children:r}),c.description&&(0,d.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:c.description})]})]}),(0,d.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,d.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,d.jsx)("strong",{children:"Note:"}),' Any email addresses using this endpoint will be automatically switched to "store-only" mode (emails will be received and stored but not forwarded).']})})]}),(0,d.jsxs)(g.DialogFooter,{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:"Press Cmd+Enter to delete"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(h.Button,{variant:"secondary",onClick:()=>b(!1),children:"Cancel"}),(0,d.jsx)(h.Button,{onClick:o,disabled:n.isPending,variant:"destructive",children:n.isPending?"Deleting...":`Delete ${p()}`})]})]})]})})}},604626:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({DeleteMultipleEndpointsDialog:()=>b});var d=a.i(674420),e=a.i(378903),f=a.i(232997);a.i(440712);var g=a.i(786242),h=a.i(164929),i=a.i(323772);let b=({open:a,onOpenChange:b,endpoints:c,onSuccess:j})=>{let k=(0,g.useDeleteMultipleEndpointsMutation)(),l=async()=>{try{let a=c.map(a=>a.id),d=await k.mutateAsync(a);if(d.success){let a=d.message||`Successfully deleted ${d.deletedCount} endpoint${1!==d.deletedCount?"s":""}`;i.toast.success(a),b(!1),j?.()}else i.toast.error(d.error||"Failed to delete endpoints")}catch(a){console.error("Error deleting endpoints:",a),i.toast.error("Failed to delete endpoints")}};return(0,d.jsx)(f.Dialog,{open:a,onOpenChange:b,children:(0,d.jsxs)(f.DialogContent,{className:"sm:max-w-md",children:[(0,d.jsx)(f.DialogHeader,{children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-destructive/20",children:(0,d.jsx)(h.default,{className:"h-6 w-6 text-destructive"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)(f.DialogTitle,{children:"Delete Multiple Endpoints"}),(0,d.jsxs)(f.DialogDescription,{children:["Are you sure you want to delete ",c.length," endpoint",1!==c.length?"s":"","?"]})]})]})}),(0,d.jsx)("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:(0,d.jsxs)("div",{className:"text-sm text-foreground",children:[(0,d.jsx)("div",{className:"font-medium mb-2",children:"You are about to delete:"}),(0,d.jsx)("div",{className:"text-muted-foreground",children:Object.entries(c.reduce((a,b)=>(a[b.type]=(a[b.type]||0)+1,a),{})).map(([a,b])=>`${b} ${"webhook"===a?"webhook":"email"===a?"email forward":"email_group"===a?"email group":"endpoint"}${1!==b?"s":""}`).join(", ")}),(0,d.jsxs)("div",{className:"mt-3 space-y-1",children:[c.slice(0,5).map(a=>(0,d.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:["â€¢ ",a.name]},a.id)),c.length>5&&(0,d.jsxs)("div",{className:"text-xs text-muted-foreground",children:["... and ",c.length-5," more"]})]})]})}),(0,d.jsx)("div",{className:"mt-4 p-4 bg-destructive/10 border border-destructive/20 rounded-lg",children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)(h.default,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-destructive mb-1",children:"This action cannot be undone"}),(0,d.jsx)("p",{className:"text-sm text-destructive/80",children:"Deleting these endpoints will permanently remove them and stop all email deliveries to these endpoints."})]})]})}),(0,d.jsxs)(f.DialogFooter,{children:[(0,d.jsx)(e.Button,{variant:"secondary",onClick:()=>b(!1),children:"Cancel"}),(0,d.jsx)(e.Button,{onClick:l,disabled:k.isPending,variant:"destructive",children:k.isPending?"Deleting...":`Delete ${c.length} Endpoint${1!==c.length?"s":""}`})]})]})})}}},350162:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({TestEndpointDialog:()=>u});var d=a.i(674420),e=a.i(722851);a.i(440712);var f=a.i(522749),g=a.i(232997),h=a.i(378903),i=a.i(238769),j=a.i(526146),k=a.i(386483),l=a.i(49641),m=a.i(195743),n=a.i(58901),o=a.i(180214),p=a.i(164929),q=a.i(300096),r=a.i(569164),s=a.i(313812),t=a.i(323772);function u({open:a,onOpenChange:b,endpoint:c}){let[u,v]=(0,e.useState)(null),[w,x]=(0,e.useState)("inbound"),y=(0,f.useTestEndpointMutation)();(0,e.useEffect)(()=>{let b=a=>{(a.metaKey||a.ctrlKey)&&"Enter"===a.key&&(a.preventDefault(),!y.isPending&&c?.isActive&&z())};return a&&document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[a,y.isPending,c]);let z=async()=>{if(c)try{v(null);let a=await y.mutateAsync({id:c.id,webhookFormat:"webhook"===c.type?w:void 0});v({...a,timestamp:new Date}),a.success?t.toast.success("Endpoint test completed successfully!"):t.toast.error(a.message||"Endpoint test failed")}catch(b){let a=b instanceof Error?b.message:"Test failed";v({success:!1,message:a,responseTime:0,error:a,timestamp:new Date}),t.toast.error(a)}},A=()=>{switch(c?.type){case"webhook":return"Webhook";case"email":return"Email Forward";case"email_group":return"Email Group";default:return"Endpoint"}};if(!c)return null;let B=(()=>{switch(c?.type){case"webhook":return q.default;case"email":return r.default;case"email_group":return s.default;default:return l.default}})(),C=(()=>{if(!c?.config)return null;try{let a=JSON.parse(c.config);switch(c.type){case"webhook":return a.url;case"email":return`Forward to: ${a.forwardTo}`;case"email_group":return`Forward to: ${a.emails?.length||0} recipients`;default:return null}}catch{return null}})();return(0,d.jsx)(g.Dialog,{open:a,onOpenChange:b,children:(0,d.jsxs)(g.DialogContent,{className:"sm:max-w-lg",children:[(0,d.jsx)(g.DialogHeader,{children:(0,d.jsxs)(g.DialogTitle,{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:(0,d.jsx)(l.default,{width:"16",height:"16",className:"text-primary"})}),"Test ",A()]})}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"bg-muted rounded-lg p-4 border border-border",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,d.jsx)(B,{width:"16",height:"16",className:"text-muted-foreground"}),(0,d.jsx)("h4",{className:"font-medium text-foreground",children:c.name}),(0,d.jsx)(i.Badge,{variant:"secondary",className:"text-xs",children:A()}),(0,d.jsx)(i.Badge,{className:`text-xs ${c.isActive?"bg-green-100 text-green-700 border-green-200 dark:bg-green-900/20 dark:text-green-400 dark:border-green-800":"bg-muted text-muted-foreground border-border"}`,children:c.isActive?"Active":"Inactive"})]}),C&&(0,d.jsx)("p",{className:"text-sm text-muted-foreground font-mono break-all",children:C}),c.description&&(0,d.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:c.description})]}),"webhook"===c.type&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)(k.Label,{htmlFor:"webhook-format",className:"text-sm font-medium",children:"Webhook Format"}),(0,d.jsxs)(j.Select,{value:w,onValueChange:a=>x(a),children:[(0,d.jsx)(j.SelectTrigger,{id:"webhook-format",children:(0,d.jsx)(j.SelectValue,{placeholder:"Select webhook format"})}),(0,d.jsxs)(j.SelectContent,{children:[(0,d.jsxs)(j.SelectItem,{value:"inbound",className:"flex flex-col items-start py-3 gap-1",children:[(0,d.jsx)("span",{className:"font-medium",children:"Inbound Format"}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"Standard email webhook with full data"})]}),(0,d.jsxs)(j.SelectItem,{value:"discord",className:"flex flex-col items-start py-3 gap-1",children:[(0,d.jsx)("span",{className:"font-medium",children:"Discord Format"}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"Discord-compatible webhook with rich embeds"})]}),(0,d.jsxs)(j.SelectItem,{value:"slack",className:"flex flex-col items-start py-3 gap-1",children:[(0,d.jsx)("span",{className:"font-medium",children:"Slack Format"}),(0,d.jsx)("span",{className:"text-xs text-muted-foreground ml-2",children:"Slack-compatible webhook with attachments"})]})]})]})]}),!c.isActive&&(0,d.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 dark:bg-yellow-900/20 dark:border-yellow-800",children:(0,d.jsxs)("div",{className:"flex items-start gap-2",children:[(0,d.jsx)(p.default,{width:"16",height:"16",className:"text-yellow-600 dark:text-yellow-500 mt-0.5 flex-shrink-0"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-400 mb-1",children:"Endpoint is disabled"}),(0,d.jsx)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:"This endpoint is currently disabled and won't receive real emails. You can still test it, but it won't be triggered by actual email deliveries."})]})]})}),u&&(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-foreground",children:"Test Results"}),(0,d.jsx)("div",{className:`p-3 rounded-lg border ${u.success?"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800":"bg-destructive/10 border-destructive/20"}`,children:(0,d.jsxs)("div",{className:"flex items-start gap-2",children:[u.success?(0,d.jsx)(m.default,{width:"16",height:"16",className:"text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}):(0,d.jsx)(n.default,{width:"16",height:"16",className:"text-destructive mt-0.5 flex-shrink-0"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("div",{className:`text-sm font-medium mb-1 ${u.success?"text-green-800 dark:text-green-400":"text-destructive"}`,children:u.success?"Test Successful":"Test Failed"}),u.message&&(0,d.jsx)("p",{className:`text-sm ${u.success?"text-green-700 dark:text-green-300":"text-destructive/80"}`,children:u.message}),u.error&&(0,d.jsx)("p",{className:"text-sm text-destructive/80 font-mono mt-1",children:u.error}),(0,d.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[u.statusCode&&(0,d.jsxs)("span",{children:["Status: ",u.statusCode]}),void 0!==u.responseTime&&(0,d.jsxs)("span",{children:["Response: ",u.responseTime,"ms"]}),u.webhookFormat&&(0,d.jsxs)("span",{children:["Format: ",u.webhookFormat]}),(0,d.jsxs)("span",{children:[(0,d.jsx)(o.default,{width:"12",height:"12",className:"inline mr-1"}),u.timestamp.toLocaleTimeString()]})]})]})]})})]}),(0,d.jsxs)("div",{className:"bg-muted rounded-lg p-3",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,d.jsx)(l.default,{width:"16",height:"16",className:"text-muted-foreground"}),(0,d.jsx)("h4",{className:"text-sm font-medium text-foreground",children:"Test Information"})]}),(0,d.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[(0,d.jsx)("p",{children:"â€¢ This will send a test email to your endpoint"}),(0,d.jsx)("p",{children:"â€¢ The test email contains sample data to verify your endpoint is working"}),(0,d.jsx)("p",{children:"â€¢ Check your endpoint logs to see the received data"}),"webhook"===c.type&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{children:"â€¢ For webhooks, we'll send a POST request with email data in the selected format"}),(0,d.jsx)("p",{children:"â€¢ Inbound format: Full email data with headers and metadata"}),(0,d.jsx)("p",{children:"â€¢ Discord format: Rich embeds compatible with Discord webhooks"}),(0,d.jsx)("p",{children:"â€¢ Slack format: Attachments compatible with Slack webhooks"})]}),("email"===c.type||"email_group"===c.type)&&(0,d.jsx)("p",{children:"â€¢ For email forwards, we'll validate the configuration without sending actual emails"})]})]})]}),(0,d.jsxs)(g.DialogFooter,{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:"Press Cmd+Enter to test"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(h.Button,{variant:"secondary",onClick:()=>b(!1),children:"Close"}),(0,d.jsx)(h.Button,{onClick:z,disabled:y.isPending,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:y.isPending?"Testing...":"Run Test"})]})]})]})})}},955691:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({}),a.i(71710),a.i(25644),a.i(573948),a.i(604626),a.i(350162),a.i(924796)},686036:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({}),a.i(71710),a.i(25644),a.i(573948),a.i(604626),a.i(350162),a.i(924796),a.i(955691)},143421:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>G});var d=a.i(674420),e=a.i(722851);a.i(440712);var f=a.i(12237),g=a.i(201446);a.i(686036);var h=a.i(71710),i=a.i(25644),j=a.i(573948),k=a.i(604626),l=a.i(350162),m=a.i(123546),n=a.i(238769),o=a.i(378903),p=a.i(668018),q=a.i(526146),r=a.i(222239),s=a.i(195743),t=a.i(840462),u=a.i(483182),v=a.i(188126),w=a.i(300096),x=a.i(569164),y=a.i(313812),z=a.i(520910),A=a.i(49641),B=a.i(342064),C=a.i(960830),D=a.i(212242),E=a.i(566825),F=a.i(323772);function G(){let{data:a=[],isLoading:b,error:c,refetch:G,migrationInProgress:H,migrationChecked:I}=(0,f.useEndpointsQuery)(),J=(0,g.useMigrationMutation)(),[K,L]=(0,e.useState)(null),[M,N]=(0,e.useState)(!1),[O,P]=(0,e.useState)(""),[Q,R]=(0,e.useState)("all"),[S,T]=(0,e.useState)("all"),[U,V]=(0,e.useState)(new Set),[W,X]=(0,e.useState)(!1),[Y,Z]=(0,e.useState)(null);(0,e.useEffect)(()=>{I&&!H&&a.length>0&&a.some(a=>a.description?.includes("Migrated from webhook:"))&&(N(!0),setTimeout(()=>N(!1),1e4))},[I,H,a]);let[$,_]=(0,e.useState)(!1),[aa,ab]=(0,e.useState)(!1),[ac,ad]=(0,e.useState)(!1),[ae,af]=(0,e.useState)(!1),[ag,ah]=(0,e.useState)(!1),ai=(0,e.useMemo)(()=>a=>{if(!a.config)return null;try{let b=JSON.parse(a.config);switch(a.type){case"webhook":return new URL(b.url).hostname;case"email":return b.forwardTo;case"email_group":return`${b.emails?.length||0} recipients`;default:return null}}catch{return null}},[]),aj=(0,e.useMemo)(()=>a.filter(a=>{let b=ai(a),c=""===O||a.name.toLowerCase().includes(O.toLowerCase())||a.description?.toLowerCase().includes(O.toLowerCase())||b?.toLowerCase().includes(O.toLowerCase()),d="all"===Q||a.type===Q,e="all"===S||"active"===S&&a.isActive||"disabled"===S&&!a.isActive;return c&&d&&e}),[a,O,Q,S,ai]);(0,e.useEffect)(()=>{0===aj.length&&U.size>0&&(V(new Set),X(!1))},[aj.length,U.size]);let ak=(0,e.useMemo)(()=>0!==aj.length&&aj.every(a=>U.has(a.id)),[aj,U]);(0,e.useEffect)(()=>{X(ak)},[ak]);let al=a=>{Z(a),ah(!0)},am=a=>{Z(a),ab(!0)},an=a=>{Z(a),ad(!0)},ao=(a,b)=>{let c=new Set(U);b?c.add(a):c.delete(a),V(c)},ap=()=>{V(new Set),X(!1)},aq=a=>a.isActive?(0,d.jsx)(n.Badge,{className:"bg-emerald-500 text-white rounded-full px-0.5 py-0.5 text-xs font-medium shadow-sm",title:"Active",children:(0,d.jsx)(s.default,{width:"12",height:"12"})}):(0,d.jsx)(n.Badge,{className:"bg-gray-400 text-white rounded-full px-2.5 py-0.5 text-xs font-medium shadow-sm",title:"Not Active",children:(0,d.jsx)(t.default,{width:"12",height:"12"})}),ar=a=>{switch(a.type){case"webhook":return w.default;case"email":return x.default;case"email_group":return y.default;default:return z.default}},as=a=>{if(!a.isActive)return"hsl(var(--muted-foreground))";switch(a.type){case"webhook":return"hsl(262, 83%, 58%)";case"email":return"hsl(221, 83%, 53%)";case"email_group":return"hsl(142, 76%, 36%)";default:return"hsl(var(--muted-foreground))"}},at=a.length,au=a.filter(a=>a.isActive).length,av=a.filter(a=>"webhook"===a.type).length,aw=a.filter(a=>"email"===a.type).length,ax=a.filter(a=>"email_group"===a.type).length,ay=a.filter(a=>U.has(a.id));return b||H?(0,d.jsx)("div",{className:"min-h-screen p-4 font-outfit",children:(0,d.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,d.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-muted-foreground mb-2",children:H?"Migrating webhooks to endpoints...":"Loading endpoints..."}),H&&(0,d.jsx)("div",{className:"text-sm text-blue-600",children:"We're automatically importing your existing webhooks into the new endpoints system"})]})})})}):c?(0,d.jsx)("div",{className:"min-h-screen p-4 font-outfit",children:(0,d.jsx)("div",{className:"max-w-5xl mx-auto",children:(0,d.jsx)(m.Card,{className:"border-destructive/50 bg-destructive/10",children:(0,d.jsx)(m.CardContent,{className:"p-6",children:(0,d.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,d.jsx)(t.default,{width:"16",height:"16"}),(0,d.jsx)("span",{children:c.message}),(0,d.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:()=>G(),className:"ml-auto text-destructive hover:text-destructive/80",children:"Try Again"})]})})})})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"min-h-screen p-4 font-outfit",children:(0,d.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between rounded-lg mb-6 mt-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-semibold mb-1",children:"Endpoint Management"}),(0,d.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,d.jsxs)("span",{children:[at," endpoints"]}),(0,d.jsxs)("span",{children:[au," active"]}),av>0&&(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(w.default,{width:"12",height:"12"}),av," webhooks"]}),aw>0&&(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(x.default,{width:"12",height:"12"}),aw," email forwards"]}),ax>0&&(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(y.default,{width:"12",height:"12"}),ax," email groups"]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(o.Button,{variant:"secondary",size:"sm",onClick:()=>G(),disabled:b,className:"bg-secondary text-secondary-foreground hover:bg-secondary/80",children:[(0,d.jsx)(v.default,{width:"12",height:"12",className:"mr-1"}),"Refresh"]}),(0,d.jsxs)(o.Button,{size:"sm",onClick:()=>_(!0),children:[(0,d.jsx)(u.default,{width:"12",height:"12",className:"mr-1"}),"Add Endpoint"]})]})]}),(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-1 mb-2",children:[(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(D.default,{width:"16",height:"16",className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),(0,d.jsx)(p.Input,{placeholder:"Search endpoints by name, description, or configuration...",value:O,onChange:a=>P(a.target.value),className:"pl-10 bg-card border-border rounded-xl"})]})}),(0,d.jsxs)("div",{className:"flex gap-1",children:[(0,d.jsxs)(q.Select,{value:Q,onValueChange:a=>R(a),children:[(0,d.jsx)(q.SelectTrigger,{className:"w-40 bg-card border-border rounded-xl",children:(0,d.jsx)(q.SelectValue,{placeholder:"Type"})}),(0,d.jsxs)(q.SelectContent,{className:"bg-card border-border rounded-xl",children:[(0,d.jsx)(q.SelectItem,{value:"all",children:"All Types"}),(0,d.jsx)(q.SelectItem,{value:"webhook",children:"Webhooks"}),(0,d.jsx)(q.SelectItem,{value:"email",children:"Email Forwards"}),(0,d.jsx)(q.SelectItem,{value:"email_group",children:"Email Groups"})]})]}),(0,d.jsxs)(q.Select,{value:S,onValueChange:a=>T(a),children:[(0,d.jsx)(q.SelectTrigger,{className:"w-32 bg-card border-border rounded-xl",children:(0,d.jsx)(q.SelectValue,{placeholder:"Status"})}),(0,d.jsxs)(q.SelectContent,{className:"bg-card border-border rounded-xl",children:[(0,d.jsx)(q.SelectItem,{value:"all",children:"All Status"}),(0,d.jsx)(q.SelectItem,{value:"active",children:"Active"}),(0,d.jsx)(q.SelectItem,{value:"disabled",children:"Disabled"})]})]})]})]}),aj.length>0&&(0,d.jsx)(m.Card,{className:"bg-card border-border rounded-xl mb-2",children:(0,d.jsx)(m.CardContent,{className:"py-2 px-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between min-h-[32px]",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(r.Checkbox,{checked:W,onCheckedChange:a=>{a?V(new Set(aj.map(a=>a.id))):V(new Set)},id:"select-all"}),(0,d.jsx)("label",{htmlFor:"select-all",className:"text-sm font-medium text-foreground cursor-pointer",children:U.size>0?`${U.size} of ${aj.length} endpoints selected`:`Select all (${aj.length}) endpoints`})]}),(0,d.jsxs)("div",{className:`flex items-center gap-2 transition-opacity duration-200 ${U.size>0?"opacity-100":"opacity-0 pointer-events-none"}`,children:[(0,d.jsx)(o.Button,{variant:"secondary",size:"sm",onClick:ap,disabled:0===U.size,children:"Clear"}),(0,d.jsxs)(o.Button,{variant:"destructive",size:"sm",onClick:()=>{if(0===U.size)return void F.toast.error("No endpoints selected");af(!0)},className:"bg-red-600 hover:bg-red-700",disabled:0===U.size,children:[(0,d.jsx)(C.default,{width:"12",height:"12",className:"mr-1"}),"Delete (",U.size,")"]})]})]})})})]}),(0,d.jsx)("hr",{className:"my-4 border-border"}),(0,d.jsxs)("div",{className:"space-y-2",children:[M&&(0,d.jsx)(m.Card,{className:"bg-green-500/10 border-green-500/50",children:(0,d.jsx)(m.CardContent,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(s.default,{width:"20",height:"20",className:"text-green-500"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-green-500",children:"Migration Completed Successfully!"}),(0,d.jsx)("p",{className:"text-sm text-green-500/80",children:"Your webhooks have been imported as endpoints. You can now manage all your endpoints in one place."})]}),(0,d.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:()=>N(!1),className:"text-green-500 hover:text-green-500/80",children:(0,d.jsx)(t.default,{width:"16",height:"16"})})]})})}),0===aj.length?(0,d.jsx)(m.Card,{className:"bg-card border-border rounded-xl",children:(0,d.jsx)(m.CardContent,{className:"p-8",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)(E.CustomInboundIcon,{Icon:O||"all"!==Q||"all"!==S?D.default:z.default,size:48,backgroundColor:"hsl(var(--muted-foreground))",className:"mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:O||"all"!==Q||"all"!==S?"No endpoints match your search criteria":"No endpoints configured"}),(0,d.jsx)("div",{className:"space-y-2",children:O||"all"!==Q||"all"!==S?(0,d.jsx)(o.Button,{variant:"secondary",onClick:()=>{P(""),R("all"),T("all")},children:"Clear Filters"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(o.Button,{variant:"secondary",onClick:()=>_(!0),children:[(0,d.jsx)(u.default,{width:"16",height:"16",className:"mr-2"}),"Add Your First Endpoint"]}),I&&!H&&(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,d.jsxs)("p",{children:["Have existing webhooks?",(0,d.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:async()=>{try{let a=await J.mutateAsync();a.success?(a.migratedCount||0)>0?(N(!0),F.toast.success(`Successfully imported ${a.migratedCount} webhooks!`)):F.toast.info("No webhooks found to import"):F.toast.error(a.error||"Failed to import webhooks")}catch(a){console.error("Migration failed:",a),F.toast.error("Failed to import webhooks")}},disabled:J.isPending,className:"p-0 h-auto ml-1 text-primary hover:text-primary/80",children:J.isPending?"Importing...":"Import them now"})]})})]})})]})})}):aj.map(a=>{let b=ar(a);ai(a);let c=U.has(a.id);return(0,d.jsx)(m.Card,{className:`bg-card/95 backdrop-blur-sm shadow-sm hover:shadow-lg transition-all duration-300 border rounded-xl group ${c?"border-primary bg-primary/5":"border-border"}`,children:(0,d.jsx)(m.CardContent,{className:"p-0",children:(0,d.jsx)("div",{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,d.jsx)(r.Checkbox,{checked:c,onCheckedChange:b=>ao(a.id,b),className:"flex-shrink-0"}),(0,d.jsx)(E.CustomInboundIcon,{Icon:b,size:36,backgroundColor:as(a)}),(0,d.jsx)("div",{className:"flex-1 min-w-0",children:(0,d.jsx)("div",{className:"flex items-center space-x-2 mb-1",children:(0,d.jsx)("h3",{className:"text-base font-semibold text-foreground tracking-tight truncate",children:a.name})})})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[aq(a),(0,d.jsx)(o.Button,{variant:"ghost",size:"sm",className:"p-1.5 hover:bg-muted rounded-lg transition-colors",onClick:()=>al(a),title:"Test endpoint",children:(0,d.jsx)(A.default,{width:"16",height:"16",className:"text-muted-foreground hover:text-foreground"})}),(0,d.jsx)(o.Button,{variant:"ghost",size:"sm",className:"p-1.5 hover:bg-muted rounded-lg transition-colors",onClick:()=>am(a),title:"Configure endpoint",children:(0,d.jsx)(B.default,{width:"16",height:"16",className:"text-muted-foreground hover:text-foreground"})}),(0,d.jsx)(o.Button,{variant:"ghost",size:"sm",className:"p-1.5 hover:bg-muted rounded-lg transition-colors",onClick:()=>an(a),title:"Delete endpoint",children:(0,d.jsx)(C.default,{width:"16",height:"16",className:"text-muted-foreground hover:text-foreground"})})]})]})})})},a.id)})]})]})}),(0,d.jsx)(h.CreateEndpointDialog,{open:$,onOpenChange:_}),(0,d.jsx)(i.EditEndpointDialog,{open:aa,onOpenChange:ab,endpoint:Y}),(0,d.jsx)(j.DeleteEndpointDialog,{open:ac,onOpenChange:ad,endpoint:Y}),(0,d.jsx)(k.DeleteMultipleEndpointsDialog,{open:ae,onOpenChange:af,endpoints:ay,onSuccess:ap}),(0,d.jsx)(l.TestEndpointDialog,{open:ag,onOpenChange:ah,endpoint:Y})]})}}};

//# sourceMappingURL=_baa7984b._.js.map