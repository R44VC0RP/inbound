module.exports={567740:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({addDays:()=>f,default:()=>b});var d=a.i(376428),e=a.i(974130);function f(a,b,c){let f=(0,e.toDate)(a,c?.in);return isNaN(b)?(0,d.constructFrom)(c?.in||a,NaN):(b&&f.setDate(f.getDate()+b),f)}let b=f}},674426:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>b,subDays:()=>e});var d=a.i(567740);function e(a,b,c){return(0,d.addDays)(a,-b,c)}let b=e}},567216:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>b,isAfter:()=>e});var d=a.i(974130);function e(a,b){return+(0,d.toDate)(a)>+(0,d.toDate)(b)}let b=e}},649986:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>b});var d=a.i(129629);let b=function({fill:a="currentColor",secondaryfill:b,title:c="badge 13",...e}){return b=b||a,(0,d.jsxs)("svg",{height:"12",width:"12",...e,viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("title",{children:c}),(0,d.jsx)("g",{fill:a,children:(0,d.jsx)("path",{d:"m6,0C2.691,0,0,2.691,0,6s2.691,6,6,6,6-2.691,6-6S9.309,0,6,0Zm-.75,3.5c0-.414.336-.75.75-.75s.75.336.75.75v3c0,.414-.336.75-.75.75s-.75-.336-.75-.75v-3Zm.75,6.25c-.482,0-.875-.393-.875-.875s.393-.875.875-.875.875.393.875.875-.393.875-.875.875Z",fill:a,strokeWidth:"0"})})]})}}},172473:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>b});var d=a.i(129629);let b=function({fill:a="currentColor",secondaryfill:b,title:c="badge 13",...e}){return b=b||a,(0,d.jsxs)("svg",{height:"18",width:"18",...e,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("title",{children:c}),(0,d.jsxs)("g",{fill:a,children:[(0,d.jsx)("circle",{cx:"9",cy:"9",fill:b,r:"3.5"}),(0,d.jsx)("path",{d:"M1.75,9.75c-.076,0-.153-.012-.23-.036-.394-.127-.611-.549-.484-.944,.02-.06,2.007-6.02,7.964-6.02s7.945,5.962,7.965,6.022c.125,.394-.092,.814-.486,.941-.395,.128-.815-.091-.943-.484-.065-.203-1.666-4.979-6.536-4.979S2.48,9.18,2.464,9.23c-.103,.318-.397,.52-.714,.52Z",fill:a})]})]})}}},475964:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>b});var d=a.i(129629);let b=function({fill:a="currentColor",secondaryfill:b,title:c="badge 13",...e}){return b=b||a,(0,d.jsxs)("svg",{height:"18",width:"18",...e,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("title",{children:c}),(0,d.jsx)("g",{fill:a,children:(0,d.jsx)("path",{d:"M15.25,2H2.75c-.414,0-.75,.336-.75,.75v1.785c0,.518,.227,1.005,.622,1.338l4.378,3.695v6.682c0,.414,.336,.75,.75,.75h2.5c.414,0,.75-.336,.75-.75v-6.682l4.377-3.695c.396-.333,.623-.821,.623-1.339v-1.785c0-.414-.336-.75-.75-.75Z",fill:a})})]})}}},774913:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>b});var d=a.i(129629);let b=function({fill:a="currentColor",secondaryfill:b,title:c="badge 13",...e}){return b=b||a,(0,d.jsxs)("svg",{height:"18",width:"18",...e,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("title",{children:c}),(0,d.jsxs)("g",{fill:a,children:[(0,d.jsx)("path",{d:"M12.3732 12.3732C12.6661 12.0803 13.1409 12.0803 13.4338 12.3732L16.2803 15.2197C16.5732 15.5126 16.5732 15.9874 16.2803 16.2803C15.9874 16.5732 15.5126 16.5732 15.2197 16.2803L12.3732 13.4338C12.0803 13.1409 12.0803 12.6661 12.3732 12.3732Z",fill:b,fillRule:"evenodd"}),(0,d.jsx)("path",{d:"M1.5 7.25C1.5 4.07439 4.07439 1.5 7.25 1.5C10.4256 1.5 13 4.07439 13 7.25C13 10.4256 10.4256 13 7.25 13C4.07439 13 1.5 10.4256 1.5 7.25ZM7.25 3C4.90281 3 3 4.90281 3 7.25C3 9.59719 4.90281 11.5 7.25 11.5C9.59719 11.5 11.5 9.59719 11.5 7.25C11.5 4.90281 9.59719 3 7.25 3Z",fill:a,fillRule:"evenodd"})]})]})}}},883773:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>b});var d=a.i(129629);let b=function({fill:a="currentColor",secondaryfill:b,title:c="badge 13",...e}){return b=b||a,(0,d.jsxs)("svg",{height:"18",width:"18",...e,viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("title",{children:c}),(0,d.jsxs)("g",{fill:a,children:[(0,d.jsx)("path",{d:"M15.25,11c-.414,0-.75,.336-.75,.75v1.5c0,.689-.561,1.25-1.25,1.25H4.75c-.689,0-1.25-.561-1.25-1.25v-1.5c0-.414-.336-.75-.75-.75s-.75,.336-.75,.75v1.5c0,1.517,1.233,2.75,2.75,2.75H13.25c1.517,0,2.75-1.233,2.75-2.75v-1.5c0-.414-.336-.75-.75-.75Z",fill:a}),(0,d.jsx)("path",{d:"M5.5,7h7c.414,0,.75-.336,.75-.75s-.336-.75-.75-.75H5.5c-.414,0-.75,.336-.75,.75s.336,.75,.75,.75Z",fill:b})]})]})}}},704009:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>x});var d=a.i(129629),e=a.i(260125),f=a.i(311955),g=a.i(332088),h=a.i(574541),i=a.i(621808),j=a.i(674426),k=a.i(567216),l=a.i(331055),m=a.i(523084),n=a.i(392598),o=a.i(756447),p=a.i(649986),q=a.i(172473),r=a.i(475964),s=a.i(758575),t=a.i(244),u=a.i(774913),v=a.i(691553),w=a.i(883773);async function x(){let a=await (0,e.getAnalytics)();if(!a.success)return(0,d.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-4",children:(0,d.jsx)(f.Card,{className:"border-destructive/50 bg-destructive/10",children:(0,d.jsx)(f.CardContent,{className:"p-6",children:(0,d.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,d.jsx)(w.default,{width:"16",height:"16"}),(0,d.jsx)("span",{children:a.error}),(0,d.jsx)(h.Button,{variant:"ghost",size:"sm",asChild:!0,className:"ml-auto text-destructive hover:text-destructive/80",children:(0,d.jsx)(l.default,{href:"/analytics",children:"Try Again"})})]})})})});let{stats:b,recentEmails:c}=a.data;c.filter(a=>(0,k.isAfter)(new Date(a.receivedAt),(0,j.subDays)(new Date,1))),c.filter(a=>(0,k.isAfter)(new Date(a.receivedAt),(0,j.subDays)(new Date,7)));let x={spfFailures:c.filter(a=>"FAIL"===a.authResults.spf).length,dkimFailures:c.filter(a=>"FAIL"===a.authResults.dkim).length,dmarcFailures:c.filter(a=>"FAIL"===a.authResults.dmarc).length,spamDetected:c.filter(a=>"FAIL"===a.authResults.spam).length,virusDetected:c.filter(a=>"FAIL"===a.authResults.virus).length},y=b.avgProcessingTime,z=c.filter(a=>a.contentSize&&a.contentSize>1e6),A={totalErrors:c.filter(a=>"FAIL"===a.authResults.spf||"FAIL"===a.authResults.dkim||"FAIL"===a.authResults.spam||"FAIL"===a.authResults.virus).length,authErrors:c.filter(a=>"FAIL"===a.authResults.spf||"FAIL"===a.authResults.dkim).length,spamErrors:c.filter(a=>"FAIL"===a.authResults.spam).length,virusErrors:c.filter(a=>"FAIL"===a.authResults.virus).length},B=c.reduce((a,b)=>{let c=b.domain;return a[c]||(a[c]={total:0,failed:0,avgSize:0,contentSizes:[]}),a[c].total++,("FAIL"===b.authResults.spf||"FAIL"===b.authResults.dkim)&&a[c].failed++,b.contentSize&&a[c].contentSizes.push(b.contentSize),a},{});return Object.keys(B).forEach(a=>{let b=B[a].contentSizes;B[a].avgSize=b.length>0?Math.round(b.reduce((a,b)=>a+b,0)/b.length):0}),Object.entries(c.reduce((a,b)=>{let c=b.from;return a[c]||(a[c]=0),a[c]++,a},{})).sort(([,a],[,b])=>b-a).slice(0,10),(0,d.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between bg-card border border-border rounded-lg p-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-xl font-semibold mb-1 text-foreground",children:"Email Analytics & Insights"}),(0,d.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(n.default,{width:"12",height:"12"}),c.length," log entries"]}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(p.default,{width:"12",height:"12"}),A.totalErrors," errors"]}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(v.default,{width:"12",height:"12"}),x.spfFailures+x.dkimFailures," auth failures"]}),(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(m.default,{width:"12",height:"12"}),y,"ms avg processing"]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(h.Button,{variant:"secondary",size:"sm",asChild:!0,children:(0,d.jsxs)(l.default,{href:"/analytics",children:[(0,d.jsx)(t.default,{width:"12",height:"12",className:"mr-1"}),"Refresh"]})}),(0,d.jsx)(h.Button,{size:"sm",asChild:!0,children:(0,d.jsxs)(l.default,{href:"/analytics?export=true",children:[(0,d.jsx)(o.default,{width:"12",height:"12",className:"mr-1"}),"Export Logs"]})})]})]}),(0,d.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,d.jsxs)(f.Card,{className:"bg-card border-border",children:[(0,d.jsx)(f.CardHeader,{className:"pb-3",children:(0,d.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2 text-foreground",children:[(0,d.jsx)(m.default,{width:"16",height:"16",className:"text-blue-500"}),"Performance Analysis"]})}),(0,d.jsx)(f.CardContent,{className:"pt-0",children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[(0,d.jsxs)("div",{className:"text-lg font-semibold text-blue-500",children:[y,"ms"]}),(0,d.jsx)("div",{className:"text-xs text-blue-500/80",children:"Avg Processing Time"})]}),(0,d.jsxs)("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:[(0,d.jsx)("div",{className:"text-lg font-semibold text-amber-500",children:z.length}),(0,d.jsx)("div",{className:"text-xs text-amber-500/80",children:"Large Emails (>1MB)"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Domain Performance"}),(0,d.jsx)("div",{className:"space-y-2",children:Object.entries(B).sort(([,a],[,b])=>b.total-a.total).slice(0,5).map(([a,b])=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(s.default,{width:"12",height:"12",className:"text-muted-foreground"}),(0,d.jsx)("span",{className:"text-sm font-mono text-foreground",children:a})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3 text-xs",children:[(0,d.jsxs)("span",{className:"text-muted-foreground",children:[b.total," emails"]}),(0,d.jsxs)("span",{className:"text-muted-foreground",children:[Math.round(b.avgSize/1024),"KB avg"]}),b.failed>0&&(0,d.jsxs)("span",{className:"text-destructive",children:[b.failed," failed"]})]})]},a))})]})]})})]}),(0,d.jsxs)(f.Card,{className:"bg-card border-border",children:[(0,d.jsx)(f.CardHeader,{className:"pb-3",children:(0,d.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2 text-foreground",children:[(0,d.jsx)(p.default,{width:"16",height:"16",className:"text-destructive"}),"Error Analysis"]})}),(0,d.jsx)(f.CardContent,{className:"pt-0",children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[(0,d.jsx)("div",{className:"text-lg font-semibold text-destructive",children:A.totalErrors}),(0,d.jsx)("div",{className:"text-xs text-destructive/80",children:"Total Errors"})]}),(0,d.jsxs)("div",{className:"p-3 bg-orange-500/10 border border-orange-500/20 rounded-lg",children:[(0,d.jsx)("div",{className:"text-lg font-semibold text-orange-500",children:A.authErrors}),(0,d.jsx)("div",{className:"text-xs text-orange-500/80",children:"Auth Errors"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-medium text-foreground mb-2",children:"Error Breakdown"}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[(0,d.jsx)("span",{className:"text-sm text-foreground",children:"Auth Errors"}),(0,d.jsx)("span",{className:"text-sm text-destructive",children:A.authErrors})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[(0,d.jsx)("span",{className:"text-sm text-foreground",children:"Spam Detected"}),(0,d.jsx)("span",{className:"text-sm text-destructive",children:A.spamErrors})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between p-2 bg-muted/50 rounded",children:[(0,d.jsx)("span",{className:"text-sm text-foreground",children:"Virus Detected"}),(0,d.jsx)("span",{className:"text-sm text-destructive",children:A.virusErrors})]})]})]}),A.totalErrors>10&&(0,d.jsxs)("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 text-yellow-500 text-sm font-medium mb-1",children:[(0,d.jsx)(p.default,{width:"16",height:"16"}),"High Error Rate Detected"]}),(0,d.jsx)("div",{className:"text-sm text-yellow-500/80",children:"Review endpoint configurations and network connectivity"})]})]})})]})]}),(0,d.jsxs)(f.Card,{className:"bg-card border-border",children:[(0,d.jsx)(f.CardHeader,{className:"pb-3",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2 text-foreground",children:[(0,d.jsx)(o.default,{width:"16",height:"16",className:"text-muted-foreground"}),"Email Processing Logs (",c.length,")"]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(h.Button,{variant:"ghost",size:"sm",className:"h-auto p-1 text-xs",children:[(0,d.jsx)(r.default,{width:"12",height:"12",className:"mr-1"}),"Filter"]}),(0,d.jsxs)(h.Button,{variant:"ghost",size:"sm",className:"h-auto p-1 text-xs",children:[(0,d.jsx)(u.default,{width:"12",height:"12",className:"mr-1"}),"Search"]})]})]})}),(0,d.jsxs)(f.CardContent,{className:"pt-0",children:[(0,d.jsx)("div",{className:"space-y-2",children:c.slice(0,20).map((a,b)=>(0,d.jsx)("div",{className:"border border-border rounded-lg p-3 hover:bg-muted/50 transition-colors",children:(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"flex items-start gap-3 min-w-0 flex-1",children:[(0,d.jsx)("div",{className:"text-xs text-muted-foreground font-mono w-16 flex-shrink-0 mt-0.5",children:(0,i.format)(new Date(a.receivedAt),"HH:mm:ss")}),(0,d.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,d.jsx)(g.Badge,{variant:"secondary",className:`text-xs ${"forwarded"===a.status?"bg-green-500/20 text-green-500 border-green-500/20":"failed"===a.status?"bg-destructive/20 text-destructive border-destructive/20":"processing"===a.status?"bg-amber-500/20 text-amber-500 border-amber-500/20":"bg-blue-500/20 text-blue-500 border-blue-500/20"}`,children:a.status.toUpperCase()}),a.contentSize&&(0,d.jsxs)(g.Badge,{variant:"secondary",className:"bg-muted text-muted-foreground border-border text-xs",children:[Math.round(a.contentSize/1024),"KB"]}),(0,d.jsxs)("div",{className:"flex gap-1",children:["PASS"===a.authResults.spf&&(0,d.jsx)(g.Badge,{variant:"secondary",className:"bg-green-500/20 text-green-500 border-green-500/20 text-xs",children:"SPF"}),"PASS"===a.authResults.dkim&&(0,d.jsx)(g.Badge,{variant:"secondary",className:"bg-green-500/20 text-green-500 border-green-500/20 text-xs",children:"DKIM"}),"FAIL"===a.authResults.spf&&(0,d.jsx)(g.Badge,{variant:"secondary",className:"bg-destructive/20 text-destructive border-destructive/20 text-xs",children:"SPF✗"}),"FAIL"===a.authResults.dkim&&(0,d.jsx)(g.Badge,{variant:"secondary",className:"bg-destructive/20 text-destructive border-destructive/20 text-xs",children:"DKIM✗"})]})]}),(0,d.jsxs)("div",{className:"text-sm text-foreground mb-1",children:[(0,d.jsx)("span",{className:"font-medium",children:a.from})," → ",(0,d.jsx)("span",{className:"font-medium",children:a.recipient})]}),(0,d.jsx)("div",{className:"text-sm text-muted-foreground truncate mb-1",children:a.subject}),(0,d.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:[a.messageId," • ",a.domain,("FAIL"===a.authResults.spf||"FAIL"===a.authResults.dkim)&&(0,d.jsx)("span",{className:"text-destructive ml-2",children:"Auth Failed"})]})]})]}),(0,d.jsx)("div",{className:"flex items-center gap-1 ml-4",children:(0,d.jsx)(h.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:(0,d.jsx)(q.default,{width:"12",height:"12"})})})]})},a.id))}),c.length>20&&(0,d.jsx)("div",{className:"text-center pt-4",children:(0,d.jsx)(h.Button,{variant:"ghost",size:"sm",asChild:!0,children:(0,d.jsxs)(l.default,{href:"/analytics?view=all",children:["View All ",c.length," Logs"]})})})]})]})]})}}};

//# sourceMappingURL=_b7e9da00._.js.map