module.exports={919801:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>b});var d=a.i(674420);let b=function({fill:a="currentColor",secondaryfill:b,title:c="badge 13",...e}){return b=b||a,(0,d.jsxs)("svg",{height:"12",width:"12",...e,viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("title",{children:c}),(0,d.jsxs)("g",{fill:a,children:[(0,d.jsx)("path",{d:"m1.75,11c-.192,0-.384-.073-.53-.22-.293-.293-.293-.768,0-1.061L9.543,1.396c.293-.293.768-.293,1.061,0s.293.768,0,1.061L2.28,10.78c-.146.146-.338.22-.53.22Z",fill:b,strokeWidth:"0"}),(0,d.jsx)("path",{d:"m10.25,7.25c-.414,0-.75-.336-.75-.75V2.5h-4c-.414,0-.75-.336-.75-.75s.336-.75.75-.75h4.75c.414,0,.75.336.75.75v4.75c0,.414-.336.75-.75.75Z",fill:a,strokeWidth:"0"})]})]})}}},606282:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({getEmailDetails:()=>e});var d=a.i(283620),e=(0,d.createServerReference)("40ccd8d8e26d5a0a7819f93603cecd1770ab9afb12",d.callServer,void 0,d.findSourceMapURL,"getEmailDetails")},344139:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({useEmailQuery:()=>b});var d=a.i(18337),e=a.i(606282);let b=a=>(0,d.useQuery)({queryKey:["email",a],queryFn:async()=>{if(!a)throw Error("Email ID is required");let b=await (0,e.getEmailDetails)(a);if(b.error)throw Error(b.error);return b.data},enabled:!!a,staleTime:3e5,gcTime:6e5,retry:(a,b)=>"Email not found"!==b.message&&a<3})}},965405:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({markEmailAsRead:()=>e});var d=a.i(283620),e=(0,d.createServerReference)("400e0c4e16c3c0c54c42073a20508c7d05f4dd64fa",d.callServer,void 0,d.findSourceMapURL,"markEmailAsRead")},859318:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({useMarkEmailAsReadMutation:()=>b});var d=a.i(513929),e=a.i(378727),f=a.i(965405),g=a.i(323772);let b=()=>{let a=(0,e.useQueryClient)();return(0,d.useMutation)({mutationFn:async a=>{let b=await (0,f.markEmailAsRead)(a);if(b.error)throw Error(b.error);return b.data},onSuccess:(b,c)=>{a.invalidateQueries({queryKey:["email",c]}),a.invalidateQueries({queryKey:["analytics"]}),a.invalidateQueries({queryKey:["emails"]})},onMutate:async b=>{await a.cancelQueries({queryKey:["email",b]});let c=a.getQueryData(["email",b]);return a.setQueryData(["email",b],a=>a?{...a,isRead:!0,readAt:new Date}:a),{previousEmail:c}},onError:(b,c,d)=>{d?.previousEmail&&a.setQueryData(["email",c],d.previousEmail),console.error("Failed to mark email as read:",b),g.toast.error("Failed to mark email as read")},onSettled:(b,c,d)=>{a.invalidateQueries({queryKey:["email",d]})}})}}},830696:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({emailAddressesV2Keys:()=>b,useCreateEmailAddressV2Mutation:()=>h,useDeleteEmailAddressV2Mutation:()=>j,useEmailAddressV2Query:()=>g,useEmailAddressesV2Query:()=>c,useUpdateEmailAddressV2Mutation:()=>i});var d=a.i(18337),e=a.i(513929),f=a.i(378727);let b={all:["v2","email-addresses"],lists:()=>[...b.all,"list"],list:a=>[...b.lists(),a],details:()=>[...b.all,"detail"],detail:a=>[...b.details(),a]},c=a=>(0,d.useQuery)({queryKey:b.list(a),queryFn:async()=>{let b=new URLSearchParams;a?.limit&&b.set("limit",a.limit.toString()),a?.offset&&b.set("offset",a.offset.toString()),a?.domainId&&b.set("domainId",a.domainId),a?.isActive&&b.set("isActive",a.isActive),a?.isReceiptRuleConfigured&&b.set("isReceiptRuleConfigured",a.isReceiptRuleConfigured);let c=await fetch(`/api/v2/email-addresses?${b}`);if(!c.ok)throw Error((await c.json()).error||`HTTP error! status: ${c.status}`);return c.json()},staleTime:12e4,gcTime:3e5}),g=a=>(0,d.useQuery)({queryKey:b.detail(a),queryFn:async()=>{let b=await fetch(`/api/v2/email-addresses/${a}`);if(!b.ok)throw Error((await b.json()).error||`HTTP error! status: ${b.status}`);return b.json()},enabled:!!a,staleTime:12e4,gcTime:6e5}),h=()=>{let a=(0,f.useQueryClient)();return(0,e.useMutation)({mutationFn:async a=>{let b=await fetch("/api/v2/email-addresses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error((await b.json()).error||"Failed to create email address");return b.json()},onSuccess:c=>{a.invalidateQueries({queryKey:b.lists()}),a.invalidateQueries({queryKey:["v2","domains"]})}})},i=()=>{let a=(0,f.useQueryClient)();return(0,e.useMutation)({mutationFn:async({emailAddressId:a,...b})=>{let c=await fetch(`/api/v2/email-addresses/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error((await c.json()).error||"Failed to update email address");return c.json()},onSuccess:(c,{emailAddressId:d})=>{a.invalidateQueries({queryKey:b.detail(d)}),a.invalidateQueries({queryKey:b.lists()}),a.invalidateQueries({queryKey:["v2","domains"]})}})},j=()=>{let a=(0,f.useQueryClient)();return(0,e.useMutation)({mutationFn:async a=>{let b=await fetch(`/api/v2/email-addresses/${a}`,{method:"DELETE"});if(!b.ok)throw Error((await b.json()).error||"Failed to delete email address");return b.json()},onSuccess:(c,d)=>{a.removeQueries({queryKey:b.detail(d)}),a.invalidateQueries({queryKey:b.lists()}),a.invalidateQueries({queryKey:["v2","domains"]})}})}}},458146:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({mailV2Keys:()=>b,useBulkUpdateEmailsMutation:()=>j,useEmailThreadCountsV2Query:()=>o,useEmailThreadV2Query:()=>n,useMailDetailsV2Query:()=>g,useMailV2Query:()=>c,useMarkEmailAsReadV2Mutation:()=>k,useOutboundEmailDetailsV2Query:()=>h,useReplyToEmailV2Mutation:()=>m,useUpdateEmailMutation:()=>i,useUserEmailLogsV2Query:()=>l});var d=a.i(18337),e=a.i(513929),f=a.i(378727);let b={all:["v2","mail"],lists:()=>[...b.all,"list"],list:a=>[...b.lists(),a],details:()=>[...b.all,"detail"],detail:a=>[...b.details(),a],outboundEmails:()=>["v2","emails"],outboundEmail:a=>[...b.outboundEmails(),a]},c=a=>(0,d.useQuery)({queryKey:b.list(a),queryFn:async()=>{let b=new URLSearchParams;a?.limit&&b.set("limit",a.limit.toString()),a?.offset&&b.set("offset",a.offset.toString()),a?.search&&b.set("search",a.search),a?.status&&b.set("status",a.status),a?.domain&&b.set("domain",a.domain),a?.timeRange&&b.set("timeRange",a.timeRange);let c=await fetch(`/api/v2/mail?${b}`);if(!c.ok)throw Error((await c.json()).error||`HTTP error! status: ${c.status}`);return c.json()},staleTime:3e4,gcTime:3e5}),g=a=>(0,d.useQuery)({queryKey:b.detail(a),queryFn:async()=>{let b=await fetch(`/api/v2/mail/${a}`);if(!b.ok)throw Error((await b.json()).error||`HTTP error! status: ${b.status}`);return b.json()},enabled:!!a,staleTime:6e4,gcTime:6e5}),h=a=>(0,d.useQuery)({queryKey:b.outboundEmail(a),queryFn:async()=>{let b=await fetch(`/api/v2/emails/${a}`);if(!b.ok)throw Error((await b.json()).error||`HTTP error! status: ${b.status}`);return b.json()},enabled:!!a,staleTime:6e4,gcTime:6e5}),i=()=>{let a=(0,f.useQueryClient)();return(0,e.useMutation)({mutationFn:async({emailId:a,updates:b})=>{let c=await fetch(`/api/v2/mail/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error((await c.json()).error||`HTTP error! status: ${c.status}`);return c.json()},onMutate:async({emailId:c,updates:d})=>{await a.cancelQueries({queryKey:b.lists()});let e=a.getQueriesData({queryKey:b.lists()});return a.setQueriesData({queryKey:b.lists()},a=>a?.emails?{...a,emails:a.emails.map(a=>{if(a.id===c){let b={...a};return void 0!==d.isRead&&(b.isRead=d.isRead,b.readAt=d.isRead?new Date().toISOString():null),void 0!==d.isArchived&&(b.isArchived=d.isArchived,b.archivedAt=d.isArchived?new Date().toISOString():null),b}return a})}:a),{previousEmailLists:e}},onError:(b,c,d)=>{d?.previousEmailLists&&d.previousEmailLists.forEach(([b,c])=>{a.setQueryData(b,c)})},onSettled:()=>{a.invalidateQueries({queryKey:b.lists()})}})},j=()=>{let a=(0,f.useQueryClient)();return(0,e.useMutation)({mutationFn:async a=>{let b=await fetch("/api/v2/mail/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error((await b.json()).error||`HTTP error! status: ${b.status}`);return b.json()},onMutate:async({emailIds:c,updates:d})=>{await a.cancelQueries({queryKey:b.lists()});let e=a.getQueriesData({queryKey:b.lists()});return a.setQueriesData({queryKey:b.lists()},a=>a?.emails?{...a,emails:a.emails.map(a=>{if(c.includes(a.id)){let b={...a};return void 0!==d.isRead&&(b.isRead=d.isRead,b.readAt=d.isRead?new Date().toISOString():null),void 0!==d.isArchived&&(b.isArchived=d.isArchived,b.archivedAt=d.isArchived?new Date().toISOString():null),b}return a}).filter(a=>!0!==d.isArchived||!c.includes(a.id))}:a),{previousEmailLists:e}},onError:(b,c,d)=>{d?.previousEmailLists&&d.previousEmailLists.forEach(([b,c])=>{a.setQueryData(b,c)})},onSettled:()=>{a.invalidateQueries({queryKey:b.lists()})}})},k=()=>{let a=(0,f.useQueryClient)();return(0,e.useMutation)({mutationFn:async a=>{let b=await fetch(`/api/v2/mail/${a}/mark-read`,{method:"POST"});if(!b.ok)throw Error((await b.json()).error||"Failed to mark email as read");return b.json()},onSuccess:(c,d)=>{a.invalidateQueries({queryKey:b.detail(d)}),a.invalidateQueries({queryKey:b.lists()})}})},l=a=>c({...a,limit:a?.limit||50,offset:a?.offset||0}),m=()=>{let a=(0,f.useQueryClient)();return(0,e.useMutation)({mutationFn:async({emailId:a,...b})=>{let c=await fetch(`/api/v2/emails/${a}/reply`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!c.ok)throw Error((await c.json()).error||"Failed to send reply");return c.json()},onSuccess:(c,{emailId:d})=>{a.invalidateQueries({queryKey:b.lists()}),a.invalidateQueries({queryKey:b.detail(d)})}})},n=a=>(0,d.useQuery)({queryKey:[...b.detail(a),"thread"],queryFn:async()=>{let b=await fetch(`/api/v2/mail/${a}/thread`);if(!b.ok)throw Error((await b.json()).error||`HTTP error! status: ${b.status}`);return b.json()},enabled:!!a,staleTime:6e4,gcTime:6e5}),o=a=>(0,d.useQuery)({queryKey:["mail-v2","thread-counts",...a.sort()],queryFn:async()=>{let b=await fetch("/api/v2/mail/thread-counts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailIds:a})});if(!b.ok)throw Error((await b.json()).error||`HTTP error! status: ${b.status}`);return b.json()},enabled:a.length>0,staleTime:12e4,gcTime:6e5})}},875766:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({getUserEmailLogs:()=>e});var d=a.i(283620),e=(0,d.createServerReference)("4036a927bdcc185c7cd5221062f42afb70733d159f",d.callServer,void 0,d.findSourceMapURL,"getUserEmailLogs")},363214:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({useUserEmailLogsQuery:()=>f});var d=a.i(18337),e=a.i(875766);function f(a={}){return(0,d.useQuery)({queryKey:["user-email-logs",a],queryFn:async()=>{let b=await (0,e.getUserEmailLogs)(a);if(!b.success)throw Error(b.error);return b.data},staleTime:3e4,gcTime:3e5})}},860231:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({getEmailsList:()=>e});var d=a.i(283620),e=(0,d.createServerReference)("4062391b8b9fea3dab173568dc243176dcda35bc73",d.callServer,void 0,d.findSourceMapURL,"getEmailsList")},596919:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({getEmailDetailsFromParsed:()=>e});var d=a.i(283620),e=(0,d.createServerReference)("40134f515b8fe5278d31a536a3a223c156ec6b61af",d.callServer,void 0,d.findSourceMapURL,"getEmailDetailsFromParsed")},792502:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({getUnifiedEmailLogs:()=>e});var d=a.i(283620),e=(0,d.createServerReference)("40f4308e9524f900b328889cf8d5095aa19d019d23",d.callServer,void 0,d.findSourceMapURL,"getUnifiedEmailLogs")},131106:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({emailKeys:()=>b,useEmailDetailsQuery:()=>j,useEmailsListQuery:()=>i,useUnifiedEmailLogsQuery:()=>h});var d=a.i(18337),e=a.i(860231),f=a.i(596919),g=a.i(792502);function h(a={}){return(0,d.useQuery)({queryKey:["unified-email-logs",a],queryFn:async()=>{let b=await (0,g.getUnifiedEmailLogs)(a);if(!b.success)throw Error(b.error);return b.data},staleTime:3e4,gcTime:3e5})}a.i(790024),a.i(344139),a.i(859318),a.i(830696),a.i(458146),a.i(363214);let b={all:["emails"],lists:()=>[...b.all,"list"],list:a=>[...b.lists(),a],details:()=>[...b.all,"detail"],detail:a=>[...b.details(),a]};function i(a){return(0,d.useQuery)({queryKey:b.list(a||{}),queryFn:()=>(0,e.getEmailsList)(a),staleTime:3e4,gcTime:3e5})}function j(a,c=!0){return(0,d.useQuery)({queryKey:b.detail(a),queryFn:()=>(0,f.getEmailDetailsFromParsed)(a),enabled:c&&!!a,staleTime:6e4,gcTime:6e5})}}},697859:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({}),a.i(790024),a.i(344139),a.i(859318),a.i(830696),a.i(458146),a.i(363214),a.i(131106)}};

//# sourceMappingURL=_6d0d4a16._.js.map