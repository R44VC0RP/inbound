module.exports={929549:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},983943:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},86103:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},945935:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},348629:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("@opentelemetry/api",()=>require("@opentelemetry/api"))},76569:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:events",()=>require("node:events"))},804713:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("util",()=>require("util"))},87485:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("child_process",()=>require("child_process"))},420467:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("events",()=>require("events"))},936121:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:util",()=>require("node:util"))},681635:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:http",()=>require("node:http"))},866098:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:https",()=>require("node:https"))},580767:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:buffer",()=>require("node:buffer"))},329295:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("crypto",()=>require("crypto"))},62445:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("http",()=>require("http"))},348388:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("https",()=>require("https"))},591032:function(e){var{g:s,__dirname:r,m:t,e:i}=e;t.exports=e.x("node:crypto",()=>require("node:crypto"))},909834:e=>{"use strict";var{g:s,__dirname:r}=e;e.s({DELIVERY_STATUS:()=>i.DELIVERY_STATUS,DELIVERY_TYPES:()=>i.DELIVERY_TYPES,DOMAIN_STATUS:()=>i.DOMAIN_STATUS,EMAIL_STATUS:()=>i.EMAIL_STATUS,ENDPOINT_TYPES:()=>i.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>i.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>i.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>i.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>i.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>i.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>i.WEBHOOK_STATUS,account:()=>t.account,apikey:()=>t.apikey,blockedEmails:()=>i.blockedEmails,domainDnsRecords:()=>i.domainDnsRecords,emailAddresses:()=>i.emailAddresses,emailDomains:()=>i.emailDomains,emailGroups:()=>i.emailGroups,endpointDeliveries:()=>i.endpointDeliveries,endpoints:()=>i.endpoints,parsedEmails:()=>i.parsedEmails,receivedEmails:()=>i.receivedEmails,sentEmails:()=>i.sentEmails,sesEvents:()=>i.sesEvents,session:()=>t.session,structuredEmails:()=>i.structuredEmails,subscriptions:()=>i.subscriptions,user:()=>t.user,userAccounts:()=>i.userAccounts,userOnboarding:()=>i.userOnboarding,verification:()=>t.verification,vipAllowedSenders:()=>i.vipAllowedSenders,vipConfigs:()=>i.vipConfigs,vipEmailAttempts:()=>i.vipEmailAttempts,vipPaymentSessions:()=>i.vipPaymentSessions,webhookDeliveries:()=>i.webhookDeliveries,webhooks:()=>i.webhooks});var t=e.i(594120),i=e.i(55379)},436754:e=>{"use strict";var{g:s,__dirname:r}=e;e.s({DELIVERY_STATUS:()=>t.DELIVERY_STATUS,DELIVERY_TYPES:()=>t.DELIVERY_TYPES,DOMAIN_STATUS:()=>t.DOMAIN_STATUS,EMAIL_STATUS:()=>t.EMAIL_STATUS,ENDPOINT_TYPES:()=>t.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>t.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>t.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>t.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>t.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>t.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>t.WEBHOOK_STATUS,account:()=>t.account,apikey:()=>t.apikey,blockedEmails:()=>t.blockedEmails,domainDnsRecords:()=>t.domainDnsRecords,emailAddresses:()=>t.emailAddresses,emailDomains:()=>t.emailDomains,emailGroups:()=>t.emailGroups,endpointDeliveries:()=>t.endpointDeliveries,endpoints:()=>t.endpoints,parsedEmails:()=>t.parsedEmails,receivedEmails:()=>t.receivedEmails,sentEmails:()=>t.sentEmails,sesEvents:()=>t.sesEvents,session:()=>t.session,structuredEmails:()=>t.structuredEmails,subscriptions:()=>t.subscriptions,user:()=>t.user,userAccounts:()=>t.userAccounts,userOnboarding:()=>t.userOnboarding,verification:()=>t.verification,vipAllowedSenders:()=>t.vipAllowedSenders,vipConfigs:()=>t.vipConfigs,vipEmailAttempts:()=>t.vipEmailAttempts,vipPaymentSessions:()=>t.vipPaymentSessions,webhookDeliveries:()=>t.webhookDeliveries,webhooks:()=>t.webhooks}),e.i(468686);var t=e.i(909834)},153364:function(e){var{g:s,__dirname:r,m:t,e:i}=e;"use strict";t.exports=e.r(68043).vendored["react-rsc"].ReactServerDOMTurbopackServerEdge},820832:function(e){var{g:s,__dirname:r,m:t,e:i}=e},572147:e=>{"use strict";var{g:s,__dirname:r}=e;e.s({GET:()=>l});var t=e.i(125427),i=e.i(494642),n=e.i(557440);e.i(468686);var o=e.i(55379),a=e.i(176825);async function l(e,{params:s}){console.log("📧 GET /api/v2/emails/[id] - Starting request");try{let{id:r}=await s;console.log("📧 Retrieving email with ID:",r),console.log("🔐 Validating request authentication");let{userId:l,error:c}=await (0,i.validateRequest)(e);if(!l)return console.log("❌ Authentication failed:",c),t.NextResponse.json({error:c},{status:401});console.log("✅ Authentication successful for userId:",l),console.log("🔍 Fetching email from database");let u=await n.db.select().from(o.sentEmails).where((0,a.and)((0,a.eq)(o.sentEmails.id,r),(0,a.eq)(o.sentEmails.userId,l))).limit(1);if(0===u.length)return console.log("❌ Email not found:",r),t.NextResponse.json({error:"Email not found"},{status:404});let d=u[0];console.log("✅ Email found:",{id:d.id,from:d.from,subject:d.subject,status:d.status});let p=d.to?JSON.parse(d.to):[],E=d.cc?JSON.parse(d.cc):[],m=d.bcc?JSON.parse(d.bcc):[],S=d.replyTo?JSON.parse(d.replyTo):[],v="created";switch(d.status){case"sent":v="delivered";break;case"failed":v="failed";break;case"pending":v="pending"}let T={object:"email",id:d.id,to:p,from:d.from,created_at:d.createdAt?d.createdAt.toISOString():new Date().toISOString(),subject:d.subject,html:d.htmlBody,text:d.textBody,bcc:m.length>0?m:[null],cc:E.length>0?E:[null],reply_to:S.length>0?S:[null],last_event:v};return console.log("✅ Successfully retrieved email"),t.NextResponse.json(T)}catch(e){return console.error("💥 Unexpected error in GET /api/v2/emails/[id]:",e),t.NextResponse.json({error:"Internal server error"},{status:500})}}},894312:e=>{"use strict";var{g:s,__dirname:r}=e;{e.s({patchFetch:()=>a,routeModule:()=>s,serverHooks:()=>c,workAsyncStorage:()=>r,workUnitAsyncStorage:()=>l});var t=e.i(854885),i=e.i(814689),n=e.i(25402),o=e.i(572147);let s=new t.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/v2/emails/[id]/route",pathname:"/api/v2/emails/[id]",filename:"route",bundlePath:""},resolvedPagePath:"[project]/app/api/v2/emails/[id]/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:r,workUnitAsyncStorage:l,serverHooks:c}=s;function a(){return(0,n.patchFetch)({workAsyncStorage:r,workUnitAsyncStorage:l})}}},993477:e=>{var{g:s,__dirname:r}=e;e.v(s=>Promise.all(["server/chunks/[root-of-the-server]__d9da7113._.js","server/chunks/node_modules_10ae7a2d._.js"].map(s=>e.l(s))).then(()=>s(611487)))}};

//# sourceMappingURL=%5Broot-of-the-server%5D__fe33a8eb._.js.map