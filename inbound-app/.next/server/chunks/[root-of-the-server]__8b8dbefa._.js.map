{"version":3,"sources":["turbopack:///[project]/app/api/resend/domains/route.ts","turbopack:///[project]/node_modules/next/dist/src/build/templates/app-route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { auth } from '@/lib/auth/auth'\nimport { headers } from 'next/headers'\n\nexport async function POST(request: NextRequest) {\n  try {\n    // Get user session\n    const session = await auth.api.getSession({\n      headers: await headers()\n    })\n\n    if (!session?.user?.id) {\n      return NextResponse.json(\n        { error: 'Unauthorized' },\n        { status: 401 }\n      )\n    }\n\n    const { apiKey } = await request.json()\n\n    if (!apiKey) {\n      return NextResponse.json(\n        { error: 'API key is required' },\n        { status: 400 }\n      )\n    }\n\n    if (!apiKey.startsWith('re_')) {\n      return NextResponse.json(\n        { error: 'Invalid Resend API key format. It should start with \"re_\"' },\n        { status: 400 }\n      )\n    }\n\n    console.log(`üîç Fetching domains from Resend for user: ${session.user.id}`)\n\n    // Fetch domains from Resend API\n    const response = await fetch('https://api.resend.com/domains', {\n      headers: {\n        'Authorization': `Bearer ${apiKey}`,\n        'Content-Type': 'application/json'\n      }\n    })\n\n    if (!response.ok) {\n      if (response.status === 401) {\n        return NextResponse.json(\n          { error: 'Invalid API key. Please check your Resend API key.' },\n          { status: 401 }\n        )\n      }\n      if (response.status === 403) {\n        return NextResponse.json(\n          { error: 'Access forbidden. Please check your API key permissions.' },\n          { status: 403 }\n        )\n      }\n      if (response.status === 429) {\n        return NextResponse.json(\n          { error: 'Rate limit exceeded. Please try again later.' },\n          { status: 429 }\n        )\n      }\n      \n      console.error(`Resend API error: ${response.status} ${response.statusText}`)\n      return NextResponse.json(\n        { error: 'Failed to fetch domains from Resend API' },\n        { status: response.status }\n      )\n    }\n\n    const data = await response.json()\n    \n    console.log(`‚úÖ Successfully fetched ${data.data?.length || 0} domains from Resend`)\n\n    return NextResponse.json({\n      success: true,\n      domains: data.data || [],\n      count: data.data?.length || 0\n    })\n\n  } catch (error) {\n    console.error('Error fetching Resend domains:', error)\n    return NextResponse.json(\n      { error: 'Internal server error while fetching domains' },\n      { status: 500 }\n    )\n  }\n} ","import {\n  AppRouteRouteModule,\n  type AppRouteRouteModuleOptions,\n} from '../../server/route-modules/app-route/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\nimport { patchFetch as _patchFetch } from '../../server/lib/patch-fetch'\n\nimport * as userland from 'VAR_USERLAND'\n\n// These are injected by the loader afterwards. This is injected as a variable\n// instead of a replacement because this could also be `undefined` instead of\n// an empty string.\ndeclare const nextConfigOutput: AppRouteRouteModuleOptions['nextConfigOutput']\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\n// INJECT:nextConfigOutput\n\nconst routeModule = new AppRouteRouteModule({\n  definition: {\n    kind: RouteKind.APP_ROUTE,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    filename: 'VAR_DEFINITION_FILENAME',\n    bundlePath: 'VAR_DEFINITION_BUNDLE_PATH',\n  },\n  resolvedPagePath: 'VAR_RESOLVED_PAGE_PATH',\n  nextConfigOutput,\n  userland,\n})\n\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule\n\nfunction patchFetch() {\n  return _patchFetch({\n    workAsyncStorage,\n    workUnitAsyncStorage,\n  })\n}\n\nexport {\n  routeModule,\n  workAsyncStorage,\n  workUnitAsyncStorage,\n  serverHooks,\n  patchFetch,\n}\n"],"names":["AppRouteRouteModule","RouteKind","patchFetch","_patchFetch","userland","routeModule","definition","kind","APP_ROUTE","page","pathname","filename","bundlePath","resolvedPagePath","nextConfigOutput","workAsyncStorage","workUnitAsyncStorage","serverHooks"],"mappings":"y5JAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEO,eAAe,EAAK,CAAoB,EAC7C,GAAI,CAEF,IAAM,EAAU,MAAM,EAAA,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CACxC,QAAS,MAAM,CAAA,CADK,CACL,EAAA,OAAM,AAAN,GACjB,GAEA,GAAI,CAAC,GAAS,MAAM,GAClB,CADsB,MACf,CAJQ,CAIR,YAAY,CAAC,IAAI,CACtB,CAAE,MAAO,YADJ,EACmB,EACxB,CAAE,OAAQ,GAAI,GAIlB,GAAM,QAAE,CAAM,CAAE,CAAG,MAAM,EAAQ,IAAI,GAErC,GAAI,CAAC,EACH,MADW,CACJ,EAAA,YAAY,CAAC,IAAI,CACtB,CAAE,MAAO,YADJ,SAC0B,EAC/B,CAAE,OAAQ,GAAI,GAIlB,GAAI,CAAC,EAAO,UAAU,CAAC,OACrB,CAD6B,MACtB,EAAA,YAAY,CAAC,IAAI,CACtB,CAAE,MAAO,YADJ,+CACgE,EACrE,CAAE,OAAQ,GAAI,GAIlB,QAAQ,GAAG,CAAC,CAAC,0CAA0C,EAAE,EAAQ,IAAI,CAAC,EAAE,CAAA,CAAE,EAG1E,IAAM,EAAW,MAAM,MAAM,iCAAkC,CAC7D,QAAS,CACP,cAAiB,CAAC,OAAO,EAAE,EAAA,CAAQ,CACnC,eAAgB,kBAClB,CACF,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CAChB,GAAwB,KAAK,CAAzB,EAAS,MAAM,CACjB,OAAO,EAAA,YAAY,CAAC,IAAI,CACtB,CAAE,MAAO,YADJ,wCACyD,EAC9D,CAAE,OAAQ,GAAI,GAGlB,GAAwB,KAAK,CAAzB,EAAS,MAAM,CACjB,OAAO,EAAA,YAAY,CAAC,IAAI,CACtB,CAAE,MAAO,YADJ,8CAC+D,EACpE,CAAE,OAAQ,GAAI,GAGlB,GAAI,AAAoB,KAAK,GAAhB,MAAM,CACjB,OAAO,EAAA,YAAY,CAAC,IAAI,CACtB,CAAE,MAAO,YADJ,kCACmD,EACxD,CAAE,OAAQ,GAAI,GAKlB,OADA,QAAQ,KAAK,CAAC,CAAC,kBAAkB,EAAE,EAAS,MAAM,CAAC,CAAC,EAAE,EAAS,UAAU,CAAA,CAAE,EACpE,EAAA,YAAY,CAAC,IAAI,CACtB,CAAE,MAAO,YADJ,6BAC8C,EACnD,CAAE,OAAQ,EAAS,MAAM,AAAC,EAE9B,CAEA,IAAM,EAAO,MAAM,EAAS,IAAI,GAIhC,OAFA,QAAQ,GAAG,CAAC,CAAC,uBAAuB,EAAE,EAAK,IAAI,EAAE,QAAU,EAAE,oBAAoB,CAAC,EAE3E,EAAA,YAAY,CAAC,IAAI,CAAC,CACvB,SAAS,EACT,OAFK,CAEI,EAAK,IAAI,EAAI,EAAE,CACxB,MAAO,EAAK,IAAI,EAAE,QAAU,CAC9B,EAEF,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,iCAAkC,GACzC,EAAA,YAAY,CAAC,IAAI,CACtB,CAAE,MAAO,YADJ,kCACmD,EACxD,CAAE,OAAQ,GAAI,EAElB,CACF,iKCxFA,IAAA,EAGO,EAAA,CAAA,AAFLA,CAEK,QACP,EAA0B,EAAyB,CAA1CC,AAA0C,CAAA,EAAA,EAH9B,GAEwC,CAC3C,AAClB,EAA0C,EAFnC,AAEmC,CAAA,AAAjCC,CAAiC,EADhB,EAC8C,GAExE,EAAwC,EAAA,CAAA,CAFjBC,AAEiB,EAA5BC,KAWZ,IAAMC,AAb4B,EAad,GAXM,CAWN,EAbsB,AAalBL,YAXgB,OAWhBA,CAAoB,CAC1CM,WAAY,CACVC,KAAMN,EAAAA,SAAAA,CAAUO,SAAS,CACzBC,KAAM,4BACNC,SAAU,sBACVC,SAAU,QACVC,WAAY,EACd,EACAC,iBAAkB,4CAClBC,iBAXF,CAA0B,WAYxBV,CACF,GAKM,kBAAEW,CAAgB,sBAAEC,CAAoB,aAAEC,CAAW,CAAE,CAAGZ,EAEhE,SAASH,IACP,MAAA,CAAA,EAAA,EAAOC,UAAAA,EAAY,kBACjBY,uBACAC,CACF,EACF","ignoreList":[1]}