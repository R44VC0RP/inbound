module.exports={929549:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},983943:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},86103:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},945935:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},348629:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("@opentelemetry/api",()=>require("@opentelemetry/api"))},76569:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("node:events",()=>require("node:events"))},804713:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("util",()=>require("util"))},87485:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("child_process",()=>require("child_process"))},420467:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("events",()=>require("events"))},936121:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("node:util",()=>require("node:util"))},681635:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("node:http",()=>require("node:http"))},866098:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("node:https",()=>require("node:https"))},580767:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("node:buffer",()=>require("node:buffer"))},329295:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("crypto",()=>require("crypto"))},62445:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("http",()=>require("http"))},348388:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("https",()=>require("https"))},591032:function(e){var{g:i,__dirname:s,m:a,e:n}=e;a.exports=e.x("node:crypto",()=>require("node:crypto"))},909834:e=>{"use strict";var{g:i,__dirname:s}=e;e.s({DELIVERY_STATUS:()=>n.DELIVERY_STATUS,DELIVERY_TYPES:()=>n.DELIVERY_TYPES,DOMAIN_STATUS:()=>n.DOMAIN_STATUS,EMAIL_STATUS:()=>n.EMAIL_STATUS,ENDPOINT_TYPES:()=>n.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>n.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>n.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>n.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>n.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>n.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>n.WEBHOOK_STATUS,account:()=>a.account,apikey:()=>a.apikey,blockedEmails:()=>n.blockedEmails,domainDnsRecords:()=>n.domainDnsRecords,emailAddresses:()=>n.emailAddresses,emailDomains:()=>n.emailDomains,emailGroups:()=>n.emailGroups,endpointDeliveries:()=>n.endpointDeliveries,endpoints:()=>n.endpoints,parsedEmails:()=>n.parsedEmails,receivedEmails:()=>n.receivedEmails,sentEmails:()=>n.sentEmails,sesEvents:()=>n.sesEvents,session:()=>a.session,structuredEmails:()=>n.structuredEmails,subscriptions:()=>n.subscriptions,user:()=>a.user,userAccounts:()=>n.userAccounts,userOnboarding:()=>n.userOnboarding,verification:()=>a.verification,vipAllowedSenders:()=>n.vipAllowedSenders,vipConfigs:()=>n.vipConfigs,vipEmailAttempts:()=>n.vipEmailAttempts,vipPaymentSessions:()=>n.vipPaymentSessions,webhookDeliveries:()=>n.webhookDeliveries,webhooks:()=>n.webhooks});var a=e.i(594120),n=e.i(55379)},436754:e=>{"use strict";var{g:i,__dirname:s}=e;e.s({DELIVERY_STATUS:()=>a.DELIVERY_STATUS,DELIVERY_TYPES:()=>a.DELIVERY_TYPES,DOMAIN_STATUS:()=>a.DOMAIN_STATUS,EMAIL_STATUS:()=>a.EMAIL_STATUS,ENDPOINT_TYPES:()=>a.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>a.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>a.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>a.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>a.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>a.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>a.WEBHOOK_STATUS,account:()=>a.account,apikey:()=>a.apikey,blockedEmails:()=>a.blockedEmails,domainDnsRecords:()=>a.domainDnsRecords,emailAddresses:()=>a.emailAddresses,emailDomains:()=>a.emailDomains,emailGroups:()=>a.emailGroups,endpointDeliveries:()=>a.endpointDeliveries,endpoints:()=>a.endpoints,parsedEmails:()=>a.parsedEmails,receivedEmails:()=>a.receivedEmails,sentEmails:()=>a.sentEmails,sesEvents:()=>a.sesEvents,session:()=>a.session,structuredEmails:()=>a.structuredEmails,subscriptions:()=>a.subscriptions,user:()=>a.user,userAccounts:()=>a.userAccounts,userOnboarding:()=>a.userOnboarding,verification:()=>a.verification,vipAllowedSenders:()=>a.vipAllowedSenders,vipConfigs:()=>a.vipConfigs,vipEmailAttempts:()=>a.vipEmailAttempts,vipPaymentSessions:()=>a.vipPaymentSessions,webhookDeliveries:()=>a.webhookDeliveries,webhooks:()=>a.webhooks}),e.i(468686);var a=e.i(909834)},906273:e=>{"use strict";var{g:i,__dirname:s}=e;e.s({areAllDnsRecordsVerified:()=>u,createDomainVerification:()=>o,createEmailAddress:()=>p,deleteDomainFromDatabase:()=>f,disableDomainCatchAll:()=>S,enableDomainCatchAll:()=>v,getDomainOwnerByDomain:()=>g,getDomainWithCatchAll:()=>h,getDomainWithRecords:()=>l,getDomainWithRecordsAndEmails:()=>A,getEmailAddressesForDomain:()=>D,isDomainCatchAllEnabled:()=>w,markDomainAsVerified:()=>T,updateDnsRecordVerification:()=>m,updateDomainSesVerification:()=>d,updateDomainStatus:()=>c,updateEmailAddressReceiptRule:()=>E});var a=e.i(557440);e.i(468686);var n=e.i(55379),r=e.i(176825),t=e.i(318812);async function o(e,i,s){let r={id:`indm_${(0,t.nanoid)()}`,domain:e,userId:i,status:"pending",canReceiveEmails:s.canReceiveEmails,hasMxRecords:s.hasMxRecords,domainProvider:s.provider?.name,providerConfidence:s.provider?.confidence,lastDnsCheck:new Date,updatedAt:new Date},[o]=await a.db.insert(n.emailDomains).values(r).returning();return o}async function d(e,i,s,o){let[d]=await a.db.update(n.emailDomains).set({verificationToken:i,status:"Success"===s?"verified":"pending",lastSesCheck:new Date,updatedAt:new Date}).where((0,r.eq)(n.emailDomains.id,e)).returning();for(let i of o){let s={id:`dns_${(0,t.nanoid)()}`,domainId:e,recordType:i.type,name:i.name,value:i.value,isRequired:!0,isVerified:!1};await a.db.insert(n.domainDnsRecords).values(s).onConflictDoNothing()}return d}async function l(e,i){let s=await a.db.select().from(n.emailDomains).where((0,r.and)((0,r.eq)(n.emailDomains.domain,e),(0,r.eq)(n.emailDomains.userId,i))).limit(1);if(!s[0])return null;let t=await a.db.select().from(n.domainDnsRecords).where((0,r.eq)(n.domainDnsRecords.domainId,s[0].id));return{...s[0],dnsRecords:t}}async function m(e,i,s,t){await a.db.update(n.domainDnsRecords).set({isVerified:t,lastChecked:new Date}).where((0,r.and)((0,r.eq)(n.domainDnsRecords.domainId,e),(0,r.eq)(n.domainDnsRecords.recordType,i),(0,r.eq)(n.domainDnsRecords.name,s)))}async function u(e){let i=await a.db.select().from(n.domainDnsRecords).where((0,r.and)((0,r.eq)(n.domainDnsRecords.domainId,e),(0,r.eq)(n.domainDnsRecords.isRequired,!0)));return i.length>0&&i.every(e=>e.isVerified)}async function c(e,i){let[s]=await a.db.update(n.emailDomains).set({status:i,updatedAt:new Date}).where((0,r.eq)(n.emailDomains.id,e)).returning();return s}async function p(e,i,s){let r={id:`email_${(0,t.nanoid)()}`,address:e,domainId:i,userId:s,isActive:!0,isReceiptRuleConfigured:!1,updatedAt:new Date},[o]=await a.db.insert(n.emailAddresses).values(r).returning();return o}async function D(e){return a.db.select().from(n.emailAddresses).where((0,r.eq)(n.emailAddresses.domainId,e))}async function E(e,i,s){let[t]=await a.db.update(n.emailAddresses).set({isReceiptRuleConfigured:i,receiptRuleName:s,updatedAt:new Date}).where((0,r.eq)(n.emailAddresses.id,e)).returning();return t}async function A(e,i){let s=await a.db.select().from(n.emailDomains).where((0,r.and)((0,r.eq)(n.emailDomains.domain,e),(0,r.eq)(n.emailDomains.userId,i))).limit(1);if(!s[0])return null;let t=await a.db.select().from(n.domainDnsRecords).where((0,r.eq)(n.domainDnsRecords.domainId,s[0].id)),o=await a.db.select().from(n.emailAddresses).where((0,r.eq)(n.emailAddresses.domainId,s[0].id));return{...s[0],dnsRecords:t,emailAddresses:o}}async function f(e,i){try{let s=await a.db.select().from(n.emailDomains).where((0,r.and)((0,r.eq)(n.emailDomains.id,e),(0,r.eq)(n.emailDomains.userId,i))).limit(1);if(!s[0])return{success:!1,error:"Domain not found or access denied"};return console.log(`üóëÔ∏è Deleting domain from database: ${s[0].domain}`),await a.db.delete(n.emailAddresses).where((0,r.eq)(n.emailAddresses.domainId,e)),await a.db.delete(n.domainDnsRecords).where((0,r.eq)(n.domainDnsRecords.domainId,e)),await a.db.delete(n.emailDomains).where((0,r.eq)(n.emailDomains.id,e)),console.log(`‚úÖ Successfully deleted domain from database: ${s[0].domain}`),{success:!0}}catch(e){return console.error("Database domain deletion error:",e),{success:!1,error:e instanceof Error?e.message:"Failed to delete domain from database"}}}async function v(e,i,s){let[t]=await a.db.update(n.emailDomains).set({isCatchAllEnabled:!0,catchAllWebhookId:i,catchAllReceiptRuleName:s,updatedAt:new Date}).where((0,r.eq)(n.emailDomains.id,e)).returning();if(!t)throw Error("Domain not found");return t}async function S(e){let[i]=await a.db.update(n.emailDomains).set({isCatchAllEnabled:!1,catchAllWebhookId:null,catchAllReceiptRuleName:null,updatedAt:new Date}).where((0,r.eq)(n.emailDomains.id,e)).returning();if(!i)throw Error("Domain not found");return i}async function h(e,i){let[s]=await a.db.select().from(n.emailDomains).where((0,r.and)((0,r.eq)(n.emailDomains.domain,e),(0,r.eq)(n.emailDomains.userId,i))).limit(1);return s||null}async function w(e){let[i]=await a.db.select({isCatchAllEnabled:n.emailDomains.isCatchAllEnabled}).from(n.emailDomains).where((0,r.eq)(n.emailDomains.id,e)).limit(1);return i?.isCatchAllEnabled||!1}async function g(i){try{let{user:s}=await e.r(278680)(e.i),t=await a.db.select({userId:n.emailDomains.userId,userEmail:s.email,userName:s.name}).from(n.emailDomains).innerJoin(s,(0,r.eq)(n.emailDomains.userId,s.id)).where((0,r.eq)(n.emailDomains.domain,i)).limit(1);if(!t[0])return console.log(`‚ùå getDomainOwnerByDomain - No owner found for domain: ${i}`),null;return console.log(`‚úÖ getDomainOwnerByDomain - Found owner for domain ${i}: ${t[0].userEmail}`),t[0]}catch(e){return console.error("‚ùå getDomainOwnerByDomain - Error looking up domain owner:",e),null}}async function T(e){try{let[i]=await a.db.update(n.emailDomains).set({status:"verified",lastSesCheck:new Date,updatedAt:new Date}).where((0,r.eq)(n.emailDomains.domain,e)).returning();return i&&console.log(`‚úÖ markDomainAsVerified - Domain ${e} marked as verified`),i||null}catch(e){return console.error("‚ùå markDomainAsVerified - Error updating domain status:",e),null}}},709522:function(e){var{g:i,__dirname:s,m:a,e:n}=e},410636:e=>{"use strict";var{g:i,__dirname:s}=e;e.s({POST:()=>o});var a=e.i(125427),n=e.i(906273),r=e.i(402168),t=e.i(998322);async function o(e){try{let i=await r.auth.api.getSession({headers:await (0,t.headers)()});if(!i?.user?.id)return a.NextResponse.json({error:"Unauthorized"},{status:401});let{domain:s}=await e.json();if(!s)return a.NextResponse.json({error:"Domain is required"},{status:400});let o=await (0,n.getDomainWithRecordsAndEmails)(s,i.user.id);if(!o)return a.NextResponse.json({error:"Domain not found"},{status:404});return a.NextResponse.json({domain:s,emailAddresses:(o.emailAddresses||[]).map(e=>({id:e.id,address:e.address,isConfigured:e.isReceiptRuleConfigured,ruleName:e.receiptRuleName,createdAt:e.createdAt})),hasExistingConfiguration:(o.emailAddresses||[]).length>0,timestamp:new Date})}catch(e){return console.error("Get email addresses error:",e),a.NextResponse.json({error:"Failed to get email addresses"},{status:500})}}},486871:e=>{"use strict";var{g:i,__dirname:s}=e;{e.s({patchFetch:()=>o,routeModule:()=>i,serverHooks:()=>l,workAsyncStorage:()=>s,workUnitAsyncStorage:()=>d});var a=e.i(854885),n=e.i(814689),r=e.i(25402),t=e.i(410636);let i=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/inbound/get-email-addresses/route",pathname:"/api/inbound/get-email-addresses",filename:"route",bundlePath:""},resolvedPagePath:"[project]/app/api/inbound/get-email-addresses/route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:s,workUnitAsyncStorage:d,serverHooks:l}=i;function o(){return(0,r.patchFetch)({workAsyncStorage:s,workUnitAsyncStorage:d})}}},278680:e=>{var{g:i,__dirname:s}=e;e.v(e=>Promise.resolve().then(()=>e(594120)))},993477:e=>{var{g:i,__dirname:s}=e;e.v(i=>Promise.all(["server/chunks/[root-of-the-server]__9c0e1164._.js","server/chunks/node_modules_10ae7a2d._.js"].map(i=>e.l(i))).then(()=>i(611487)))}};

//# sourceMappingURL=%5Broot-of-the-server%5D__796f7f47._.js.map