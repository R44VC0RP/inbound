module.exports={929549:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},983943:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},86103:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},945935:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},348629:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("@opentelemetry/api",()=>require("@opentelemetry/api"))},76569:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("node:events",()=>require("node:events"))},804713:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("util",()=>require("util"))},87485:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("child_process",()=>require("child_process"))},420467:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("events",()=>require("events"))},936121:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("node:util",()=>require("node:util"))},681635:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("node:http",()=>require("node:http"))},866098:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("node:https",()=>require("node:https"))},580767:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("node:buffer",()=>require("node:buffer"))},329295:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("crypto",()=>require("crypto"))},62445:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("http",()=>require("http"))},348388:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("https",()=>require("https"))},591032:function(e){var{g:s,__dirname:r,m:i,e:t}=e;i.exports=e.x("node:crypto",()=>require("node:crypto"))},909834:e=>{"use strict";var{g:s,__dirname:r}=e;e.s({DELIVERY_STATUS:()=>t.DELIVERY_STATUS,DELIVERY_TYPES:()=>t.DELIVERY_TYPES,DOMAIN_STATUS:()=>t.DOMAIN_STATUS,EMAIL_STATUS:()=>t.EMAIL_STATUS,ENDPOINT_TYPES:()=>t.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>t.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>t.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>t.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>t.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>t.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>t.WEBHOOK_STATUS,account:()=>i.account,apikey:()=>i.apikey,blockedEmails:()=>t.blockedEmails,domainDnsRecords:()=>t.domainDnsRecords,emailAddresses:()=>t.emailAddresses,emailDomains:()=>t.emailDomains,emailGroups:()=>t.emailGroups,endpointDeliveries:()=>t.endpointDeliveries,endpoints:()=>t.endpoints,parsedEmails:()=>t.parsedEmails,receivedEmails:()=>t.receivedEmails,sentEmails:()=>t.sentEmails,sesEvents:()=>t.sesEvents,session:()=>i.session,structuredEmails:()=>t.structuredEmails,subscriptions:()=>t.subscriptions,user:()=>i.user,userAccounts:()=>t.userAccounts,userOnboarding:()=>t.userOnboarding,verification:()=>i.verification,vipAllowedSenders:()=>t.vipAllowedSenders,vipConfigs:()=>t.vipConfigs,vipEmailAttempts:()=>t.vipEmailAttempts,vipPaymentSessions:()=>t.vipPaymentSessions,webhookDeliveries:()=>t.webhookDeliveries,webhooks:()=>t.webhooks});var i=e.i(594120),t=e.i(55379)},436754:e=>{"use strict";var{g:s,__dirname:r}=e;e.s({DELIVERY_STATUS:()=>i.DELIVERY_STATUS,DELIVERY_TYPES:()=>i.DELIVERY_TYPES,DOMAIN_STATUS:()=>i.DOMAIN_STATUS,EMAIL_STATUS:()=>i.EMAIL_STATUS,ENDPOINT_TYPES:()=>i.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>i.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>i.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>i.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>i.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>i.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>i.WEBHOOK_STATUS,account:()=>i.account,apikey:()=>i.apikey,blockedEmails:()=>i.blockedEmails,domainDnsRecords:()=>i.domainDnsRecords,emailAddresses:()=>i.emailAddresses,emailDomains:()=>i.emailDomains,emailGroups:()=>i.emailGroups,endpointDeliveries:()=>i.endpointDeliveries,endpoints:()=>i.endpoints,parsedEmails:()=>i.parsedEmails,receivedEmails:()=>i.receivedEmails,sentEmails:()=>i.sentEmails,sesEvents:()=>i.sesEvents,session:()=>i.session,structuredEmails:()=>i.structuredEmails,subscriptions:()=>i.subscriptions,user:()=>i.user,userAccounts:()=>i.userAccounts,userOnboarding:()=>i.userOnboarding,verification:()=>i.verification,vipAllowedSenders:()=>i.vipAllowedSenders,vipConfigs:()=>i.vipConfigs,vipEmailAttempts:()=>i.vipEmailAttempts,vipPaymentSessions:()=>i.vipPaymentSessions,webhookDeliveries:()=>i.webhookDeliveries,webhooks:()=>i.webhooks}),e.i(468686);var i=e.i(909834)},496669:e=>{"use strict";var{g:s,__dirname:r}=e;e.s({createApiKeyMiddleware:()=>o,validateApiKey:()=>t});var i=e.i(402168);async function t(e){try{let s,r=e.headers.get("Authorization");if(!r)return{valid:!1,error:"Missing Authorization header"};if(s=r.startsWith("Bearer ")?r.substring(7):r,console.log("API KEY: "+s),!s)return{valid:!1,error:"Invalid Authorization header format"};let{valid:t,error:o,key:n}=await i.auth.api.verifyApiKey({body:{key:s}});if(console.log("VALID: "+t),console.log("ERROR: "+o),console.log("KEY: "+n?.userId),!t||o||!n)return{valid:!1,error:o?.message||"Invalid API key"};if(!n.enabled)return{valid:!1,error:"API key is disabled"};if(n.expiresAt&&new Date(n.expiresAt)<new Date)return{valid:!1,error:"API key has expired"};return{valid:!0,user:{id:n.userId,email:n.userId,name:null}}}catch(e){return console.error("API key validation error:",e),{valid:!1,error:"Internal server error during API key validation"}}}function o(){return async e=>{let s=await t(e);return s.valid?{user:s.user}:{error:s.error,status:401}}}},954682:function(e){var{g:s,__dirname:r,m:i,e:t}=e},588916:e=>{"use strict";var{g:s,__dirname:r}=e;e.s({DELETE:()=>u,GET:()=>d,PUT:()=>l});var i=e.i(125427),t=e.i(496669),o=e.i(557440);e.i(468686);var n=e.i(55379),a=e.i(176825);async function d(e,{params:s}){try{console.log(`üìã GET /api/v1.1/email-addresses/${s.id} - Fetching email address details`);let r=await (0,t.validateApiKey)(e);if("error"in r)return i.NextResponse.json({error:r.error},{status:401});let d=r.user?.id;if(!d)return i.NextResponse.json({error:"User not found"},{status:401});let l=await o.db.select({id:n.emailAddresses.id,address:n.emailAddresses.address,domainId:n.emailAddresses.domainId,webhookId:n.emailAddresses.webhookId,endpointId:n.emailAddresses.endpointId,isActive:n.emailAddresses.isActive,isReceiptRuleConfigured:n.emailAddresses.isReceiptRuleConfigured,receiptRuleName:n.emailAddresses.receiptRuleName,createdAt:n.emailAddresses.createdAt,updatedAt:n.emailAddresses.updatedAt,domainName:n.emailDomains.domain,domainStatus:n.emailDomains.status,endpointName:n.endpoints.name,endpointType:n.endpoints.type,endpointIsActive:n.endpoints.isActive,webhookName:n.webhooks.name,webhookUrl:n.webhooks.url,webhookIsActive:n.webhooks.isActive}).from(n.emailAddresses).leftJoin(n.emailDomains,(0,a.eq)(n.emailAddresses.domainId,n.emailDomains.id)).leftJoin(n.endpoints,(0,a.eq)(n.emailAddresses.endpointId,n.endpoints.id)).leftJoin(n.webhooks,(0,a.eq)(n.emailAddresses.webhookId,n.webhooks.id)).where((0,a.and)((0,a.eq)(n.emailAddresses.id,s.id),(0,a.eq)(n.emailAddresses.userId,d))).limit(1);if(!l[0])return i.NextResponse.json({success:!1,error:"Email address not found"},{status:404});let u=l[0],p={id:u.id,address:u.address,isActive:u.isActive,isReceiptRuleConfigured:u.isReceiptRuleConfigured,receiptRuleName:u.receiptRuleName,createdAt:u.createdAt,updatedAt:u.updatedAt,domain:{id:u.domainId,name:u.domainName,status:u.domainStatus},routing:u.endpointId?{type:"endpoint",id:u.endpointId,name:u.endpointName,endpointType:u.endpointType,isActive:u.endpointIsActive}:u.webhookId?{type:"webhook",id:u.webhookId,name:u.webhookName,url:u.webhookUrl,isActive:u.webhookIsActive}:{type:"none",id:null,name:null,isActive:!1}};return console.log(`‚úÖ GET /api/v1.1/email-addresses/${s.id} - Retrieved email address details`),i.NextResponse.json({success:!0,data:p})}catch(e){return console.error(`‚ùå GET /api/v1.1/email-addresses/${s.id} - Error:`,e),i.NextResponse.json({success:!1,error:"Failed to fetch email address details",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function l(e,{params:s}){try{console.log(`üìù PUT /api/v1.1/email-addresses/${s.id} - Updating email address`);let r=await (0,t.validateApiKey)(e);if("error"in r)return i.NextResponse.json({error:r.error},{status:401});let d=r.user?.id;if(!d)return i.NextResponse.json({error:"User not found"},{status:401});let l=await e.json();if(!(await o.db.select().from(n.emailAddresses).where((0,a.and)((0,a.eq)(n.emailAddresses.id,s.id),(0,a.eq)(n.emailAddresses.userId,d))).limit(1))[0])return i.NextResponse.json({success:!1,error:"Email address not found"},{status:404});if(l.endpointId&&!(await o.db.select().from(n.endpoints).where((0,a.and)((0,a.eq)(n.endpoints.id,l.endpointId),(0,a.eq)(n.endpoints.userId,d))).limit(1))[0])return i.NextResponse.json({success:!1,error:"Endpoint not found or access denied"},{status:404});if(l.webhookId&&!(await o.db.select().from(n.webhooks).where((0,a.and)((0,a.eq)(n.webhooks.id,l.webhookId),(0,a.eq)(n.webhooks.userId,d))).limit(1))[0])return i.NextResponse.json({success:!1,error:"Webhook not found or access denied"},{status:404});let u={updatedAt:new Date};void 0!==l.isActive&&(u.isActive=l.isActive),void 0!==l.endpointId&&(u.endpointId=l.endpointId,u.webhookId=null),void 0!==l.webhookId&&(u.webhookId=l.webhookId,u.endpointId=null);let[p]=await o.db.update(n.emailAddresses).set(u).where((0,a.eq)(n.emailAddresses.id,s.id)).returning();return console.log(`‚úÖ PUT /api/v1.1/email-addresses/${s.id} - Successfully updated email address`),i.NextResponse.json({success:!0,data:p,message:"Email address updated successfully"})}catch(e){return console.error(`‚ùå PUT /api/v1.1/email-addresses/${s.id} - Error:`,e),i.NextResponse.json({success:!1,error:"Failed to update email address",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function u(e,{params:s}){try{console.log(`üóëÔ∏è DELETE /api/v1.1/email-addresses/${s.id} - Deleting email address`);let r=await (0,t.validateApiKey)(e);if("error"in r)return i.NextResponse.json({error:r.error},{status:401});let d=r.user?.id;if(!d)return i.NextResponse.json({error:"User not found"},{status:401});if(!(await o.db.select().from(n.emailAddresses).where((0,a.and)((0,a.eq)(n.emailAddresses.id,s.id),(0,a.eq)(n.emailAddresses.userId,d))).limit(1))[0])return i.NextResponse.json({success:!1,error:"Email address not found"},{status:404});return await o.db.delete(n.emailAddresses).where((0,a.eq)(n.emailAddresses.id,s.id)),console.log(`‚úÖ DELETE /api/v1.1/email-addresses/${s.id} - Successfully deleted email address`),i.NextResponse.json({success:!0,message:"Email address deleted successfully"})}catch(e){return console.error(`‚ùå DELETE /api/v1.1/email-addresses/${s.id} - Error:`,e),i.NextResponse.json({success:!1,error:"Failed to delete email address",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}},329825:e=>{"use strict";var{g:s,__dirname:r}=e;{e.s({patchFetch:()=>a,routeModule:()=>s,serverHooks:()=>l,workAsyncStorage:()=>r,workUnitAsyncStorage:()=>d});var i=e.i(854885),t=e.i(814689),o=e.i(25402),n=e.i(588916);let s=new i.AppRouteRouteModule({definition:{kind:t.RouteKind.APP_ROUTE,page:"/api/v1.1/email-addresses/[id]/route",pathname:"/api/v1.1/email-addresses/[id]",filename:"route",bundlePath:""},resolvedPagePath:"[project]/app/api/v1.1/email-addresses/[id]/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:r,workUnitAsyncStorage:d,serverHooks:l}=s;function a(){return(0,o.patchFetch)({workAsyncStorage:r,workUnitAsyncStorage:d})}}},993477:e=>{var{g:s,__dirname:r}=e;e.v(s=>Promise.all(["server/chunks/[root-of-the-server]__9c40e004._.js","server/chunks/node_modules_10ae7a2d._.js"].map(s=>e.l(s))).then(()=>s(611487)))}};

//# sourceMappingURL=%5Broot-of-the-server%5D__e02b786d._.js.map